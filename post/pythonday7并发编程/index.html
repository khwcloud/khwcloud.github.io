<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>python,day7,并发编程 - blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="khw" /><meta name="description" content="并发编程。
" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.100.1 with theme even" />


<link rel="canonical" href="http://localhost:1313/post/pythonday7%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.8c3cbcb0324c2bb4875ceccba4007cbad4b4ac8377f33af9953c3e7684534a50.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="python,day7,并发编程" />
<meta property="og:description" content="并发编程。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/pythonday7%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-10-15T11:06:25+08:00" />
<meta property="article:modified_time" content="2021-10-15T11:06:25+08:00" />

<meta itemprop="name" content="python,day7,并发编程">
<meta itemprop="description" content="并发编程。"><meta itemprop="datePublished" content="2021-10-15T11:06:25+08:00" />
<meta itemprop="dateModified" content="2021-10-15T11:06:25+08:00" />
<meta itemprop="wordCount" content="11086">
<meta itemprop="keywords" content="python," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="python,day7,并发编程"/>
<meta name="twitter:description" content="并发编程。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">主页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">类别</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">blog</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">主页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">类别</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">python,day7,并发编程</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-10-15 </span>
        <div class="post-category">
            <a href="/categories/python/"> python </a>
            </div>
          <span class="more-meta"> 11086 words </span>
          <span class="more-meta"> 23 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#并发编程day1">并发编程,day1</a>
          <ul>
            <li></li>
          </ul>
        </li>
        <li><a href="#并发编程day2">并发编程,day2</a>
          <ul>
            <li></li>
          </ul>
        </li>
        <li><a href="#并发编程day3">并发编程day3</a>
          <ul>
            <li></li>
          </ul>
        </li>
        <li><a href="#并发编程day4">并发编程day4</a>
          <ul>
            <li></li>
          </ul>
        </li>
        <li><a href="#并发编程day5">并发编程day5</a>
          <ul>
            <li></li>
          </ul>
        </li>
        <li><a href="#网络并发知识点梳理">网络并发知识点梳理</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>并发编程。</p>
<h2 id="并发编程day1">并发编程,day1</h2>
<h5 id="操作系统发展史">操作系统发展史</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">主要是围绕着cpu的利用率问题
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="多道技术">多道技术</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">单核实现并发的效果
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">并发：看起来像同时运行的就可以叫做并发
</span></span></span><span class="line"><span class="cl"><span class="s1">并行：真正意义上的同时运行
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">空间与时间上的复用
</span></span></span><span class="line"><span class="cl"><span class="s1">	空间上：
</span></span></span><span class="line"><span class="cl"><span class="s1">		多个程序共用一套计算机硬件
</span></span></span><span class="line"><span class="cl"><span class="s1">	时间上：
</span></span></span><span class="line"><span class="cl"><span class="s1">		切换+保存状态
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#切换分为两种</span>
</span></span><span class="line"><span class="cl"><span class="c1">#1、当一个程序遇到io操作，操作系统会立刻剥夺该程序的cpu执行权限（提供了cpu利用率且不影响程序执行效率）</span>
</span></span><span class="line"><span class="cl"><span class="c1">#2、当一个程序长时间占用cpu，操作系统也会立刻剥夺该程序cpu执行权限（降低了程序的运行效率，但是玩出了并发效果）</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="进程">进程</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">程序就是一堆死代码
</span></span></span><span class="line"><span class="cl"><span class="s1">进程则是正在执行的代码
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#进程调度算法</span>
</span></span><span class="line"><span class="cl"><span class="mi">1</span><span class="err">、</span><span class="n">先来先服务调度算法</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span><span class="err">、</span><span class="n">短作业优先调度算法</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span><span class="err">、</span><span class="n">时间片轮转法</span><span class="err">，</span><span class="n">多级反馈队列</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="程序运行的三种状态">程序运行的三种状态</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">就绪态：一切程序必须要先过就绪状态才能加入运行态
</span></span></span><span class="line"><span class="cl"><span class="s1">运行态：正在被cpu执行
</span></span></span><span class="line"><span class="cl"><span class="s1">阻塞态：程序遇到io操作了
</span></span></span><span class="line"><span class="cl"><span class="s1">理想：希望开发的程序一致处于就绪态与运行态
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="两对重要概念">两对重要概念</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">同步与异步</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;任务提交方式&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">同步</span><span class="err">：</span><span class="n">任务提交之后原地的等待任务的返回结果</span><span class="err">，</span><span class="n">期间不做任何事情</span>
</span></span><span class="line"><span class="cl"><span class="n">异步</span><span class="err">：</span><span class="n">任务提交之后不原地等待任务返回结果</span><span class="err">，</span><span class="n">直接执行下一行代码</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">阻塞非阻塞</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;程序运行状态&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">阻塞</span><span class="err">：</span><span class="n">阻塞态</span>
</span></span><span class="line"><span class="cl"><span class="n">非阻塞</span><span class="err">：</span><span class="n">就绪态</span><span class="err">，</span><span class="n">运行态</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="heading"></h4>
<h5 id="开启进程的两种方式">开启进程的两种方式</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">from mutiprocessing import Proces
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">1、实例化产生对象
</span></span></span><span class="line"><span class="cl"><span class="s1">2、类的继承，run方法
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">ps：
</span></span></span><span class="line"><span class="cl"><span class="s1">在windows里面开启进程代码一定要写在main代码块内
</span></span></span><span class="line"><span class="cl"><span class="s1">创建一个进程就是申请一个内存空间将代码丢进去
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">第一种方式</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span>
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">task</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> is running&#39;</span><span class="o">%</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> is over&#39;</span><span class="o">%</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1">#1、创建一个对象</span>
</span></span><span class="line"><span class="cl">            <span class="n">p</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">task</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;jason&#39;</span><span class="p">,))</span>
</span></span><span class="line"><span class="cl">            <span class="c1">#容器类型哪怕里面只有一个元素，建议要用逗号隔开</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">#2、开启进程</span>
</span></span><span class="line"><span class="cl">            <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>   <span class="c1">#告诉操作系统帮你创建一个进程</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;主&#39;</span><span class="p">)</span> <span class="c1">#代表程序执行完毕</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#第二种方式</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span>
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">class</span> <span class="nc">MyProcess</span><span class="p">(</span><span class="n">Process</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello bf girl&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;get out!&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">p</span> <span class="o">=</span> <span class="n">MyProcess</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;主&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="join方法">join方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">主进程等待子进程代码运行完毕后再往下执行代码
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="进程间数据是相互隔离的默认情况下">进程间数据是相互隔离的（默认情况下）</h5>
<h5 id="人工智能网站推荐">人工智能网站推荐</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">图灵机器人
</span></span><span class="line"><span class="cl">科大讯飞
</span></span><span class="line"><span class="cl">百度api
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="并发编程day2">并发编程,day2</h2>
<h5 id="进程对象及其他方法">进程对象及其他方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">一台计算机上面运行很多进程，计算机会给每一个进行的进程分配一个PID号
</span></span></span><span class="line"><span class="cl"><span class="s1">如何查看：
</span></span></span><span class="line"><span class="cl"><span class="s1">	windows电脑: tasklist |findstr 22
</span></span></span><span class="line"><span class="cl"><span class="s1">	linux：ps -aux
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span><span class="p">,</span><span class="n">current_process</span>
</span></span><span class="line"><span class="cl"><span class="n">current_process</span><span class="p">()</span><span class="o">.</span><span class="n">pid</span>	<span class="c1">#查看当前进程的进程号</span>
</span></span><span class="line"><span class="cl"><span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">()</span>		<span class="c1">#查看当前进程进程号</span>
</span></span><span class="line"><span class="cl"><span class="n">os</span><span class="o">.</span><span class="n">getppid</span><span class="p">()</span>	<span class="c1">#查看当前进程的父进程号</span>
</span></span><span class="line"><span class="cl"><span class="n">p</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>	<span class="c1">#杀死当前进程</span>
</span></span><span class="line"><span class="cl"><span class="n">p</span><span class="o">.</span><span class="n">is_alive</span><span class="p">()</span>	<span class="c1">#判断当前进程是否存活 True或者False</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="僵尸进程与孤儿进程了解">僵尸进程与孤儿进程(了解)</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#僵尸进程</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">死了但是没有死透
</span></span></span><span class="line"><span class="cl"><span class="s1">当你开设子进程后 该进程死后不会立刻释放占用的进程号
</span></span></span><span class="line"><span class="cl"><span class="s1">因为我要让父进程查看到他开设的子进程的一些基本信息 占用的pid号 运行时间等
</span></span></span><span class="line"><span class="cl"><span class="s1">所有的进程都会步入僵尸进程
</span></span></span><span class="line"><span class="cl"><span class="s1">	父进程不死并且在无限制的创建子进程也不结束
</span></span></span><span class="line"><span class="cl"><span class="s1">	回收子进程占用的pid号
</span></span></span><span class="line"><span class="cl"><span class="s1">		父进程等待子进程运行结束
</span></span></span><span class="line"><span class="cl"><span class="s1">		或者父进程调用join方法
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#孤儿进程</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">子进程存活，父进程意外死亡
</span></span></span><span class="line"><span class="cl"><span class="s1">操作系统会开设一个儿童福利院专门管理孤儿进程，回收相关资源
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="守护进程">守护进程</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#守护进程的主进程死了，守护进程则陪葬</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">tesk</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">	<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">总管正在活着&#39;</span><span class="o">%</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">总管正在死亡&#39;</span><span class="o">%</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>	
</span></span><span class="line"><span class="cl">	<span class="n">p</span> <span class="o">=</span> <span class="n">process</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="n">task</span><span class="p">,</span><span class="n">arg</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;egon&#39;</span><span class="p">,))</span>
</span></span><span class="line"><span class="cl">	<span class="n">p</span><span class="o">.</span><span class="n">deamon</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">	<span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;皇帝jason寿终正寝&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="互斥锁">互斥锁</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">多个进程操作同一份数据的时候</span><span class="err">，</span><span class="n">会出现数据</span> <span class="n">错乱问题</span>
</span></span><span class="line"><span class="cl"><span class="n">解决方法</span><span class="err">：</span><span class="n">加锁处理</span><span class="err">，</span><span class="n">将并发变成串行</span><span class="err">，</span><span class="n">牺牲效率</span><span class="err">，</span><span class="n">保证数据的安全</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">random</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span><span class="p">,</span><span class="n">Lock</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#文件操作读取票数</span>
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">dic</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;用户</span><span class="si">%s</span><span class="s1">查询余额&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">dic</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ticket_num&#39;</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">buy</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#先查票</span>
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">dic</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#模拟网络演示</span>
</span></span><span class="line"><span class="cl">    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#判断当前是否邮票</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">dic</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ticket_num&#39;</span><span class="p">)</span> <span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#修改数据库 买票</span>
</span></span><span class="line"><span class="cl">        <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;ticket_num&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#写入数据库</span>
</span></span><span class="line"><span class="cl">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">dic</span><span class="p">,</span><span class="n">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;用户</span><span class="si">%s</span><span class="s1">买票成功&#39;</span><span class="o">%</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;用户</span><span class="si">%s</span><span class="s1">买票失败&#39;</span><span class="o">%</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">mutex</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">search</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">mutex</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#给买票环节加锁</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#枪锁</span>
</span></span><span class="line"><span class="cl">    <span class="n">buy</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#释放锁</span>
</span></span><span class="line"><span class="cl">    <span class="n">mutex</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#在主进程中生成一把锁，让所有子进程抢，谁先抢到谁先买票</span>
</span></span><span class="line"><span class="cl">    <span class="n">mutex</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">p</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">run</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">mutex</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">扩展 行锁 表锁
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">注意：
</span></span></span><span class="line"><span class="cl"><span class="s1">	1、锁不要轻易使用，容易造成死锁现象
</span></span></span><span class="line"><span class="cl"><span class="s1">	2、锁旨在处理数据的部分加来保证数据安全
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="n">GIL全局解释器锁</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="队列介绍queue">队列介绍queue</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">队列Queue模块</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">管道：subprocess
</span></span></span><span class="line"><span class="cl"><span class="s1">	stdin	stdout stderr
</span></span></span><span class="line"><span class="cl"><span class="s1">队列：管道+锁
</span></span></span><span class="line"><span class="cl"><span class="s1">队列：先进先出
</span></span></span><span class="line"><span class="cl"><span class="s1">堆栈：先进后出
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">queue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#创建一个队列</span>
</span></span><span class="line"><span class="cl"><span class="n">q</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">Queue</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>   <span class="c1">#括号内可以传数字，表示生成队列最大可以同时存放的数据量</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#往队列中存数据</span>
</span></span><span class="line"><span class="cl"><span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">q</span><span class="o">.</span><span class="n">full</span><span class="p">())</span> <span class="c1">#判断当前队列是否满了</span>
</span></span><span class="line"><span class="cl"><span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># q.put(111)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#当队列数据放满了之后，如果还有数据要放，程序会阻塞，直到有位置让出来</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#去队列中取数据</span>
</span></span><span class="line"><span class="cl"><span class="n">v1</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">v2</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">v3</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">q</span><span class="o">.</span><span class="n">empty</span><span class="p">())</span>    <span class="c1">#判断当前队列是否为空</span>
</span></span><span class="line"><span class="cl"><span class="n">v4</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">v5</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">v6</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">get_nowait</span><span class="p">()</span> <span class="c1">#没有数据直接报错</span>
</span></span><span class="line"><span class="cl"><span class="c1"># v6 = q.get(timeout=3) #没有数据会原地等三秒，再报错</span>
</span></span><span class="line"><span class="cl"><span class="c1">#队列中如果已经没有数据的话，get方法会原地阻塞</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">q.full()
</span></span></span><span class="line"><span class="cl"><span class="s1">q.empty()
</span></span></span><span class="line"><span class="cl"><span class="s1">q.get_nowait()
</span></span></span><span class="line"><span class="cl"><span class="s1">再多进程的情况下是不精确
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="进程间通信ipc机制">进程间通信IPC机制</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Queue</span><span class="p">,</span><span class="n">Process</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">研究思路
</span></span></span><span class="line"><span class="cl"><span class="s1">    1、主进程更子进程借助队列通信
</span></span></span><span class="line"><span class="cl"><span class="s1">    2、子进程跟子进程借助队列通信
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">producet</span><span class="p">(</span><span class="n">q</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;我是1号技师 很高兴为您服务&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">consumer</span><span class="p">(</span><span class="n">q</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">q</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">q</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">producet</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">q</span><span class="p">,))</span>
</span></span><span class="line"><span class="cl">    <span class="n">p1</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">consumer</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">q</span><span class="p">,))</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">p1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="生产者消费者模型">生产者消费者模型</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">生产者：生产/制造东西的
</span></span></span><span class="line"><span class="cl"><span class="s1">消费者：消费/处理东西的
</span></span></span><span class="line"><span class="cl"><span class="s1">该模型除了上述两个之外还需要一个媒介
</span></span></span><span class="line"><span class="cl"><span class="s1">	生活中的例子，做包子的将包子做好后放在蒸笼（媒介）里面，，买包子的去蒸笼里面拿
</span></span></span><span class="line"><span class="cl"><span class="s1">	
</span></span></span><span class="line"><span class="cl"><span class="s1">生产者（做包子的）+消息队列（蒸笼）+消费者（吃包子的）
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Queue</span><span class="p">,</span><span class="n">Process</span><span class="p">,</span><span class="n">JoinableQueue</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">random</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">producet</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">food</span><span class="p">,</span><span class="n">q</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">生产了</span><span class="si">%s%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">food</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#模拟延迟</span>
</span></span><span class="line"><span class="cl">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#将数据放入队列中</span>
</span></span><span class="line"><span class="cl">        <span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">consumer</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">q</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 消费者胃口很大 光盘行动</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">food</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>  <span class="c1">#没有数据就会卡住</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#判断当前是否有结束的标识</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># if food is None:break</span>
</span></span><span class="line"><span class="cl">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">吃了</span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">food</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="n">q</span><span class="o">.</span><span class="n">task_done</span><span class="p">()</span>   <span class="c1">#告诉队列你已经从里面取出一个数据并处理完毕了</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">q</span> <span class="o">=</span> <span class="n">JoinableQueue</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">p1</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">producet</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;大厨&#39;</span><span class="p">,</span><span class="s1">&#39;包子&#39;</span><span class="p">,</span><span class="n">q</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">p2</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">producet</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;马叉虫tank&#39;</span><span class="p">,</span><span class="s1">&#39;泔水&#39;</span><span class="p">,</span><span class="n">q</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">c1</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">consumer</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;春哥&#39;</span><span class="p">,</span><span class="n">q</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">c2</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">consumer</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;马哥&#39;</span><span class="p">,</span> <span class="n">q</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">p1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">p2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">c1</span><span class="o">.</span><span class="n">daemon</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">    <span class="n">c2</span><span class="o">.</span><span class="n">daemon</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">    <span class="n">c1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">c2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">p1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">p2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#等待生产者生产完毕之后，往队列中添加特定的结束符号</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># q.put(None) #肯定再所有生产者生产数据的末尾</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># q.put(None)</span>
</span></span><span class="line"><span class="cl">    <span class="n">q</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>    <span class="c1">#等待列队中所有数据被取玩，再往下执行代码</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">JoinableQueue 每当队列存入数据，内部会有一个计时器+1
</span></span></span><span class="line"><span class="cl"><span class="s1">每当你调用task_done的时候 计数器-1
</span></span></span><span class="line"><span class="cl"><span class="s1">q.join() 当计数器为0的时候 才往后运行
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#只要q.join执行完毕，说明消费之已经处理玩数据，消费者就没有存在的必要了</span>
</span></span><span class="line"><span class="cl"><span class="c1">#可以通过守护进程来处理</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="线程相关知识点">线程相关知识点</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="mi">1</span><span class="err">、</span><span class="n">什么是线程</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">进程：资源单位
</span></span></span><span class="line"><span class="cl"><span class="s1">线程：执行单位
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">将操作系统比喻成一个大的工程
</span></span></span><span class="line"><span class="cl"><span class="s1">那么进程就相当于工厂里面的车间
</span></span></span><span class="line"><span class="cl"><span class="s1">而线程就是车间里面的流水线
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">每一个进程肯定自带一个线程
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">再次总结：
</span></span></span><span class="line"><span class="cl"><span class="s1">	进程：资源单位，起一个进程仅仅只是在内存空间中开辟一块独立的空间
</span></span></span><span class="line"><span class="cl"><span class="s1">	线程：执行单位，真正被cpu执行的起始是进程里面的线程，线程指的是代码的执行过程，代码中需要使用到的资源都找所再的进程索要
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">进程和线程都是虚拟单位，只是为了让我们方便的描述问题
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mi">2</span><span class="err">、</span><span class="n">为何要有线程</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">开设进程
</span></span></span><span class="line"><span class="cl"><span class="s1">	1、申请内存空间 耗资源
</span></span></span><span class="line"><span class="cl"><span class="s1">	2、&#39;拷贝代码&#39;  耗资源
</span></span></span><span class="line"><span class="cl"><span class="s1">开线程：
</span></span></span><span class="line"><span class="cl"><span class="s1">	一个进程内可以开设多个线程，在用一个进程内开设多个线程时无须再次申请内存空间及拷贝代码的操作
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">总结：
</span></span></span><span class="line"><span class="cl"><span class="s1">	开设线程的开销远远小于进程的开销
</span></span></span><span class="line"><span class="cl"><span class="s1">	同一个进程下的多个线程数据是共享的
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">例子：
</span></span></span><span class="line"><span class="cl"><span class="s1">	我们开发一款文本编辑器
</span></span></span><span class="line"><span class="cl"><span class="s1">		获取用户输入功能
</span></span></span><span class="line"><span class="cl"><span class="s1">		实时展示到屏幕功能
</span></span></span><span class="line"><span class="cl"><span class="s1">		自动保存在硬盘的功能
</span></span></span><span class="line"><span class="cl"><span class="s1">	正对以上三个功能，开设进程合适还是线程合适？
</span></span></span><span class="line"><span class="cl"><span class="s1">	开三个线程处理上面的三个功能更加合理
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="heading-1"></h5>
<h2 id="并发编程day3">并发编程day3</h2>
<h5 id="开启线程的两种方式">开启线程的两种方式</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">开进程和开线程的步骤基本都是一样的，只是导入模块不一样
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">类的对象调用方法
</span></span><span class="line"><span class="cl">类的继承重写run方法
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">第一种方法：
</span></span><span class="line"><span class="cl">        from multiprocessing import Process
</span></span><span class="line"><span class="cl">        from threading import  Thread
</span></span><span class="line"><span class="cl">        import time
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        def task(name):
</span></span><span class="line"><span class="cl">            print(&#39;%s is running&#39;%name)
</span></span><span class="line"><span class="cl">            time.sleep(1)
</span></span><span class="line"><span class="cl">            print(&#39;%s is over&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        #开启线程不需要在main下执行代码，直接书写就可以
</span></span><span class="line"><span class="cl">        #但是我们还是习惯性的将启动命令卸载main下面
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        t = Thread(target=task(),args=(&#39;egon&#39;,))
</span></span><span class="line"><span class="cl">        t.start()   #创建线程的开销非常小，创建的非常快
</span></span><span class="line"><span class="cl">        print(&#39;主&#39;)
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">第二种方法：
</span></span><span class="line"><span class="cl">        from multiprocessing import Process
</span></span><span class="line"><span class="cl">        from threading import  Thread
</span></span><span class="line"><span class="cl">        import time
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        class Mythead(Thread):
</span></span><span class="line"><span class="cl">            def __init__(self,name):
</span></span><span class="line"><span class="cl">                &#39;&#39;&#39;针对给类里面的参数传参需定义一个init方法&#39;&#39;&#39;
</span></span><span class="line"><span class="cl">                #重写了别人的方法 又不知道别人的方法里有啥 就调用父类的方法
</span></span><span class="line"><span class="cl">                super().__init__()
</span></span><span class="line"><span class="cl">                self.name = name
</span></span><span class="line"><span class="cl">            def run(self) -&gt; None:
</span></span><span class="line"><span class="cl">                print(&#39;%s is running&#39;%self.name)
</span></span><span class="line"><span class="cl">                time.sleep(1)
</span></span><span class="line"><span class="cl">                print(&#39;egon&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        #开启线程不需要在main下执行代码，直接书写就可以
</span></span><span class="line"><span class="cl">        #但是我们还是习惯性的将启动命令卸载main下面
</span></span><span class="line"><span class="cl">        if __name__ == &#39;__main__&#39;:
</span></span><span class="line"><span class="cl">            t = Mythead
</span></span><span class="line"><span class="cl">            t.start()
</span></span><span class="line"><span class="cl">            print(&#39;主&#39;)
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="tcp服务端实现并发的效果">TCP服务端实现并发的效果</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">服务端：
</span></span><span class="line"><span class="cl">        import socket
</span></span><span class="line"><span class="cl">        from threading import Thread
</span></span><span class="line"><span class="cl">        from multiprocessing import Process
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        def talk(conn):
</span></span><span class="line"><span class="cl">            # 通信循环
</span></span><span class="line"><span class="cl">            while True:
</span></span><span class="line"><span class="cl">                try:
</span></span><span class="line"><span class="cl">                    data = conn.recv(1024)
</span></span><span class="line"><span class="cl">                    if len(data) == 0: break
</span></span><span class="line"><span class="cl">                    print(data.decode(&#39;utf-8&#39;))
</span></span><span class="line"><span class="cl">                    conn.send(data.upper())
</span></span><span class="line"><span class="cl">                except ConnectionResetError as e:
</span></span><span class="line"><span class="cl">                    print(e)
</span></span><span class="line"><span class="cl">                    break
</span></span><span class="line"><span class="cl">            conn.close()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        # 连接循环
</span></span><span class="line"><span class="cl">        def server(ip, port):
</span></span><span class="line"><span class="cl">            server = socket.socket()  # 括号不加参数默认TCP
</span></span><span class="line"><span class="cl">            server.bind((&#39;127.0.0.1&#39;, 8081))
</span></span><span class="line"><span class="cl">            server.listen(5)
</span></span><span class="line"><span class="cl">            while True:
</span></span><span class="line"><span class="cl">                conn, addr = server.accept()
</span></span><span class="line"><span class="cl">                t = Thread(target=talk, args=(conn,))
</span></span><span class="line"><span class="cl">                # t = Process(target=talk, args=(conn,))     #开启进程
</span></span><span class="line"><span class="cl">                t.start()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        if __name__ == &#39;__main__&#39;:
</span></span><span class="line"><span class="cl">            s = Thread(target=server, args=(&#39;127.0.0.1&#39;, 8080))
</span></span><span class="line"><span class="cl">    s.start()
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">客户端：
</span></span><span class="line"><span class="cl">		import socket
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        client = socket.socket()
</span></span><span class="line"><span class="cl">        client.connect((&#39;127.0.0.1&#39;,8081))
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        while True:
</span></span><span class="line"><span class="cl">            client.send(b&#39;hello world&#39;)
</span></span><span class="line"><span class="cl">            data = client.recv(1024)
</span></span><span class="line"><span class="cl">            print(data.decode(&#39;utf-8&#39;))
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="线程对象的join方法">线程对象的join方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">import ntpath
</span></span><span class="line"><span class="cl">import stat
</span></span><span class="line"><span class="cl">from threading import Thread
</span></span><span class="line"><span class="cl">import time
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def task(name):
</span></span><span class="line"><span class="cl">    print(&#39;&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">if __name__ == &#39;__main__&#39;:
</span></span><span class="line"><span class="cl">    p = Thread(target=task, args=(&#39;engon&#39;,))
</span></span><span class="line"><span class="cl">    p.start()
</span></span><span class="line"><span class="cl">    p.join()    #主线程等待子进程结束后执行
</span></span><span class="line"><span class="cl">    print(&#39;主&#39;)
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="线程间数据共享">线程间数据共享</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">import ntpath
</span></span><span class="line"><span class="cl">import stat
</span></span><span class="line"><span class="cl">from threading import Thread
</span></span><span class="line"><span class="cl">import time
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">money = 100
</span></span><span class="line"><span class="cl">def task():
</span></span><span class="line"><span class="cl">    global money
</span></span><span class="line"><span class="cl">    money  = 666
</span></span><span class="line"><span class="cl">    print(money)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">if __name__ == &#39;__main__&#39;:
</span></span><span class="line"><span class="cl">    t = Thread(target=task,)
</span></span><span class="line"><span class="cl">    t.start()
</span></span><span class="line"><span class="cl">    t.join()
</span></span><span class="line"><span class="cl">    print(money)
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="线程对象属性及其他方法">线程对象属性及其他方法</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">from threading import Thread,active_count,current_thread
</span></span><span class="line"><span class="cl">import os,time
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def task():
</span></span><span class="line"><span class="cl">    # print(&#39;hello&#39;,os.getpid())
</span></span><span class="line"><span class="cl">    print(&#39;hello&#39;,current_thread().name)    #子线程的名字
</span></span><span class="line"><span class="cl">    time.sleep(1)
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">if __name__ == &#39;__main__&#39;:
</span></span><span class="line"><span class="cl">    t = Thread(target=task)
</span></span><span class="line"><span class="cl">    t1 = Thread(target=task)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    t.start()
</span></span><span class="line"><span class="cl">    t1.start()
</span></span><span class="line"><span class="cl">    # print(&#39;主&#39;,os.getpid())
</span></span><span class="line"><span class="cl">    # print(&#39;主&#39;, current_thread().name)   #主线程的名字
</span></span><span class="line"><span class="cl">    print(&#39;主&#39;, active_count())  #统计当前正在活跃的线程数
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="守护线程">守护线程</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">from threading import Thread
</span></span><span class="line"><span class="cl">import time
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def task(name):
</span></span><span class="line"><span class="cl">    print(&#39;%s is running&#39;%name)
</span></span><span class="line"><span class="cl">    time.sleep(1)
</span></span><span class="line"><span class="cl">    print(&#39;%s is over&#39;%name)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">if __name__ == &#39;__main__&#39;:
</span></span><span class="line"><span class="cl">    t = Thread(target=task,args=(&#39;hongwei&#39;,))
</span></span><span class="line"><span class="cl">    t.daemon = True
</span></span><span class="line"><span class="cl">    t.start()
</span></span><span class="line"><span class="cl">    print(&#39;主&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#39;&#39;&#39;
</span></span><span class="line"><span class="cl">主线程运行结束之后不会立刻结束，会等待其他非守护线程结束才结束
</span></span><span class="line"><span class="cl">应为主线程的结束意味着所在的进程的结束
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#39;&#39;&#39;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">例子（思考打印顺序）：
</span></span><span class="line"><span class="cl">from threading import Thread
</span></span><span class="line"><span class="cl">import time
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def foo():
</span></span><span class="line"><span class="cl">    print(123)
</span></span><span class="line"><span class="cl">    time.sleep(1)
</span></span><span class="line"><span class="cl">    print(&#39;end123&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def func():
</span></span><span class="line"><span class="cl">    print(456)
</span></span><span class="line"><span class="cl">    time.sleep(3)
</span></span><span class="line"><span class="cl">    print(&#39;end456&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">if __name__ == &#39;__main__&#39;:
</span></span><span class="line"><span class="cl">    t1 = Thread(target=foo)
</span></span><span class="line"><span class="cl">    t2 = Thread(target=func)
</span></span><span class="line"><span class="cl">    t1.daemon = True
</span></span><span class="line"><span class="cl">    t1.start()
</span></span><span class="line"><span class="cl">    t2.start()
</span></span><span class="line"><span class="cl">    print(&#39;主&#39;)
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="线程互斥锁">线程互斥锁</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">from threading import Thread
</span></span><span class="line"><span class="cl">from multiprocessing import Lock
</span></span><span class="line"><span class="cl">import time
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">mutex = Lock()
</span></span><span class="line"><span class="cl">money = 100
</span></span><span class="line"><span class="cl">def task():
</span></span><span class="line"><span class="cl">    global money
</span></span><span class="line"><span class="cl">    mutex.acquire() #加锁
</span></span><span class="line"><span class="cl">    tmp = money
</span></span><span class="line"><span class="cl">    time.sleep(0.1)
</span></span><span class="line"><span class="cl">    money = tmp - 1
</span></span><span class="line"><span class="cl">    mutex.release() #解锁
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">if __name__ == &#39;__main__&#39;:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    t_list = []
</span></span><span class="line"><span class="cl">    for i in range(20):
</span></span><span class="line"><span class="cl">        t = Thread(target=task)
</span></span><span class="line"><span class="cl">        t.start()
</span></span><span class="line"><span class="cl">        t_list.append(t)
</span></span><span class="line"><span class="cl">    for t in t_list:
</span></span><span class="line"><span class="cl">        t.join()
</span></span><span class="line"><span class="cl">    print(money)
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="gil全局解释器锁">GIL全局解释器锁</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Ps:博客园密码：xiaoyuanqujing@666
</span></span><span class="line"><span class="cl">&#39;&#39;&#39;
</span></span><span class="line"><span class="cl">python解释器起始有多个版本
</span></span><span class="line"><span class="cl">	Cpython
</span></span><span class="line"><span class="cl">	Jpython
</span></span><span class="line"><span class="cl">	pypypython
</span></span><span class="line"><span class="cl">但是普遍使用的都是Cpython解释器
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">在Cpython解释器中GIL是一把互斥锁，用来阻止同一个进程下的多线程的同时执行
</span></span><span class="line"><span class="cl">	同一个进程下的多个线程无法利用多核又是！！！
</span></span><span class="line"><span class="cl">	疑问：python的多线程是不是一点用都没有，无法利用多核优势
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">应为cpython中的内存管理不是线程安全的
</span></span><span class="line"><span class="cl">内存管理（垃圾回收机制）
</span></span><span class="line"><span class="cl">1、应用计数：当一个在内存中的值身上有应用的时候，应用计数加一，销毁的时候，应用技术减一
</span></span><span class="line"><span class="cl">2、标记清楚：当程序在运行的时候发现内存占的空间大，会自动停止当前程序的运行，然后自动扫描当前程序所占用的所有变量名的应用计数，把应用技术为0的进行一个标记，然后一次性将其清楚释放内存
</span></span><span class="line"><span class="cl">3、分代回收：为了减少垃圾回收消耗的资源
</span></span><span class="line"><span class="cl">&#39;&#39;&#39;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#39;&#39;&#39;
</span></span><span class="line"><span class="cl">重点：
</span></span><span class="line"><span class="cl">	1、GIL不是python的特点而是Cpython解释器的特点
</span></span><span class="line"><span class="cl">	2、GIL是保证解释器级别的数据的安全
</span></span><span class="line"><span class="cl">	3、GIL会导致同一个进程下的多个线程的无法同时执行
</span></span><span class="line"><span class="cl">	4、针对不同的数据还是需要加不同的锁处理
</span></span><span class="line"><span class="cl">    5、解释型语言的通病：同一个进程多个线程无法利用多核优势
</span></span><span class="line"><span class="cl">&#39;&#39;&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="gil与普通互斥锁的区别">GIL与普通互斥锁的区别</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">import time
</span></span><span class="line"><span class="cl">from threading import  Thread,Lock
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">mutex = Lock()
</span></span><span class="line"><span class="cl">money = 100
</span></span><span class="line"><span class="cl">def task():
</span></span><span class="line"><span class="cl">    global  money
</span></span><span class="line"><span class="cl">    mutex.acquire() #上锁
</span></span><span class="line"><span class="cl">    tmp = money
</span></span><span class="line"><span class="cl">    time.sleep(0.1) #睡一下会释放GIL锁
</span></span><span class="line"><span class="cl">    money = tmp - 1
</span></span><span class="line"><span class="cl">    mutex.release()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">if __name__ == &#39;__main__&#39;:
</span></span><span class="line"><span class="cl">    t_list = []
</span></span><span class="line"><span class="cl">    for i in range(100):
</span></span><span class="line"><span class="cl">        t = Thread(target=task)
</span></span><span class="line"><span class="cl">        t.start()
</span></span><span class="line"><span class="cl">        t_list.append(t)
</span></span><span class="line"><span class="cl">    for t in t_list:
</span></span><span class="line"><span class="cl">        t.join()
</span></span><span class="line"><span class="cl">    print(money)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#39;&#39;&#39;
</span></span><span class="line"><span class="cl">100个线程骑起来之后 要先去抢GIL
</span></span><span class="line"><span class="cl">我进入io GIL会自动释放，但我手上还有一个自己的互斥锁
</span></span><span class="line"><span class="cl">其他线程虽然抢到了GIL但是抢不到互斥锁
</span></span><span class="line"><span class="cl">最终GIL还是回到你的手上，你再去操作数据
</span></span><span class="line"><span class="cl">&#39;&#39;&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="同一个进程下的多线程无法利用多核又是是不是就没有用了">同一个进程下的多线程无法利用多核又是，是不是就没有用了</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">多线程是否有用要看具体情况
</span></span></span><span class="line"><span class="cl"><span class="s1">单核：四个任务（IO密集型\计算密集型）
</span></span></span><span class="line"><span class="cl"><span class="s1">多核：四个任务（IO密集型\计算密集型）
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#计算密集型	每个任务都需要10s	</span>
</span></span><span class="line"><span class="cl"><span class="n">单核</span><span class="err">（</span><span class="n">不用考虑</span><span class="err">，</span><span class="n">现在都是多核</span><span class="err">）：</span>
</span></span><span class="line"><span class="cl">  <span class="n">多进程</span><span class="err">：</span><span class="n">额外的消耗资源</span>
</span></span><span class="line"><span class="cl">  <span class="n">多线程</span><span class="err">：</span><span class="n">减少开销</span>
</span></span><span class="line"><span class="cl"><span class="n">多核</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">  <span class="n">多进程</span><span class="err">：</span><span class="n">假设4个任务</span><span class="err">，</span><span class="n">四个cpu同时帮忙算</span><span class="err">，</span><span class="n">总耗时10s</span><span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="n">多线程</span><span class="err">：</span><span class="n">总耗时</span> <span class="mi">40</span><span class="n">s</span><span class="o">+</span> <span class="err">（</span><span class="n">一个进程下多线程无法利用多核优势</span><span class="err">）</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#IO密集型	每个任务都需要10s，cpu基本不工作了，只是来回切换，线程和进程都无法利用多核优势</span>
</span></span><span class="line"><span class="cl"><span class="n">多核</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">	<span class="n">多进程</span><span class="err">：</span><span class="n">相对浪费资源</span>
</span></span><span class="line"><span class="cl">    <span class="n">多线程</span><span class="err">：</span><span class="n">更加节省资源</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">计算密集型举例</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#计算密集型</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span>
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">os</span><span class="o">,</span><span class="nn">time</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">work</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="n">res</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100000</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">res</span> <span class="o">*=</span> <span class="n">i</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">())</span>   <span class="c1">#获取当前计算机CPU个数</span>
</span></span><span class="line"><span class="cl">            <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">p</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">work</span><span class="p">)</span>    <span class="c1">#5.4251203536987305</span>
</span></span><span class="line"><span class="cl">                <span class="n">t</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">work</span><span class="p">)</span>     <span class="c1">#10.328745126724243</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># p.start()</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># l.append(p)</span>
</span></span><span class="line"><span class="cl">                <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">start_time</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#多进程胜出</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">IO密集型距离</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#IO密集型</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span>
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">os</span><span class="o">,</span><span class="nn">time</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">work</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">())</span>   <span class="c1">#获取当前计算机CPU个数</span>
</span></span><span class="line"><span class="cl">            <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">40</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">p</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">work</span><span class="p">)</span>    <span class="c1">#2.947589159011841</span>
</span></span><span class="line"><span class="cl">                <span class="n">t</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">work</span><span class="p">)</span>     <span class="c1">#2.0187268257141113</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># p.start()</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># l.append(p)</span>
</span></span><span class="line"><span class="cl">                <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">start_time</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">#多线程胜出</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="n">总结</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">多进程和多线程都有各自的优势，我们通常可以再多进程下面开设多线程，这样既可以利用多核，也可以减少资源消耗
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="并发编程day4">并发编程day4</h2>
<h5 id="死锁与递归锁了解">死锁与递归锁（了解）</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">锁的使用 枪锁必须要释放锁，其实再操作锁的时候也极容易产生死锁现象（整个程序卡死 阻塞）
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">死锁：
</span></span><span class="line"><span class="cl">        线程1抢到func2的B锁，睡两秒，再回来抢A锁，发现A锁被线程2抢走，还未释放，线程2抢完A锁后接着抢B锁，发现B锁被线程1抢走，这样就造成死锁现象
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        from threading import Thread, Lock
</span></span><span class="line"><span class="cl">        import time
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        mutexA = Lock()
</span></span><span class="line"><span class="cl">        mutexB = Lock()
</span></span><span class="line"><span class="cl">        #类只要加括号多次，产生的肯定是不同的对象
</span></span><span class="line"><span class="cl">        #如果想实现多次加括号得到的是相同的对象，单例模式
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        class MyThead(Thread):
</span></span><span class="line"><span class="cl">            def run(self):
</span></span><span class="line"><span class="cl">                self.func1()
</span></span><span class="line"><span class="cl">                self.func2()
</span></span><span class="line"><span class="cl">            def func1(self):
</span></span><span class="line"><span class="cl">                mutexA.acquire()
</span></span><span class="line"><span class="cl">                print(&#39;%s 抢到A锁&#39;%self.name)  #获取当前线程名
</span></span><span class="line"><span class="cl">                mutexB.acquire()
</span></span><span class="line"><span class="cl">                print(&#39;%s 抢到b锁&#39;%self.name)
</span></span><span class="line"><span class="cl">                mutexB.release()
</span></span><span class="line"><span class="cl">                mutexA.release()
</span></span><span class="line"><span class="cl">            def func2(self):
</span></span><span class="line"><span class="cl">                mutexB.acquire()
</span></span><span class="line"><span class="cl">                print(&#39;%s 抢到b锁&#39;%self.name)
</span></span><span class="line"><span class="cl">                time.sleep(2)
</span></span><span class="line"><span class="cl">                mutexA.acquire()
</span></span><span class="line"><span class="cl">                print(&#39;%s 抢到A锁&#39;%self.name)
</span></span><span class="line"><span class="cl">                mutexA.release()
</span></span><span class="line"><span class="cl">                mutexB.release()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        if __name__ == &#39;__main__&#39;:
</span></span><span class="line"><span class="cl">            for i in range(10):
</span></span><span class="line"><span class="cl">                t = MyThead()
</span></span><span class="line"><span class="cl">                t.start()
</span></span><span class="line"><span class="cl">递归锁：
</span></span><span class="line"><span class="cl">	可以被连续的acquire和release
</span></span><span class="line"><span class="cl">	但是只能被第一个抢这把锁执行上述操作
</span></span><span class="line"><span class="cl">	它的内部有一个计数器 每acquire一次 计数器加一 每一次realse一次 计数减一，只要计数不为0 那么其他人都无法抢到该锁
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">示例：
</span></span><span class="line"><span class="cl">#将上述的
</span></span><span class="line"><span class="cl">mutexA = Lock()
</span></span><span class="line"><span class="cl">mutexB = Lock()
</span></span><span class="line"><span class="cl">#换成
</span></span><span class="line"><span class="cl">mutexA = mutexB = RLock()
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="信号量了解">信号量（了解）</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">信号量在不同阶段可能对应不同技术点
</span></span><span class="line"><span class="cl">在并发编程中，信号量指的是锁
</span></span><span class="line"><span class="cl">&#39;&#39;&#39;
</span></span><span class="line"><span class="cl">如果我们将互斥锁比喻成一个厕所的话
</span></span><span class="line"><span class="cl">那么信号量就相当于多个厕所
</span></span><span class="line"><span class="cl">&#39;&#39;&#39;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">from threading import Thread, Semaphore
</span></span><span class="line"><span class="cl">import time
</span></span><span class="line"><span class="cl">import random
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sm = Semaphore(5)  # 括号内写数字，写几就表示开设几个坑位
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def task(name):
</span></span><span class="line"><span class="cl">    sm.acquire()
</span></span><span class="line"><span class="cl">    print(&#39;%s 正在蹲坑&#39; % name)
</span></span><span class="line"><span class="cl">    # time.sleep(3)
</span></span><span class="line"><span class="cl">    time.sleep(random.randint(1, 3))
</span></span><span class="line"><span class="cl">    sm.release()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">if __name__ == &#39;__main__&#39;:
</span></span><span class="line"><span class="cl">    for i in range(20):
</span></span><span class="line"><span class="cl">        t = Thread(target=task, args=(&#39;伞兵%s号&#39; %i, ))
</span></span><span class="line"><span class="cl">        t.start()
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="event事件了解">Event事件（了解）</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">一些进程/线程 需要等待另一些进程/线程 运行完毕之后才能运行，类似于发射信号一样
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">from threading import Thread, Event
</span></span><span class="line"><span class="cl">import time
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">event = Event()  # 造了一个红绿灯
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def light():
</span></span><span class="line"><span class="cl">    print(&#39;红灯亮着的&#39;)
</span></span><span class="line"><span class="cl">    time.sleep(3)
</span></span><span class="line"><span class="cl">    print(&#39;绿灯亮了&#39;)
</span></span><span class="line"><span class="cl">    # 告诉等待红灯的人可以走了
</span></span><span class="line"><span class="cl">    event.set()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def car(name):
</span></span><span class="line"><span class="cl">    print(&#39;%s 车正在等红灯&#39; % name)
</span></span><span class="line"><span class="cl">    event.wait()  # 等待别人给你发消息
</span></span><span class="line"><span class="cl">    print(&#39;%s 车加油门飙车走了&#39; % name)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">if __name__ == &#39;__main__&#39;:
</span></span><span class="line"><span class="cl">    t = Thread(target=light)
</span></span><span class="line"><span class="cl">    t.start()
</span></span><span class="line"><span class="cl">    for i in range(20):
</span></span><span class="line"><span class="cl">        t = Thread(target=car, args=(&#39;%s&#39; % i, ))
</span></span><span class="line"><span class="cl">        t.start()
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="各种队列了解">各种队列（了解）</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">同一个进程下多个线程数据是共享的
</span></span><span class="line"><span class="cl">为什么在同一个进程下还会使用队列呢？
</span></span><span class="line"><span class="cl">应为队列是：（多个线程在操作同一份数据的时候会导致数据不安全）
</span></span><span class="line"><span class="cl">    管道 + 锁
</span></span><span class="line"><span class="cl">所以用队列还是为了保证数据的安全
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl"># 我们现在使用的队列都是只能在本地测试使用
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 1、先进先出queue
</span></span><span class="line"><span class="cl">        # import queue
</span></span><span class="line"><span class="cl">        # q = queue.Queue(3)
</span></span><span class="line"><span class="cl">        # q.put(1)
</span></span><span class="line"><span class="cl">        # q.get()
</span></span><span class="line"><span class="cl">        # q.get_nowait()
</span></span><span class="line"><span class="cl">        # q.get(timeout=3)
</span></span><span class="line"><span class="cl">        # q.full()
</span></span><span class="line"><span class="cl">        # q.empty()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 2、后进先出LifoQueue
</span></span><span class="line"><span class="cl">        # import queue
</span></span><span class="line"><span class="cl">        #
</span></span><span class="line"><span class="cl">        # q = queue.LifoQueue()
</span></span><span class="line"><span class="cl">        # q.put(1)
</span></span><span class="line"><span class="cl">        # q.put(2)
</span></span><span class="line"><span class="cl">        # q.put(3)
</span></span><span class="line"><span class="cl">        # print(q.get())  #3
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 3、优先级PriorityQueue    可以给放入队列中的数据设置进出优先级
</span></span><span class="line"><span class="cl">        import queue
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        q = queue.PriorityQueue(3)
</span></span><span class="line"><span class="cl">        q.put((10, &#39;111&#39;))
</span></span><span class="line"><span class="cl">        q.put((11, &#39;222&#39;))
</span></span><span class="line"><span class="cl">        q.put((-1, &#39;333&#39;))
</span></span><span class="line"><span class="cl">        print(q.get())
</span></span><span class="line"><span class="cl">        # put括号内放一个元组 第一个放的数字表示优先级
</span></span><span class="line"><span class="cl">        # 数字越小优先级越高
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="进程池与线程池掌握">进程池与线程池（掌握）</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">线程池：
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        回顾之前TCP并发是通过每来一个人就开设一个进程或者线程去处理
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        无论开设进程也好，还是开设线程也好 都是需要消耗资源
</span></span><span class="line"><span class="cl">        只不过开设线程比开设进程的稍微小一点而已
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        我们是不可能做到无限制的开设进程和线程的 因为计算机硬件的资源更不上！！
</span></span><span class="line"><span class="cl">        硬件开发的速度远远赶不上软件
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        我们的宗旨是在保证计算机硬件能正常工作的情况下最大限度利用它
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        # 池的概念
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        什么是池？
</span></span><span class="line"><span class="cl">            池是用来保证计算机硬件安全的情况下最大限度的利用计算机
</span></span><span class="line"><span class="cl">            他降低了程序的运行效率但保证了计算机硬件的安全，从而让写的程序正常运行
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        # 基本使用：
</span></span><span class="line"><span class="cl">        from concurrent.futures import ThreadPoolExecutor, ProcessPoolExecutor
</span></span><span class="line"><span class="cl">        import time
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        pool = ThreadPoolExecutor()
</span></span><span class="line"><span class="cl">        # 括号内可以传数字 不传的花默认会开设当前计算机cpu个数五倍的线程
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        池子造出来之后 里面会固定存五个线程
</span></span><span class="line"><span class="cl">        这五个线程不会出现重复创建和销毁
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        池子的使用：
</span></span><span class="line"><span class="cl">        只需要将做的任务往池子中提交就好，自动会有人来服务
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        def task(n):
</span></span><span class="line"><span class="cl">            print(n)
</span></span><span class="line"><span class="cl">            time.sleep(0.5)
</span></span><span class="line"><span class="cl">            return &#39;asd&#39;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        任务的提交方式
</span></span><span class="line"><span class="cl">            同步：提交之后等待返回结果在往下执行
</span></span><span class="line"><span class="cl">            异步：提交之后不等待返回结果，执行完直接往下执行
</span></span><span class="line"><span class="cl">                如何获取返回结果？
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        # pool.submit(task, 1)    # 朝池子中提交任务 异步提交
</span></span><span class="line"><span class="cl">        # print(&#39;主&#39;)
</span></span><span class="line"><span class="cl">        t_list = []
</span></span><span class="line"><span class="cl">        for i in range(20):  # 朝池子中提交20个任务
</span></span><span class="line"><span class="cl">            res = pool.submit(task, i)  # &lt;Future at 0x1fb8c2510a0 state=pending&gt;
</span></span><span class="line"><span class="cl">            # print(res)
</span></span><span class="line"><span class="cl">            # print(res.result())  # result方法：1、同步提交类似join 2、打印返回task的结果
</span></span><span class="line"><span class="cl">            t_list.append(res)
</span></span><span class="line"><span class="cl">        # 等待线程池中所有任务执行完毕之后再继续往下执行
</span></span><span class="line"><span class="cl">        pool.shutdown()  # 关闭线程池  等待线程池中所有的任务运行完毕
</span></span><span class="line"><span class="cl">        for t in t_list:
</span></span><span class="line"><span class="cl">            print(&#39;&gt;&gt;&gt;:&#39;, t.result())  # 结果是有序的
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">进程池：
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        # 基本使用：
</span></span><span class="line"><span class="cl">        from concurrent.futures import ThreadPoolExecutor, ProcessPoolExecutor
</span></span><span class="line"><span class="cl">        import time
</span></span><span class="line"><span class="cl">        import os
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        pool = ProcessPoolExecutor()
</span></span><span class="line"><span class="cl">        # 括号内可以传数字 不传的花默认会开设当前计算机cpu个数进程
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        池子造出来之后 里面会固定存五个进程
</span></span><span class="line"><span class="cl">        这五个进程不会出现重复创建和销毁
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        池子的使用：
</span></span><span class="line"><span class="cl">        只需要将做的任务往池子中提交就好，自动会有人来服务
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        def task(n):
</span></span><span class="line"><span class="cl">            print(n, os.getpid())
</span></span><span class="line"><span class="cl">            time.sleep(0.5)
</span></span><span class="line"><span class="cl">            return &#39;asd&#39;
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">        def call_back(n):
</span></span><span class="line"><span class="cl">            print(&#39;call_back&#39;, n.result())
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        任务的提交方式
</span></span><span class="line"><span class="cl">            同步：提交之后等待返回结果在往下执行
</span></span><span class="line"><span class="cl">            异步：提交之后不等待返回结果，执行完直接往下执行
</span></span><span class="line"><span class="cl">                如何获取返回结果？
</span></span><span class="line"><span class="cl">                异步提交任务返回结果 应该通过回调机制来获取
</span></span><span class="line"><span class="cl">                回调机制
</span></span><span class="line"><span class="cl">                    就相当于给每个异步任务绑定了一个定时炸弹
</span></span><span class="line"><span class="cl">                    一旦该任务有结果立刻触发爆炸
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        if __name__ == &#39;__main__&#39;:
</span></span><span class="line"><span class="cl">            # pool.submit(task, 1)    # 朝池子中提交任务 异步提交
</span></span><span class="line"><span class="cl">            # print(&#39;主&#39;)
</span></span><span class="line"><span class="cl">            t_list = []
</span></span><span class="line"><span class="cl">            for i in range(20):  # 朝池子中提交20个任务
</span></span><span class="line"><span class="cl">                res = pool.submit(task, i).add_done_callback(call_back)
</span></span><span class="line"><span class="cl">                t_list.append(res)
</span></span><span class="line"><span class="cl">                
</span></span><span class="line"><span class="cl">               
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">总结：
</span></span><span class="line"><span class="cl">from concurrent.futures import ThreadPoolExecutor, ProcessPoolExecutor	
</span></span><span class="line"><span class="cl">pool = ProcessPoolExecutor()	#创建进程池
</span></span><span class="line"><span class="cl">pool = ThreadPoolExecutor()		#线程创建池
</span></span><span class="line"><span class="cl">res =pool.submit(task, i)	#submit会返回一个future类的对象，该对象调用result就能获取到任务的结果
</span></span><span class="line"><span class="cl">异步回调机制：
</span></span><span class="line"><span class="cl">    给每一个异步提交的任务绑定一个方法，一旦任务有结果了会立刻自动触发该方法
</span></span><span class="line"><span class="cl">    def call_back(n):
</span></span><span class="line"><span class="cl">        print(&#39;call_back&#39;, n.result())
</span></span><span class="line"><span class="cl">    res =pool.submit(task, i).add_done_callback(call_back)
</span></span><span class="line"><span class="cl">    #注意异步回调函数拿到的是一个对象，也需要result才能拿到结果
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="协程基本原理了解">协程基本原理（了解）</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">进程：资源单位
</span></span><span class="line"><span class="cl">线程：执行单位
</span></span><span class="line"><span class="cl">协程：单进程下实现并发，一个并不是实际存在的东西
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	我们程序员自己在代码层面上检测我们所有io操作
</span></span><span class="line"><span class="cl">	一旦遇到io了，我们在代码级别完成切换
</span></span><span class="line"><span class="cl">	这样给cpu的感觉是你这个程序一致运行，没有IO
</span></span><span class="line"><span class="cl">	从而提升程序的运行效率
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">多道技术
</span></span><span class="line"><span class="cl">	切换+保存状态
</span></span><span class="line"><span class="cl">	cpu两种切换
</span></span><span class="line"><span class="cl">		1、程序遇到io
</span></span><span class="line"><span class="cl">		2、程序长时间占用
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">代码如何做到
</span></span><span class="line"><span class="cl">	切换+保存状态 （yield）
</span></span><span class="line"><span class="cl">	#保存上次我执行的状态 下一次接着上一次的操作继续往后执行
</span></span><span class="line"><span class="cl">	#切换不一定是提升效率，也有可能是降低效率，IO切提升效率，没有IO切降低效率
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">验证切换是否一定提升效率：
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        import time
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        # def func1():
</span></span><span class="line"><span class="cl">        #     for i in range(100000000):
</span></span><span class="line"><span class="cl">        #         i+1
</span></span><span class="line"><span class="cl">        #
</span></span><span class="line"><span class="cl">        #
</span></span><span class="line"><span class="cl">        # def func2():
</span></span><span class="line"><span class="cl">        #     for i in range(100000000):
</span></span><span class="line"><span class="cl">        #         i+1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        def func1():
</span></span><span class="line"><span class="cl">            while True:
</span></span><span class="line"><span class="cl">                100000000 + 1
</span></span><span class="line"><span class="cl">                yield
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        def func2():
</span></span><span class="line"><span class="cl">            g = func1() # 初始化生成器
</span></span><span class="line"><span class="cl">            for i in range(100000000):
</span></span><span class="line"><span class="cl">                i + 1
</span></span><span class="line"><span class="cl">                next(g)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        start_time = time.time()
</span></span><span class="line"><span class="cl">        func1()
</span></span><span class="line"><span class="cl">        func2()
</span></span><span class="line"><span class="cl">        print(time.time() - start_time)
</span></span><span class="line"><span class="cl">		
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="genvet模块">genvet模块</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">from gevent import monkey;monkey.patch_all()
</span></span><span class="line"><span class="cl">import time
</span></span><span class="line"><span class="cl">from gevent import spawn #检测机制
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">genvet监测io
</span></span><span class="line"><span class="cl">gevent模块本身无法检测常见的一些io操作
</span></span><span class="line"><span class="cl">apawn在检测的时候是异步的
</span></span><span class="line"><span class="cl">需要再使用的时候额外的导入一句话
</span></span><span class="line"><span class="cl">from gevent import monkey
</span></span><span class="line"><span class="cl">monkey.patch_all()
</span></span><span class="line"><span class="cl">又由于上面两句话在使用gevent模块的时候肯定要导入，所以还支持简写
</span></span><span class="line"><span class="cl">from gevent import monkey;monkey.patch_all()
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def heng():
</span></span><span class="line"><span class="cl">    print(&#39;哼&#39;)
</span></span><span class="line"><span class="cl">    time.sleep(2)
</span></span><span class="line"><span class="cl">    print(&#39;哼&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">def ha():
</span></span><span class="line"><span class="cl">    print(&#39;哈&#39;)
</span></span><span class="line"><span class="cl">    time.sleep(3)
</span></span><span class="line"><span class="cl">    print(&#39;哈&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">start_time = time.time()
</span></span><span class="line"><span class="cl">g1 = spawn(heng)
</span></span><span class="line"><span class="cl">g2 = spawn(ha)
</span></span><span class="line"><span class="cl">g1.join()
</span></span><span class="line"><span class="cl">g2.join()  #等待被检测的任务执行完毕，再往后执行
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">print(start_time - time.time())
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="协程实现tcp服务端的并发">协程实现TCP服务端的并发</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">服务端：
</span></span><span class="line"><span class="cl">        from gevent import monkey;monkey.patch_all()
</span></span><span class="line"><span class="cl">        import socket
</span></span><span class="line"><span class="cl">        from gevent import spawn
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        不开启进程和线程实现 TCP服务端并发
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        import socket
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        def communication(conn):
</span></span><span class="line"><span class="cl">            # 通信循环
</span></span><span class="line"><span class="cl">            while True:
</span></span><span class="line"><span class="cl">                try:
</span></span><span class="line"><span class="cl">                    data = conn.recv(1024)
</span></span><span class="line"><span class="cl">                    if len(data) == 0: break
</span></span><span class="line"><span class="cl">                    print(data.decode(&#39;utf-8&#39;))
</span></span><span class="line"><span class="cl">                    conn.send(data.upper())
</span></span><span class="line"><span class="cl">                except ConnectionResetError as e:
</span></span><span class="line"><span class="cl">                    print(e)
</span></span><span class="line"><span class="cl">                    break
</span></span><span class="line"><span class="cl">            conn.close()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        # 连接循环
</span></span><span class="line"><span class="cl">        def server(ip, port):
</span></span><span class="line"><span class="cl">            server = socket.socket()  # 括号不加参数默认TCP
</span></span><span class="line"><span class="cl">            server.bind((&#39;127.0.0.1&#39;, 8080))
</span></span><span class="line"><span class="cl">            server.listen(5)
</span></span><span class="line"><span class="cl">            while True:
</span></span><span class="line"><span class="cl">                conn, addr = server.accept()
</span></span><span class="line"><span class="cl">                spawn(communication, conn)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        if __name__ == &#39;__main__&#39;:
</span></span><span class="line"><span class="cl">            g1 = spawn(server, &#39;127.0.0.1&#39;, 8080)
</span></span><span class="line"><span class="cl">            g1.join()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">客户端：
</span></span><span class="line"><span class="cl">        from threading import Thread, current_thread
</span></span><span class="line"><span class="cl">        import socket
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        def xclient():
</span></span><span class="line"><span class="cl">            client = socket.socket()
</span></span><span class="line"><span class="cl">            client.connect((&#39;127.0.0.1&#39;, 8080))
</span></span><span class="line"><span class="cl">            n = 0
</span></span><span class="line"><span class="cl">            while True:
</span></span><span class="line"><span class="cl">                msg = &#39;%s say hello %s&#39;%(current_thread().name, n)
</span></span><span class="line"><span class="cl">                n += 1
</span></span><span class="line"><span class="cl">                client.send(msg.encode(&#39;utf-8&#39;))
</span></span><span class="line"><span class="cl">                data = client.recv(1024)
</span></span><span class="line"><span class="cl">                print(data.decode(&#39;utf-8&#39;))
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        if __name__ == &#39;__main__&#39;:
</span></span><span class="line"><span class="cl">            for i in range(50):
</span></span><span class="line"><span class="cl">                t = Thread(target=xclient)
</span></span><span class="line"><span class="cl">                t.start()
</span></span><span class="line"><span class="cl">                
</span></span><span class="line"><span class="cl">               
</span></span><span class="line"><span class="cl">总结：
</span></span><span class="line"><span class="cl">多进程下面开设多线程
</span></span><span class="line"><span class="cl">多线程下面再利用协程
</span></span><span class="line"><span class="cl">最大程度提升软件运行效率
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="并发编程day5">并发编程day5</h2>
<h5 id="io模型简介">IO模型简介</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">正对网络io的模型：
</span></span></span><span class="line"><span class="cl"><span class="s1">	1、blocking IO	阻塞IO
</span></span></span><span class="line"><span class="cl"><span class="s1">	2、nonblocking IO 	非阻塞IO
</span></span></span><span class="line"><span class="cl"><span class="s1">	3、IO multiplexing	IO多路复用
</span></span></span><span class="line"><span class="cl"><span class="s1">	4、asynchronous IO 	异步IO
</span></span></span><span class="line"><span class="cl"><span class="s1">	5、signal driven IO	信号驱动IO（并不常用，不做了解）
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">同步异步</span><span class="err">：</span><span class="n">任务的提交方式</span><span class="err">，</span><span class="n">结果可以通过回调机制来接收</span>
</span></span><span class="line"><span class="cl"><span class="n">阻塞非阻塞</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">	<span class="n">常见的网络阻塞状态</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">		<span class="mi">1</span><span class="err">、</span><span class="n">accept</span>
</span></span><span class="line"><span class="cl">		<span class="mi">2</span><span class="err">、</span><span class="n">recv</span>
</span></span><span class="line"><span class="cl">		<span class="mi">3</span><span class="err">、</span><span class="n">recvfrom</span>
</span></span><span class="line"><span class="cl">		<span class="n">send虽然也有io行为</span><span class="err">，</span><span class="n">但是不在我们考虑范围</span>
</span></span><span class="line"><span class="cl">		
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="阻塞io">阻塞IO</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">之前写的都是阻塞IO，协程除外
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">gevent</span> <span class="kn">import</span> <span class="n">monkey</span><span class="p">;</span><span class="n">monkey</span><span class="o">.</span><span class="n">patch_all</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">socket</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">gevent</span> <span class="kn">import</span> <span class="n">spawn</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">不开启进程和线程实现 TCP服务端并发
</span></span></span><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">server</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>  <span class="c1"># 括号不加参数默认TCP</span>
</span></span><span class="line"><span class="cl"><span class="n">server</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">server</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">conn</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">data</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">break</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="n">conn</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">ConnectionResetError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span>
</span></span><span class="line"><span class="cl">    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1"># 再服务端开设多进程或者多线程 进程池线程池 其实还是没有解决IO问题</span>
</span></span><span class="line"><span class="cl"><span class="n">该等的地方还是得等</span><span class="err">，</span><span class="n">没有规避</span>
</span></span><span class="line"><span class="cl"><span class="n">只不过多个人等待</span><span class="err">，</span><span class="n">彼此互不干扰</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="非阻塞io">非阻塞IO</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">服务端</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">gevent</span> <span class="kn">import</span> <span class="n">monkey</span><span class="p">;</span><span class="n">monkey</span><span class="o">.</span><span class="n">patch_all</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">socket</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">gevent</span> <span class="kn">import</span> <span class="n">spawn</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">        不开启进程和线程实现 TCP服务端并发
</span></span></span><span class="line"><span class="cl"><span class="s2">        &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">server</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>  <span class="c1"># 括号不加参数默认TCP</span>
</span></span><span class="line"><span class="cl">        <span class="n">server</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="n">server</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">server</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 将所有网络阻塞变为非阻塞</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">r_list</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="n">del_list</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">conn</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="n">r_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">except</span> <span class="ne">BlockingIOError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># print(&#39;做其他事&#39;)</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># time.sleep(0.1)</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># print(&#39;列表长度：&#39;,len(r_list))</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="n">r_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="n">data</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>  <span class="c1"># 没有消息 报错</span>
</span></span><span class="line"><span class="cl">                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># 客户端断开连接</span>
</span></span><span class="line"><span class="cl">                            <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>    <span class="c1"># 关闭conn</span>
</span></span><span class="line"><span class="cl">                            <span class="c1"># 将无用的conn从r_list删除</span>
</span></span><span class="line"><span class="cl">                            <span class="n">del_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                            <span class="k">continue</span>
</span></span><span class="line"><span class="cl">                        <span class="n">conn</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">                    <span class="k">except</span> <span class="ne">BlockingIOError</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="k">continue</span>
</span></span><span class="line"><span class="cl">                    <span class="k">except</span> <span class="ne">ConnectionResetError</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                        <span class="c1"># 删除列表中的通信对象</span>
</span></span><span class="line"><span class="cl">                        <span class="n">del_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 回收无用连接</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="n">del_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">r_list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">del_list</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="n">客户端</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">socket</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">client</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">data</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">总结</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">虽然非阻塞IO感觉很强
</span></span></span><span class="line"><span class="cl"><span class="s2">但是该模型会 长时间占用着CPU不干活，让cpu不停空转
</span></span></span><span class="line"><span class="cl"><span class="s2">我们实际应用中也不会考虑使用非阻塞IO模型
</span></span></span><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="io多路复用">IO多路复用</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">当监管对象只有一个的时候 其实IO多路复用连IO阻塞都比不上！
</span></span></span><span class="line"><span class="cl"><span class="s2">但是IO多路复用可以一次性监管很多个对象
</span></span></span><span class="line"><span class="cl"><span class="s2">server = socket.socket()
</span></span></span><span class="line"><span class="cl"><span class="s2">conn, addr = server.accept()
</span></span></span><span class="line"><span class="cl"><span class="s2">监管机制是操作系统本身就有的 如果你想要用该监管机制(select)
</span></span></span><span class="line"><span class="cl"><span class="s2">需要你导入对应的select模块
</span></span></span><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">客户端</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">select</span>
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">socket</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">server</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>  <span class="c1"># 括号不加参数默认TCP</span>
</span></span><span class="line"><span class="cl">        <span class="n">server</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="n">server</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">server</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 将所有网络阻塞变为非阻塞</span>
</span></span><span class="line"><span class="cl">        <span class="n">read_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">server</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">r_list</span><span class="p">,</span> <span class="n">w_list</span><span class="p">,</span> <span class="n">x_list</span> <span class="o">=</span> <span class="n">select</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">read_list</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[])</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">            帮忙监管，一旦有人来了，立刻返回对应的监管对象
</span></span></span><span class="line"><span class="cl"><span class="s2">            &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># print(r_list)</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">r_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;&#34;&#34;正对不同对象做不同的处理&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">i</span> <span class="ow">is</span> <span class="n">server</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">conn</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                    <span class="c1"># 也应该添加到监管的队列中</span>
</span></span><span class="line"><span class="cl">                    <span class="n">read_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">res</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="n">i</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                        <span class="n">read_list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="k">continue</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="n">i</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;heiheiheiheihei&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                  
</span></span><span class="line"><span class="cl"><span class="n">服务端</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">socket</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">client</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">data</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">总结</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">监管机制其实有很多
</span></span></span><span class="line"><span class="cl"><span class="s2">select机制:	
</span></span></span><span class="line"><span class="cl"><span class="s2">	windows linux都有
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">poll机制	:
</span></span></span><span class="line"><span class="cl"><span class="s2">	只有linux有   poll和select都可以监管多个对象，但poll监管的数量更多
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">ps:上述select和poll机制其实都不是很完美，当监管对象特别多的时候可能会出现及其大的延迟响应
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">epoll机制:	
</span></span></span><span class="line"><span class="cl"><span class="s2">	只有linux有
</span></span></span><span class="line"><span class="cl"><span class="s2">    它给每一个监管对象都绑定一个回调机制
</span></span></span><span class="line"><span class="cl"><span class="s2">    一旦有响应，回调机制立刻发起提现
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">正对怎么选这些机制可以通过selectors模块来自动选择
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="异步io模型asyncio模块">异步IO模型，asyncio模块</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">异步IO模型是所有模型中效率最高的 也是使用最广泛的
</span></span></span><span class="line"><span class="cl"><span class="s2">相关的模块和框架
</span></span></span><span class="line"><span class="cl"><span class="s2">    模块：asyncio模块
</span></span></span><span class="line"><span class="cl"><span class="s2">    异步框架：sanic tronado twisted
</span></span></span><span class="line"><span class="cl"><span class="s2">    	速度快！！！
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">threading</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">asyncio</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">单线程模拟高并发
</span></span></span><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@asyncio</span><span class="o">.</span><span class="n">coroutine</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello world </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="k">yield from</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># 换成真正的IO操作</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello world </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">hello</span><span class="p">(),</span> <span class="n">hello</span><span class="p">()]</span>
</span></span><span class="line"><span class="cl"><span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">tasks</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">loop</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="网络并发知识点梳理">网络并发知识点梳理</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">网络编程：
</span></span><span class="line"><span class="cl"> 	1、软件开发架构
</span></span><span class="line"><span class="cl">    2、互联网协议
</span></span><span class="line"><span class="cl">        -osi七层模型
</span></span><span class="line"><span class="cl">        -TCP,UDP
</span></span><span class="line"><span class="cl">    3、三次握手四次挥手（重点）
</span></span><span class="line"><span class="cl">    4、socket简介
</span></span><span class="line"><span class="cl">    5、TCP粘包问题， 定制固定长度的报头
</span></span><span class="line"><span class="cl">    6、UDP协议
</span></span><span class="line"><span class="cl">    7、socketserver模块  实现服务端并发
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">并发编程：
</span></span><span class="line"><span class="cl">	1、操作系统发展史
</span></span><span class="line"><span class="cl">	2、多道计数
</span></span><span class="line"><span class="cl">	3、进程理论
</span></span><span class="line"><span class="cl">	4、开启进程的两种方式
</span></span><span class="line"><span class="cl">	5、互斥锁
</span></span><span class="line"><span class="cl">	6、生产者消费者模型
</span></span><span class="line"><span class="cl">	7、线程理论
</span></span><span class="line"><span class="cl">	8、开启线程的两种方式
</span></span><span class="line"><span class="cl">	9、GIL全局解释器锁
</span></span><span class="line"><span class="cl">	10、进程池 线程池
</span></span><span class="line"><span class="cl">	11、协程的概念
</span></span><span class="line"><span class="cl">	12、IO模型的了解
</span></span><span class="line"><span class="cl">	
</span></span></code></pre></td></tr></table>
</div>
</div>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">khw</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2021-10-15
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/python/">python</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/pythonday8%E5%89%8D%E7%AB%AF/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">python,day8,前端</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/pythonday6%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/">
            <span class="next-text nav-default">python,day6,网络编程</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://gitee.com/khwcloud" class="iconfont icon-github" title="github"></a>
  <a href="http://localhost:1313/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2022
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">khw</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>



<script type="text/javascript" src="/js/main.min.9e3db4166f5901c11faec00349b7b03ae36c12a6e820a208cf498f1aee812258.js"></script>








</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>python,day12,路飞项目 - blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="khw" /><meta name="description" content="小路飞学城
" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.100.1 with theme even" />


<link rel="canonical" href="http://localhost:1313/post/pythonday12%E8%B7%AF%E9%A3%9E%E9%A1%B9%E7%9B%AE/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.8c3cbcb0324c2bb4875ceccba4007cbad4b4ac8377f33af9953c3e7684534a50.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="python,day12,路飞项目" />
<meta property="og:description" content="小路飞学城" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/pythonday12%E8%B7%AF%E9%A3%9E%E9%A1%B9%E7%9B%AE/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-03-25T11:06:25+08:00" />
<meta property="article:modified_time" content="2022-03-25T11:06:25+08:00" />

<meta itemprop="name" content="python,day12,路飞项目">
<meta itemprop="description" content="小路飞学城"><meta itemprop="datePublished" content="2022-03-25T11:06:25+08:00" />
<meta itemprop="dateModified" content="2022-03-25T11:06:25+08:00" />
<meta itemprop="wordCount" content="52901">
<meta itemprop="keywords" content="python," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="python,day12,路飞项目"/>
<meta name="twitter:description" content="小路飞学城"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">主页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">类别</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">blog</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">主页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">类别</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">python,day12,路飞项目</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-03-25 </span>
        <div class="post-category">
            <a href="/categories/python/"> python </a>
            </div>
          <span class="more-meta"> 52901 words </span>
          <span class="more-meta"> 106 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-项目基础">1-项目基础</a>
          <ul>
            <li><a href="#1-pip换源">1 pip换源</a></li>
            <li><a href="#2-虚拟环境搭建">2 虚拟环境搭建</a></li>
            <li><a href="#3-luffy后台搭建">3 luffy后台搭建</a></li>
            <li><a href="#4-数据库配置">4 数据库配置</a></li>
            <li><a href="#5-user表配置">5 User表配置</a></li>
            <li><a href="#6-luffy前台搭建">6 luffy前台搭建</a></li>
            <li><a href="#7-luffy后台配置">7 luffy后台配置</a></li>
            <li><a href="#8-luffy前台组件搭建">8 luffy前台组件搭建</a></li>
          </ul>
        </li>
        <li><a href="#2-登录注册">2 登录注册</a>
          <ul>
            <li><a href="#21-vue登录界面">2.1 vue登录界面</a></li>
            <li><a href="#22-登录注册模态框">2.2 登录注册模态框</a></li>
            <li><a href="#23-登录注册接口分析">2.3 登录注册接口分析</a></li>
            <li><a href="#24-多种方式登录">2.4 多种方式登录</a></li>
            <li><a href="#25-cookies修改页面登录状态前台注销">2.5 Cookies修改页面登录状态、前台注销</a></li>
            <li><a href="#26-手机号是否存在">2.6 手机号是否存在</a></li>
            <li><a href="#27-申请腾讯云短信服务">2.7 申请腾讯云短信服务</a></li>
            <li><a href="#28-实操腾讯云短信接口">2.8 实操腾讯云短信接口</a></li>
            <li><a href="#29-短信接口频率限制">2.9 短信接口频率限制</a></li>
            <li><a href="#210-验证码登录接口">2.10 验证码登录接口</a></li>
            <li><a href="#211-前台发送验证码">2.11 前台发送验证码</a></li>
            <li><a href="#212-后台注册接口">2.12 后台注册接口</a></li>
            <li><a href="#213-前台注册接口">2.13 前台注册接口</a></li>
          </ul>
        </li>
        <li><a href="#3-redis使用">3 Redis使用</a>
          <ul>
            <li><a href="#31-安装">3.1 安装</a></li>
            <li><a href="#32-python操作redis普通连接">3.2 Python操作Redis普通连接</a></li>
            <li><a href="#33-python操作redis连接池">3.3 Python操作Redis连接池</a></li>
            <li><a href="#34-redis数据类型">3.4 Redis数据类型</a></li>
            <li><a href="#35-string字符串操作">3.5 String(字符串)操作</a></li>
            <li><a href="#36-hash哈希操作">3.6 Hash(哈希)操作</a></li>
            <li><a href="#37-list列表操作">3.7 List(列表)操作</a></li>
            <li><a href="#38-set集合操作">3.8 Set(集合)操作</a></li>
            <li><a href="#39-其他操作">3.9 其他操作</a></li>
            <li><a href="#310-管道">3.10 管道</a></li>
            <li><a href="#311-django使用redis">3.11 Django使用Redis</a></li>
            <li><a href="#312-接口缓存">3.12 接口缓存</a></li>
          </ul>
        </li>
        <li><a href="#4-celery异步任务框架">4 Celery(异步任务框架)</a>
          <ul>
            <li><a href="#41-celery使用">4.1 Celery使用</a></li>
            <li><a href="#42-基本机构">4.2 基本机构</a></li>
            <li><a href="#43-包结构">4.3 包结构</a></li>
          </ul>
        </li>
        <li><a href="#5-课程模块">5 课程模块</a>
          <ul>
            <li><a href="#51-课程表结构分析优化">5.1 课程表结构分析、优化</a></li>
            <li><a href="#52-课程测试数据准备">5.2 课程测试数据准备</a></li>
            <li><a href="#53-课程主页页面测试">5.3 课程主页页面测试</a></li>
            <li><a href="#54-课程分类群查接口">5.4 课程分类群查接口</a></li>
            <li><a href="#55-课程群查接口">5.5 课程群查接口</a></li>
            <li><a href="#56-搜索组件和过滤">5.6 搜索组件和过滤</a></li>
            <li><a href="#57-自定义过滤类看需求使用">5.7 自定义过滤类(看需求使用)</a></li>
            <li><a href="#58区间过滤项目使用">5.8区间过滤(项目使用)</a></li>
            <li><a href="#59-前端主页详情页">5.9 前端主页详情页</a></li>
            <li><a href="#510-前端课程详情页">5.10 前端课程详情页</a></li>
            <li><a href="#511-章节分类接口">5.11 章节分类接口</a></li>
            <li><a href="#512-七牛云视频托管">5.12 七牛云视频托管</a></li>
          </ul>
        </li>
        <li><a href="#7-搜索功能">7 搜索功能</a>
          <ul>
            <li><a href="#71-后台搜索接口">7.1 后台搜索接口</a></li>
            <li><a href="#72-前台搜索导航栏">7.2 前台搜索导航栏</a></li>
            <li><a href="#73搜索页面">7.3搜索页面</a></li>
          </ul>
        </li>
        <li><a href="#8-支付">8 支付</a>
          <ul>
            <li><a href="#81-支付宝开放平台支付接口">8.1 支付宝开放平台(支付接口)</a></li>
            <li><a href="#82-后端使用支付接口">8.2 后端使用支付接口</a></li>
            <li><a href="#83-支付宝二次封装">8.3 支付宝二次封装</a></li>
            <li><a href="#84-订单模块表创建">8.4 订单模块表创建</a></li>
            <li><a href="#85-支付接口">8.5 支付接口</a></li>
            <li><a href="#86-前后台回调端口配置">8.6 前后台回调端口配置</a></li>
            <li><a href="#87-前台生成订单并跳转">8.7 前台生成订单并跳转</a></li>
            <li><a href="#88-前台支付成功页面">8.8 前台支付成功页面</a></li>
            <li><a href="#89-支付宝回调到前端参数">8.9 支付宝回调到前端参数</a></li>
            <li><a href="#810-同步异步回调接口">8.10 同步异步回调接口</a></li>
          </ul>
        </li>
        <li><a href="#9-项目上线">9 项目上线</a>
          <ul>
            <li><a href="#91-安装软件前准备">9.1 安装软件前准备</a></li>
            <li><a href="#92-安装redis">9.2 安装Redis</a></li>
            <li><a href="#93-安装mysql">9.3 安装MySql</a></li>
            <li><a href="#94-安装python">9.4 安装Python</a></li>
            <li><a href="#95安装nginx">9.5安装Nginx</a></li>
            <li><a href="#96-nginx转发前端项目静态文件">9.6 Nginx转发前端项目静态文件</a></li>
            <li><a href="#97-安装uwsgi">9.7 安装uwsgi</a></li>
            <li><a href="#98-创建虚拟环境">9.8 创建虚拟环境</a></li>
            <li><a href="#99-转发动态请求django项目使用nginxuwsgi">9.9 转发动态请求、django项目（使用nginx、uwsgi）</a></li>
            <li><a href="#910-aliyun-ecs-服务器操作">9.10 AliYun Ecs 服务器操作</a></li>
            <li><a href="#911-数据库插入数据">9.11 数据库插入数据</a></li>
            <li><a href="#912-后台样式">9.12 后台样式</a></li>
            <li><a href="#913-nginx配置静态文件路径">9.13 Nginx配置静态文件路径</a></li>
            <li><a href="#914-启动服务">9.14 启动服务</a></li>
            <li><a href="#915-向上项目测试">9.15 向上项目测试</a></li>
          </ul>
        </li>
        <li><a href="#10-上线总结">10 上线总结</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>小路飞学城</p>
<h2 id="1-项目基础">1-项目基础</h2>
<h3 id="1-pip换源">1 pip换源</h3>
<p>永久配置安装源</p>
<h5 id="11-windows">1.1 windows：</h5>
<p>文件管理器敲%APPDATA%，进去之后新建pip文件夹，创建pip.ini配置文件，文件内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="p">[</span><span class="k">global</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">index</span><span class="o">-</span><span class="n">url</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">pypi</span><span class="o">.</span><span class="n">douban</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">simple</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">install</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">use</span><span class="o">-</span><span class="n">mirrors</span> <span class="o">=</span><span class="n">true</span>
</span></span><span class="line"><span class="cl"><span class="n">mirrors</span> <span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">pypi</span><span class="o">.</span><span class="n">douban</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">simple</span><span class="o">/</span>
</span></span><span class="line"><span class="cl"><span class="n">trusted</span><span class="o">-</span><span class="n">host</span> <span class="o">=</span><span class="n">pypi</span><span class="o">.</span><span class="n">douban</span><span class="o">.</span><span class="n">com</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="2-虚拟环境搭建">2 虚拟环境搭建</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#优点</span>
</span></span><span class="line"><span class="cl"><span class="mi">1</span> <span class="n">使用不同应用开发环境相互独立</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span> <span class="n">环境升级不影响其他应用</span><span class="err">、</span><span class="n">不会冲突全局的python环境</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span> <span class="n">防止出现包管理混乱及版本冲突</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="22-windown">2.2 windown:</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#建议使用pip3安装到python环境下</span>
</span></span><span class="line"><span class="cl"><span class="n">pip3</span> <span class="n">install</span> <span class="n">virtualenv</span>
</span></span><span class="line"><span class="cl"><span class="n">pip3</span> <span class="n">install</span> <span class="n">virtualenvwrapper</span><span class="o">-</span><span class="n">win</span>
</span></span><span class="line"><span class="cl"><span class="c1">#创建文件夹D:\Virtualenvs</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="23-配置虚拟环境管理器工作目录">2.3 配置虚拟环境管理器工作目录</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#配置环境变量</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 控制面板 =&gt; 系统和安全 =&gt; 系统 =&gt; 高级系统设置 =&gt; 环境变量 =&gt; 系统变量 =&gt; 点击新建 =&gt; 填入变量名与值</span>
</span></span><span class="line"><span class="cl"><span class="n">变量名</span><span class="err">：</span><span class="n">WORKON_HOME</span>  <span class="n">变量值</span><span class="err">：</span><span class="n">自定义存放虚拟环境的绝对路径</span>
</span></span><span class="line"><span class="cl"><span class="n">eg</span><span class="p">:</span> <span class="n">WORKON_HOME</span><span class="p">:</span> <span class="n">D</span><span class="p">:</span>\<span class="n">Virtualenvs</span>
</span></span><span class="line"><span class="cl"><span class="c1">#同步配置信息</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 去向Python3的安装目录 =&gt; Scripts文件夹 =&gt; virtualenvwrapper.bat =&gt; 双击</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="24-使用">2.4 使用</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#终端命令</span>
</span></span><span class="line"><span class="cl"><span class="mi">1</span> <span class="n">创建虚拟环境到配置的WORKON_HOME路径下</span>
</span></span><span class="line"><span class="cl">	<span class="n">mkvirtualenv</span> <span class="o">-</span><span class="n">p</span> <span class="n">python3</span> <span class="n">自定义的虚拟环境名称</span><span class="err">（</span><span class="n">比如</span><span class="err">：</span><span class="n">luffy</span><span class="err">）</span>	<span class="n">使用的是python3</span>
</span></span><span class="line"><span class="cl">	<span class="n">mkvirtualenv</span> <span class="o">-</span><span class="n">p</span> <span class="n">python2</span> <span class="n">自定义的虚拟环境名称</span><span class="err">（</span><span class="n">比如</span><span class="err">：</span><span class="n">luffy</span><span class="err">）</span>	<span class="n">使用的是python2</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span> <span class="n">查看已有的虚拟环境</span>
</span></span><span class="line"><span class="cl">	<span class="n">workon</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span> <span class="n">使用虚拟环境</span>
</span></span><span class="line"><span class="cl">	<span class="n">workon</span> <span class="n">已有的虚拟环境名称</span><span class="err">（</span><span class="n">比如</span><span class="err">：</span><span class="n">luffy</span><span class="err">）</span>
</span></span><span class="line"><span class="cl"><span class="mi">4</span> <span class="n">进入</span><span class="err">、</span><span class="n">退出该虚拟环境的Python环境</span>
</span></span><span class="line"><span class="cl">	<span class="n">python</span><span class="err">、</span><span class="n">exit</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="mi">5</span> <span class="n">为虚拟环境安装模块</span>
</span></span><span class="line"><span class="cl">	<span class="n">pip</span> <span class="n">install</span> <span class="n">模块名称</span><span class="err">（</span><span class="n">比如</span><span class="err">：</span><span class="n">django</span><span class="o">==</span><span class="mf">2.2</span><span class="err">）</span>
</span></span><span class="line"><span class="cl"><span class="mi">6</span> <span class="n">退出当前虚拟环境</span>
</span></span><span class="line"><span class="cl">	<span class="n">deactivate</span>
</span></span><span class="line"><span class="cl"><span class="mi">7</span> <span class="n">删除虚拟环境</span><span class="err">（</span><span class="n">删除当前虚拟环境要先退出</span><span class="err">）</span>
</span></span><span class="line"><span class="cl">	<span class="n">rmvirtualenv</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="25-pycharm的使用使用虚拟环境我们使用这种方式不建app">2.5 PyCharm的使用（使用虚拟环境）（我们使用这种方式，不建app）</h5>
<p><strong>新建项目</strong></p>
<p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731184729830-156403860.png" alt="img"></p>
<p><strong>使用虚拟环境</strong></p>
<p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731184746814-33500205.png" alt="img"></p>
<p><strong>环境使用</strong></p>
<p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731184809019-1570331454.png" alt="img"></p>
<h3 id="3-luffy后台搭建">3 luffy后台搭建</h3>
<h5 id="31-环境">3.1 环境</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#给虚拟环境luffy安装依赖环境</span>
</span></span><span class="line"><span class="cl">    <span class="n">pip</span> <span class="n">install</span> <span class="n">django</span><span class="o">==</span><span class="mf">2.2</span>
</span></span><span class="line"><span class="cl">	<span class="n">pip</span> <span class="n">install</span> <span class="n">djangorestframework</span>
</span></span><span class="line"><span class="cl">	<span class="n">pip</span> <span class="n">install</span> <span class="n">pymysql</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="32-创建项目我们前面已经用pycharm创建好了">3.2 创建项目（我们前面已经用PyCharm创建好了）</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">在目标目录下创建luffy文件夹</span>
</span></span><span class="line"><span class="cl"><span class="n">cd</span> <span class="n">进入luffy项目</span>
</span></span><span class="line"><span class="cl"><span class="n">django</span><span class="o">-</span><span class="n">admin</span> <span class="n">startproject</span> <span class="n">luffyapi</span>
</span></span><span class="line"><span class="cl"><span class="n">用PyCharm打开项目</span><span class="err">，</span><span class="n">使用已经建好的虚拟环境</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="33-重构项目目录">3.3 重构项目目录</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">luffyapi</span>
</span></span><span class="line"><span class="cl">	<span class="o">-</span><span class="n">logs</span>	<span class="c1">#项目运行时/开发时的日志目录</span>
</span></span><span class="line"><span class="cl">	<span class="o">-</span><span class="n">manage</span><span class="o">.</span><span class="n">py</span>	<span class="c1">#脚本文件</span>
</span></span><span class="line"><span class="cl">	<span class="o">-</span><span class="n">scripts</span>	<span class="c1">#保存项目运营时的脚本文件</span>
</span></span><span class="line"><span class="cl">	<span class="o">-</span><span class="n">luffyapi</span>	<span class="c1">#项目的主应用，开发时的代码保存</span>
</span></span><span class="line"><span class="cl">		<span class="o">-</span><span class="n">utils</span><span class="p">(</span><span class="n">包带__init__</span><span class="o">.</span><span class="n">py</span><span class="p">)</span><span class="n">公共函数库</span>
</span></span><span class="line"><span class="cl">		<span class="o">-</span><span class="n">urls</span><span class="o">.</span><span class="n">py</span>	<span class="c1">#总路由</span>
</span></span><span class="line"><span class="cl">		<span class="o">-</span><span class="n">apps</span><span class="p">(</span><span class="n">包带__init__</span><span class="o">.</span><span class="n">py</span><span class="p">)</span>	<span class="c1">#子应用保存目录</span>
</span></span><span class="line"><span class="cl">		<span class="o">-</span><span class="n">libs</span>	<span class="c1">#第三方类库的保存目录</span>
</span></span><span class="line"><span class="cl">		<span class="o">-</span><span class="n">settings</span><span class="p">(</span><span class="n">包带__init__</span><span class="o">.</span><span class="n">py</span><span class="p">)</span>	<span class="c1">#配置目录</span>
</span></span><span class="line"><span class="cl">			<span class="o">-</span><span class="n">dev</span><span class="o">.</span><span class="n">py</span>	<span class="c1">#项目开发时的本地配置</span>
</span></span><span class="line"><span class="cl">			<span class="o">-</span><span class="n">prod</span><span class="o">.</span><span class="n">py</span>	<span class="c1">#项目上线时的运行配置</span>
</span></span><span class="line"><span class="cl"><span class="n">创建doc文件夹</span><span class="err">、</span><span class="n">创建readme</span><span class="o">.</span><span class="n">md文件</span>
</span></span><span class="line"><span class="cl"><span class="n">终端下创建两个应用到apps</span>
</span></span><span class="line"><span class="cl"><span class="n">cd</span> <span class="n">到apps目录下</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="o">../../</span><span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">startapp</span> <span class="n">home</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="o">../../</span><span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">startapp</span> <span class="n">user</span>
</span></span><span class="line"><span class="cl"><span class="n">因为manage</span><span class="o">.</span><span class="n">py在根目录</span><span class="err">，</span><span class="n">所以需要</span><span class="o">../../</span><span class="n">到根目录去用该文件</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="34-配置开发环境">3.4 配置开发环境</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="mi">1</span> <span class="n">把settings</span><span class="o">.</span><span class="n">py内容复制到dev</span><span class="o">.</span><span class="n">py</span><span class="err">，</span><span class="n">原来的settings</span><span class="o">.</span><span class="n">py删除</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span> <span class="c1">#修改下面两文件</span>
</span></span><span class="line"><span class="cl"><span class="c1"># manage.py</span>
</span></span><span class="line"><span class="cl"><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;DJANGO_SETTINGS_MODULE&#39;</span><span class="p">,</span><span class="s1">&#39;luffyapi.settings.dev&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># wsgi.py</span>
</span></span><span class="line"><span class="cl"><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;DJANGO_SETTINGS_MODULE&#39;</span><span class="p">,</span><span class="s1">&#39;luffyapi.settings.dev&#39;</span><span class="p">)</span><span class="c1">#本地使用.dev，后面修改为.prod即可</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span> <span class="n">修改dev</span><span class="o">.</span><span class="n">py文件内容</span><span class="err">（</span><span class="n">错误信息改成中文</span><span class="err">）</span>
</span></span><span class="line"><span class="cl">	<span class="n">LANGUAGE_CODE</span> <span class="o">=</span> <span class="s1">&#39;zh-hans&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">TIME_ZONE</span> <span class="o">=</span> <span class="s1">&#39;Asia/Shanghai&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">USE_TZ</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl"><span class="mi">4</span> <span class="n">修改启动配置</span>
</span></span><span class="line"><span class="cl">	<span class="n">看下图</span>
</span></span><span class="line"><span class="cl"><span class="mi">5</span> <span class="n">把apps做成Sources</span> <span class="n">Root看图2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731184912700-2033543728.png" alt="img"></p>
<p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731184930890-570562865.png" alt="img"></p>
<h3 id="4-数据库配置">4 数据库配置</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">创建项目依赖数据库</span><span class="err">，</span><span class="n">luffyapi</span>
</span></span><span class="line"><span class="cl">	<span class="n">create</span> <span class="n">database</span> <span class="n">luffyapi</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">创建数据库用户</span><span class="err">，</span><span class="n">授予使用luffyapi数据库的权利</span>	
</span></span><span class="line"><span class="cl">	<span class="n">grant</span> <span class="nb">all</span> <span class="n">privileges</span> <span class="n">on</span> <span class="n">luffyapi</span><span class="o">.*</span> <span class="n">to</span><span class="s1">&#39;luffyapi&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span> <span class="n">identified</span> <span class="n">by</span> <span class="s1">&#39;123&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="o">---</span><span class="n">上面命令指</span><span class="err">：</span><span class="n">创建用户luffyapi授予使用luffyapi数据库使用权</span><span class="err">，</span><span class="n">用户密码是123</span>
</span></span><span class="line"><span class="cl"><span class="n">刷新权限</span>
</span></span><span class="line"><span class="cl">    <span class="n">flush</span> <span class="n">privileges</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">#配置文件配置</span>
</span></span><span class="line"><span class="cl"><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.mysql&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;luffy&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="s1">&#39;luffy&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;Luffy123&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="mi">3306</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pymysql</span>
</span></span><span class="line"><span class="cl"><span class="n">pymysql</span><span class="o">.</span><span class="n">install_as_MySQLdb</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>django2.x版本可能会出现一些pymysql兼容问题，按报错注释、修改源码即可</strong></p>
<h3 id="5-user表配置">5 User表配置</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">导入from</span> <span class="n">django</span><span class="o">.</span><span class="n">contrib</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">models</span> <span class="kn">import</span> <span class="nn">AbstractUser</span>
</span></span><span class="line"><span class="cl"><span class="n">继承user之前不要数据迁移命令</span><span class="err">，</span><span class="n">会出错</span><span class="err">，</span><span class="n">需要</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">		<span class="o">-</span><span class="n">把所有app下的迁移文件</span><span class="err">，</span><span class="n">全删除</span>
</span></span><span class="line"><span class="cl">    	<span class="o">-</span><span class="n">admin</span><span class="err">，</span><span class="n">auth</span> <span class="n">app下的迁移文件删除</span>
</span></span><span class="line"><span class="cl">   	    <span class="o">-</span><span class="n">删库</span><span class="err">（</span><span class="n">数据一定要导出来</span><span class="err">），</span><span class="n">重新迁移</span>  <span class="err">（</span><span class="n">自己尝试一下</span><span class="err">）</span>
</span></span><span class="line"><span class="cl"><span class="n">继承AbstractUser</span><span class="err">，</span><span class="n">增加两个字段</span><span class="err">，</span><span class="n">mobilephone</span><span class="err">、</span><span class="n">icon</span><span class="err">，</span>
</span></span><span class="line"><span class="cl">	    <span class="n">mobilephone</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span><span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    	<span class="n">icon</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s1">&#39;icon&#39;</span><span class="p">,</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;media/default.png&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="n">在settings</span><span class="o">.</span><span class="n">py中配置</span>
</span></span><span class="line"><span class="cl">	<span class="n">MEDIA_URL</span><span class="o">=</span><span class="s1">&#39;/media/&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="n">MEDIA_ROOT</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span><span class="s1">&#39;media&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#此时的BASE_DIR是luffyapi下的luffyapi</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1"># app.表名</span>
</span></span><span class="line"><span class="cl">    <span class="n">AUTH_USER_MODEL</span> <span class="o">=</span> <span class="s2">&#34;user.user&#34;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">路由开放media文件夹</span><span class="err">，</span><span class="n">访问头像</span><span class="err">，</span><span class="n">需要导入</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">django.views.static</span> <span class="kn">import</span> <span class="n">serve</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">	<span class="n">re_path</span><span class="p">(</span><span class="s1">&#39;media/(?P&lt;path&gt;.*)&#39;</span><span class="p">,</span> <span class="n">serve</span><span class="p">,{</span><span class="s1">&#39;document_root&#39;</span><span class="p">:</span><span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_ROOT</span><span class="p">}),</span>	
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="6-luffy前台搭建">6 luffy前台搭建</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="mi">1</span> <span class="n">安装node</span><span class="o">.</span><span class="n">js</span><span class="err">，</span><span class="n">官网下载</span><span class="err">，</span><span class="n">一路下一步</span>
</span></span><span class="line"><span class="cl">	<span class="n">查看版本node</span> <span class="o">-</span><span class="n">v</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span> <span class="n">安装模块</span><span class="err">，</span><span class="n">npm比较慢</span><span class="err">，</span><span class="n">用淘宝的cnpm来替换npm</span>
</span></span><span class="line"><span class="cl">	<span class="n">npm</span> <span class="n">install</span> <span class="o">-</span><span class="n">g</span> <span class="n">cnpm</span> <span class="o">--</span><span class="n">registry</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">registry</span><span class="o">.</span><span class="n">npm</span><span class="o">.</span><span class="n">taobao</span><span class="o">.</span><span class="n">org</span>   
</span></span><span class="line"><span class="cl"><span class="mi">3</span> <span class="n">创建vue的工程</span><span class="err">，</span><span class="n">需要一个vue脚手架</span>
</span></span><span class="line"><span class="cl">	<span class="n">cnpm</span> <span class="n">install</span> <span class="o">-</span><span class="n">g</span> <span class="nd">@vue</span><span class="o">/</span><span class="n">cli</span>
</span></span><span class="line"><span class="cl"><span class="mi">4</span> <span class="n">如果有问题执行如下</span><span class="err">，</span><span class="n">重走2</span><span class="err">、</span><span class="mi">3</span><span class="n">步</span>
</span></span><span class="line"><span class="cl">	<span class="n">npm</span> <span class="n">cache</span> <span class="n">clean</span> <span class="o">--</span><span class="n">force</span>
</span></span><span class="line"><span class="cl"><span class="mi">5</span> <span class="n">创建vue项目</span>
</span></span><span class="line"><span class="cl">	<span class="n">cd</span> <span class="n">建立的luffy文件夹</span>
</span></span><span class="line"><span class="cl">	<span class="n">vue</span> <span class="n">create</span> <span class="n">自定义项目名</span><span class="err">（</span><span class="n">我们用luffycity</span><span class="err">）</span>
</span></span><span class="line"><span class="cl">	<span class="n">选Manually自定义配置</span>
</span></span><span class="line"><span class="cl">    <span class="n">需要的组件选择Babel</span><span class="err">，</span><span class="n">Router</span><span class="err">，</span><span class="n">Vuex这三个</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="mi">6</span> <span class="n">用pycharm打开</span><span class="err">，</span><span class="n">配置快键启动</span>
</span></span><span class="line"><span class="cl">	<span class="n">看下图</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731184947089-1707460301.png" alt="img"></p>
<h4 id="51-目录介绍">5.1 目录介绍</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">public</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">favicon</span><span class="o">.</span><span class="n">ico</span>   <span class="c1"># </span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>    <span class="c1">#整个项目的单页面</span>
</span></span><span class="line"><span class="cl"><span class="n">src</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">assets</span>  <span class="c1">#静态文件，js，css，img</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">components</span> <span class="c1"># 小组件，头部组件，尾部组件</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">router</span>     <span class="c1"># 路由相关</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">store</span>      <span class="c1"># vuex相关，状态管理器，临时存储数据的地方</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">views</span>      <span class="c1"># 页面组件</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">App</span><span class="o">.</span><span class="n">vue</span>    <span class="c1"># 根组件</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">main</span><span class="o">.</span><span class="n">js</span>    <span class="c1"># 配置文件（跟django的setting一样</span>
</span></span><span class="line"><span class="cl"><span class="c1">#任何一个组件都有三部分，里面书写相关代码</span>
</span></span><span class="line"><span class="cl">	<span class="o">&lt;</span><span class="n">template</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    	<span class="c1">#html相关</span>
</span></span><span class="line"><span class="cl">	<span class="o">&lt;/</span><span class="n">template</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">style</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="c1"># css相关</span>
</span></span><span class="line"><span class="cl">	<span class="o">&lt;/</span><span class="n">style</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="c1"># js相关</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="7-luffy后台配置">7 luffy后台配置</h3>
<h4 id="71-封装response对象异常处理">7.1 封装Response对象、异常处理</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#封装Response对象</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#luffyapi\utils\response.py</span>
</span></span><span class="line"><span class="cl">		<span class="kn">from</span> <span class="nn">rest_framework.response</span> <span class="kn">import</span> <span class="n">Response</span>
</span></span><span class="line"><span class="cl">        <span class="k">class</span> <span class="nc">APIResponse</span><span class="p">(</span><span class="n">Response</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s1">&#39;成功&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="n">code</span><span class="p">,</span> <span class="s1">&#39;msg&#39;</span><span class="p">:</span> <span class="n">msg</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">dic</span> <span class="o">=</span> <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
</span></span><span class="line"><span class="cl">                <span class="n">dic</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dic</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headerrs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#视图方法中使用       </span>
</span></span><span class="line"><span class="cl">    	<span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span><span class="s1">&#39;lqz&#39;</span><span class="p">},</span><span class="n">token</span><span class="o">=</span><span class="s1">&#39;dsafsdfa&#39;</span><span class="p">,</span><span class="n">aa</span><span class="o">=</span><span class="s1">&#39;dsafdsafasfdee&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#封装异常处理</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#luffyapi\utils\exceptions.py</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">rest_framework.views</span> <span class="kn">import</span> <span class="n">exception_handler</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">.response</span> <span class="kn">import</span> <span class="n">APIResponse</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">.logger</span> <span class="kn">import</span> <span class="n">log</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">common_exception_handler</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;view是：</span><span class="si">%s</span><span class="s1"> ，错误是</span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;view&#39;</span><span class="p">]</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">            <span class="c1">#context[&#39;view&#39;]  是TextView的对象，想拿出这个对象对应的类名</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;view&#39;</span><span class="p">]</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">ret</span><span class="o">=</span><span class="n">exception_handler</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>  <span class="c1"># 是Response对象，它内部有个data</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="n">ret</span><span class="p">:</span>  <span class="c1">#drf内置处理不了，丢给django 的，我们自己来处理</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 好多逻辑，更具体的捕获异常</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exc</span><span class="p">,</span><span class="ne">KeyError</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s1">&#39;key error&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">msg</span><span class="o">=</span><span class="s1">&#39;error&#39;</span><span class="p">,</span><span class="n">result</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">msg</span><span class="o">=</span><span class="s1">&#39;error&#39;</span><span class="p">,</span><span class="n">result</span><span class="o">=</span><span class="n">ret</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="72-封装日志">7.2 封装日志</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#luffyapi\utils\logger.py</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">logging</span>
</span></span><span class="line"><span class="cl">    <span class="n">log</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;django&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\settings\dev.py中配置</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#日志配置</span>
</span></span><span class="line"><span class="cl">    <span class="n">LOGGING</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;disable_existing_loggers&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;formatters&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;verbose&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">%(levelname)s</span><span class="s1"> </span><span class="si">%(asctime)s</span><span class="s1"> </span><span class="si">%(module)s</span><span class="s1"> </span><span class="si">%(lineno)d</span><span class="s1"> </span><span class="si">%(message)s</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;simple&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">%(levelname)s</span><span class="s1"> </span><span class="si">%(module)s</span><span class="s1"> </span><span class="si">%(lineno)d</span><span class="s1"> </span><span class="si">%(message)s</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;filters&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;require_debug_true&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;()&#39;</span><span class="p">:</span> <span class="s1">&#39;django.utils.log.RequireDebugTrue&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;handlers&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;console&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 实际开发建议使用WARNING</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;level&#39;</span><span class="p">:</span> <span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;filters&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;require_debug_true&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;logging.StreamHandler&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;formatter&#39;</span><span class="p">:</span> <span class="s1">&#39;simple&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 实际开发建议使用ERROR</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;level&#39;</span><span class="p">:</span> <span class="s1">&#39;INFO&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;logging.handlers.RotatingFileHandler&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 日志位置,日志文件名,日志保存目录必须手动创建，注：这里的文件路径要注意BASE_DIR代表的是小luffyapi</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;filename&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">),</span> <span class="s2">&#34;logs&#34;</span><span class="p">,</span> <span class="s2">&#34;luffy.log&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 日志文件的最大值,这里我们设置300M</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;maxBytes&#39;</span><span class="p">:</span> <span class="mi">300</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 日志文件的数量,设置最大日志数量为10</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;backupCount&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 日志格式:详细格式</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;formatter&#39;</span><span class="p">:</span> <span class="s1">&#39;verbose&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 文件内容编码</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;encoding&#39;</span><span class="p">:</span> <span class="s1">&#39;utf-8&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 日志对象</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;loggers&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;django&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;handlers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;console&#39;</span><span class="p">,</span> <span class="s1">&#39;file&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;propagate&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="c1"># 是否让日志信息继续冒泡给其他的日志处理系统</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 以后使用直接导入</span>
</span></span><span class="line"><span class="cl">	<span class="kn">from</span> <span class="nn">luffyapi.utils.logger</span> <span class="kn">import</span> <span class="n">log</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="73-解决跨域问题xsscorscsrf">7.3 解决跨域问题(xss、cors、csrf)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#XSS指跨站脚本攻击，CORS指跨域资源共享、CSRF指跨站请求伪造</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mi">1</span> <span class="n">同源策略指协议</span><span class="err">，</span><span class="n">域名</span><span class="err">，</span><span class="n">端口一致为同源</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mi">2</span> <span class="n">CORS跨域资源共享</span><span class="err">，</span><span class="n">允许不同的域来自己的服务器拿数据</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mi">3</span> <span class="n">CORS请求分简单请求</span><span class="p">(</span><span class="n">simple</span> <span class="n">request</span><span class="p">)</span><span class="err">，</span><span class="n">非简单请求</span><span class="p">(</span><span class="ow">not</span><span class="o">-</span><span class="n">so</span><span class="o">-</span><span class="n">simple</span> <span class="n">request</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#简单请求是指满足以下两大条件就是简单请求</span>
</span></span><span class="line"><span class="cl">		<span class="mi">1</span> <span class="n">三种请求方法之一</span>
</span></span><span class="line"><span class="cl">			<span class="n">HEAD</span>
</span></span><span class="line"><span class="cl">			<span class="n">GET</span>
</span></span><span class="line"><span class="cl">			<span class="n">POST</span>
</span></span><span class="line"><span class="cl">		<span class="mi">2</span> <span class="n">HTTP的头信息不超出以下几种字段</span>
</span></span><span class="line"><span class="cl">			<span class="n">Accept</span>
</span></span><span class="line"><span class="cl">            <span class="n">Accept</span><span class="o">-</span><span class="n">Language</span>
</span></span><span class="line"><span class="cl">            <span class="n">Content</span><span class="o">-</span><span class="n">Language</span>
</span></span><span class="line"><span class="cl">            <span class="n">Last</span><span class="o">-</span><span class="n">Event</span><span class="o">-</span><span class="n">ID</span>
</span></span><span class="line"><span class="cl">            <span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span><span class="n">application</span><span class="o">/</span><span class="n">x</span><span class="o">-</span><span class="n">www</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">urlencoded</span><span class="err">、</span><span class="n">multipart</span><span class="o">/</span><span class="n">form</span><span class="o">-</span><span class="n">data</span><span class="err">、</span><span class="n">text</span><span class="o">/</span><span class="n">plain</span><span class="c1">#只能是这三种类型，否则就算不满足该条件</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#非简单请求是指post请求，数据格式是json， 非简单请求需要发两次，OPTIONS请求，一次POST请求</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="mi">4</span> <span class="n">自己在后端解决跨域问题</span><span class="p">,</span><span class="n">开启CORS</span><span class="p">,</span><span class="n">跨域资源共享</span><span class="err">（</span><span class="n">写中间件</span><span class="err">）</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#luffyapi\utils\middle.py</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">django.utils.deprecation</span> <span class="kn">import</span> <span class="n">MiddlewareMixin</span>
</span></span><span class="line"><span class="cl">        <span class="k">class</span> <span class="nc">MyMiddle</span><span class="p">(</span><span class="n">MiddlewareMixin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Access-Control-Allow-Origin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&#34;OPTIONS&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="c1"># 可以加*</span>
</span></span><span class="line"><span class="cl">                    <span class="n">response</span><span class="p">[</span><span class="s2">&#34;Access-Control-Allow-Headers&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&#34;Content-Type&#34;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">response</span><span class="p">[</span><span class="s2">&#34;Access-Control-Allow-Headers&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&#34;authorization&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">response</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#dev.py配置</span>
</span></span><span class="line"><span class="cl">        <span class="n">MIDDLEWARE</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#自定义的跨域资源共享</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;luffyapi.utils.middle.MyMiddle&#39;</span><span class="p">,]</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="mi">5</span> <span class="n">使用第三方的django</span><span class="o">-</span><span class="n">cors</span><span class="o">-</span><span class="n">headers</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#安装pip install django-core-headers</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#配置注册app &#39;corsheaders&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#配置中间件</span>
</span></span><span class="line"><span class="cl">		<span class="n">MIDDLEWARE</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="c1">#第三方的解决跨域资源共享</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;corsheaders.middleware.CorsMiddleware&#39;</span><span class="p">,]</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#配置其他参数</span>
</span></span><span class="line"><span class="cl">        <span class="n">CORS_ALLOW_CREDENTIALS</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">        <span class="n">CORS_ORIGIN_ALLOW_ALL</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">        <span class="n">CORS_ORIGIN_WHITELIST</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># 这里添加你允许的跨域来源</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;http://0.0.0.0&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">CORS_ALLOW_METHODS</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;DELETE&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;OPTIONS&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;PATCH&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;PUT&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;VIEW&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">CORS_ALLOW_HEADERS</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;XMLHttpRequest&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;X_FILENAME&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;accept-encoding&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;authorization&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;content-type&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;dnt&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;origin&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;user-agent&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;x-csrftoken&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;x-requested-with&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;Pragma&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="74-前后台打通">7.4 前后台打通</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="mi">1</span> <span class="nx">前台发送jQuery封装的ajax请求</span><span class="err">，</span><span class="nx">或通过promise封装axios请求</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span> <span class="nx">安装axios</span><span class="p">,</span><span class="nx">cnpm</span> <span class="nx">install</span> <span class="nx">axios</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span> <span class="nx">配置在VUE前端的main</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl">	<span class="err">#</span><span class="nx">main</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl">		<span class="kr">import</span> <span class="nx">Vue</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">import</span> <span class="nx">App</span> <span class="nx">from</span> <span class="s1">&#39;./App.vue&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">import</span> <span class="nx">router</span> <span class="nx">from</span> <span class="s1">&#39;./router&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">import</span> <span class="nx">store</span> <span class="nx">from</span> <span class="s1">&#39;./store&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">&#39;axios&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">Vue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">$axios</span> <span class="o">=</span> <span class="nx">axios</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">          <span class="nx">router</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">store</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">render</span><span class="o">:</span> <span class="nx">h</span> <span class="p">=&gt;</span> <span class="nx">h</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}).</span><span class="nx">$mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="err">#</span><span class="nx">Home</span><span class="p">.</span><span class="nx">Vue</span>
</span></span><span class="line"><span class="cl">    	<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&#34;home&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">主页</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span></span><span class="line"><span class="cl">    	<span class="o">&lt;</span><span class="err">/template&gt;</span>
</span></span><span class="line"><span class="cl">    	<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Home&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">$axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;http://127.0.0.1:8000/home/home/&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>  <span class="c1">//response.data才是真正后台返回的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">errors</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">errors</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">components</span><span class="o">:</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    	<span class="o">&lt;</span><span class="err">/script&gt;</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span><span class="nx">了解es6的箭头函数</span>
</span></span><span class="line"><span class="cl">    <span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">)}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">response</span><span class="p">=&gt;{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">)}</span>    	
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="75-xadmin的使用">7.5 xadmin的使用</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="mi">1</span> <span class="n">安装pip</span> <span class="n">install</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">codeload</span><span class="o">.</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">sshwsfc</span><span class="o">/</span><span class="n">xadmin</span><span class="o">/</span><span class="nb">zip</span><span class="o">/</span><span class="n">django2</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span> <span class="n">app中注册</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#luffyapi\settings\dev.py</span>
</span></span><span class="line"><span class="cl">        <span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># xadmin主体模块</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;xadmin&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 渲染表格模块</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;crispy_forms&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 为模型通过版本控制，可以回滚数据</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;reversion&#39;</span><span class="p">,]</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="mi">3</span> <span class="n">数据库迁移</span>
</span></span><span class="line"><span class="cl">	<span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">makemigrations</span>
</span></span><span class="line"><span class="cl">	<span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span>
</span></span><span class="line"><span class="cl"><span class="mi">4</span> <span class="n">主路由替换admin</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#urls.py</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># xadmin的依赖</span>
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">xadmin</span>
</span></span><span class="line"><span class="cl">        <span class="n">xadmin</span><span class="o">.</span><span class="n">autodiscover</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># xversion模块自动注册需要版本控制的 Model</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">xadmin.plugins</span> <span class="kn">import</span> <span class="n">xversion</span>
</span></span><span class="line"><span class="cl">        <span class="n">xversion</span><span class="o">.</span><span class="n">register_models</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># path(&#39;admin/&#39;, admin.site.urls),</span>
</span></span><span class="line"><span class="cl">            <span class="n">path</span><span class="p">(</span><span class="s1">&#39;xadmin/&#39;</span><span class="p">,</span> <span class="n">xadmin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="mi">5</span> <span class="n">创建超级用户</span><span class="err">，</span><span class="n">PyCharm终端执行</span>
</span></span><span class="line"><span class="cl">	<span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">createsuperuser</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="8-luffy前台组件搭建">8 luffy前台组件搭建</h3>
<h4 id="81-头部组件">8.1 头部组件</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="err">#</span><span class="nx">在components新建Head</span><span class="p">.</span><span class="nx">vue</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;header&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;slogan&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="nx">老男孩IT教育</span> <span class="o">|</span> <span class="nx">帮助有志向的年轻人通过努力学习获得体面的工作和生活</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;nav&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;left-part&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;logo&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">router-link</span> <span class="na">to</span><span class="o">=</span><span class="s">&#34;/&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;../assets/img/head-logo.svg&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="err">/router-link&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;ele&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">span</span> <span class="nt">@click</span><span class="s">=&#34;goPage(&#39;/free-course&#39;)&#34;</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;{active: url_path === &#39;/free-course&#39;}&#34;</span><span class="p">&gt;</span><span class="nx">免费课</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;ele&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">span</span> <span class="nt">@click</span><span class="s">=&#34;goPage(&#39;/actual-course&#39;)&#34;</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;{active: url_path === &#39;/actual-course&#39;}&#34;</span><span class="p">&gt;</span><span class="nx">实战课</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;ele&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">span</span> <span class="nt">@click</span><span class="s">=&#34;goPage(&#39;/light-course&#39;)&#34;</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;{active: url_path === &#39;/light-course&#39;}&#34;</span><span class="p">&gt;</span><span class="nx">轻课</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;right-part&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="nx">登录</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;line&#34;</span><span class="p">&gt;</span><span class="o">|</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="nx">注册</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Header&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">url_path</span><span class="o">:</span> <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">url_path</span> <span class="o">||</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">goPage</span><span class="p">(</span><span class="nx">url_path</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// 已经是当前路由就没有必要重新跳转
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">url_path</span> <span class="o">!==</span> <span class="nx">url_path</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">url_path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">url_path</span> <span class="o">=</span> <span class="nx">url_path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">url_path</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">url_path</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">header</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">white</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">box</span><span class="o">-</span><span class="nx">shadow</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">5</span><span class="nx">px</span> <span class="mi">0</span> <span class="err">#</span><span class="nx">aaa</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">header</span><span class="o">:</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">content</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">clear</span><span class="o">:</span> <span class="nx">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">slogan</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">eee</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">height</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">slogan</span> <span class="nx">p</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">width</span><span class="o">:</span> <span class="mi">1200</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="nx">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">aaa</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">13</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">nav</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">white</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">user</span><span class="o">-</span><span class="nx">select</span><span class="o">:</span> <span class="nx">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">width</span><span class="o">:</span> <span class="mi">1200</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="nx">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">nav</span> <span class="nx">ul</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">padding</span><span class="o">:</span> <span class="mi">15</span><span class="nx">px</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">nav</span> <span class="nx">ul</span><span class="o">:</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">clear</span><span class="o">:</span> <span class="nx">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">nav</span> <span class="nx">ul</span> <span class="nx">li</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">logo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">-</span><span class="nx">right</span><span class="o">:</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">ele</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">ele</span> <span class="nx">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">font</span><span class="o">:</span> <span class="mi">15</span><span class="nx">px</span><span class="o">/</span><span class="mi">36</span><span class="nx">px</span> <span class="s1">&#39;微软雅黑&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">2</span><span class="nx">px</span> <span class="nx">solid</span> <span class="nx">transparent</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">ele</span> <span class="nx">span</span><span class="o">:</span><span class="nx">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">ele</span> <span class="nx">span</span><span class="p">.</span><span class="nx">active</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">right</span><span class="o">-</span><span class="nx">part</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kr">float</span><span class="o">:</span> <span class="nx">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">right</span><span class="o">-</span><span class="nx">part</span> <span class="p">.</span><span class="nx">line</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">right</span><span class="o">-</span><span class="nx">part</span> <span class="nx">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">68</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="82-配置全局css和setting">8.2 配置全局css和setting</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">#</span><span class="nn">在main</span><span class="p">.</span><span class="nc">js中配置</span>
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="nt">配置全局样式</span> <span class="o">@</span> <span class="nt">符号</span><span class="err">，</span><span class="nt">代指src路径</span>
</span></span><span class="line"><span class="cl">    <span class="nt">import</span> <span class="s1">&#39;@/assets/css/global.css&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="nt">配置全局自定义设置</span>
</span></span><span class="line"><span class="cl">    <span class="nt">import</span> <span class="nt">settings</span> <span class="nt">from</span> <span class="s1">&#39;@/assets/js/settings&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">Vue</span><span class="p">.</span><span class="nc">prototype</span><span class="o">.$</span><span class="nt">settings</span> <span class="o">=</span> <span class="nt">settings</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="nt">在所有需要与后台交互的组件中</span><span class="err">：</span><span class="nt">this</span><span class="o">.$</span><span class="nt">settings</span><span class="p">.</span><span class="nc">base_url</span> <span class="o">+</span> <span class="s1">&#39;再拼接具体后台路由&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">#</span> <span class="nt">在assets下的css中加入global</span><span class="p">.</span><span class="nc">css</span>
</span></span><span class="line"><span class="cl">    <span class="c">/* 声明全局样式和项目的初始化样式 */</span>
</span></span><span class="line"><span class="cl">    <span class="nt">body</span><span class="o">,</span> <span class="nt">h1</span><span class="o">,</span> <span class="nt">h2</span><span class="o">,</span> <span class="nt">h3</span><span class="o">,</span> <span class="nt">h4</span><span class="o">,</span> <span class="nt">h5</span><span class="o">,</span> <span class="nt">h6</span><span class="o">,</span> <span class="nt">p</span><span class="o">,</span> <span class="nt">table</span><span class="o">,</span> <span class="nt">tr</span><span class="o">,</span> <span class="nt">td</span><span class="o">,</span> <span class="nt">ul</span><span class="o">,</span> <span class="nt">li</span><span class="o">,</span> <span class="nt">a</span><span class="o">,</span> <span class="nt">form</span><span class="o">,</span> <span class="nt">input</span><span class="o">,</span> <span class="nt">select</span><span class="o">,</span> <span class="nt">option</span><span class="o">,</span> <span class="nt">textarea</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">padding</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">font-size</span><span class="p">:</span> <span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">a</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">color</span><span class="p">:</span> <span class="mh">#333</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">ul</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">list-style</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">table</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">border-collapse</span><span class="p">:</span> <span class="kc">collapse</span><span class="p">;</span> <span class="c">/* 合并边框 */</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="err">#</span> <span class="nt">在assets下的js中加入settings</span><span class="p">.</span><span class="nc">js</span>
</span></span><span class="line"><span class="cl">    <span class="nt">export</span> <span class="nt">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">base_url</span><span class="p">:</span> <span class="s1">&#39;http://127.0.0.1:8000&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="83-前台配置">8.3 前台配置</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="err">#</span><span class="nx">安装</span>
</span></span><span class="line"><span class="cl">    <span class="nx">cnpm</span> <span class="nx">install</span> <span class="nx">axios</span>
</span></span><span class="line"><span class="cl">    <span class="nx">cnpm</span> <span class="nx">install</span> <span class="nx">vue</span><span class="o">-</span><span class="nx">cookies</span>
</span></span><span class="line"><span class="cl">    <span class="nx">cnpm</span> <span class="nx">install</span> <span class="nx">element</span><span class="o">-</span><span class="nx">ui</span>
</span></span><span class="line"><span class="cl">    <span class="nx">cnpm</span> <span class="nx">install</span> <span class="nx">jquery</span>
</span></span><span class="line"><span class="cl">    <span class="nx">cnpm</span> <span class="nx">install</span> <span class="nx">bootstrap</span><span class="err">@</span><span class="mi">3</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span><span class="nx">在main</span><span class="p">.</span><span class="nx">js中配置</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//axios配置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">&#39;axios&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Vue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">$axios</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// vue-cookies配置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">import</span> <span class="nx">cookies</span> <span class="nx">from</span> <span class="s1">&#39;vue-cookies&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Vue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">$cookies</span> <span class="o">=</span> <span class="nx">cookies</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ElementUI的配置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">import</span> <span class="nx">ElementUI</span> <span class="nx">from</span> <span class="s1">&#39;element-ui&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">import</span> <span class="s1">&#39;element-ui/lib/theme-chalk/index.css&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">ElementUI</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// bootstrap配置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">import</span> <span class="s1">&#39;bootstrap&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">import</span> <span class="s1">&#39;bootstrap/dist/css/bootstrap.min.css&#39;</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span><span class="nx">jquery配置</span><span class="err">，</span><span class="nx">项目根目录下创建vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">webpack</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;webpack&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">configureWebpack</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">ProvidePlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">$</span><span class="o">:</span> <span class="s2">&#34;jquery&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">jQuery</span><span class="o">:</span> <span class="s2">&#34;jquery&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;window.jQuery&#34;</span><span class="o">:</span> <span class="s2">&#34;jquery&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;window.$&#34;</span><span class="o">:</span> <span class="s2">&#34;jquery&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">Popper</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;popper.js&#34;</span><span class="p">,</span> <span class="s2">&#34;default&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">})</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="84-luffy尾部组件">8.4 luffy尾部组件</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="err">#</span><span class="nx">footer</span><span class="p">.</span><span class="nx">vue</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;footer&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">关于我们</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">联系我们</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">商务合作</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">帮助中心</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">意见反馈</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="nx">新手指南</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="nx">Copyright</span> <span class="err">©</span> <span class="nx">luffycity</span><span class="p">.</span><span class="nx">com版权所有</span> <span class="o">|</span> <span class="nx">京ICP备17072161号</span><span class="o">-</span><span class="mi">1</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Footer&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">footer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">width</span><span class="o">:</span> <span class="mi">100</span><span class="o">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">height</span><span class="o">:</span> <span class="mi">128</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">background</span><span class="o">:</span> <span class="err">#</span><span class="mi">25292</span><span class="nx">e</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">fff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">footer</span> <span class="nx">ul</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="nx">auto</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">padding</span><span class="o">-</span><span class="nx">top</span><span class="o">:</span> <span class="mi">38</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">width</span><span class="o">:</span> <span class="mi">810</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">footer</span> <span class="nx">ul</span> <span class="nx">li</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">width</span><span class="o">:</span> <span class="mi">112</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">14</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">footer</span> <span class="nx">ul</span><span class="o">::</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">content</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">clear</span><span class="o">:</span> <span class="nx">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">footer</span> <span class="nx">p</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">12</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="85-轮播图接口">8.5 轮播图接口</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#urls.py</span>
</span></span><span class="line"><span class="cl"><span class="c1">####1  urls.py </span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework.routers</span> <span class="kn">import</span>  <span class="n">SimpleRouter</span>
</span></span><span class="line"><span class="cl"><span class="n">router</span><span class="o">=</span><span class="n">SimpleRouter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">router</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;banner&#39;</span><span class="p">,</span><span class="n">views</span><span class="o">.</span><span class="n">BannerView</span><span class="p">,</span><span class="s1">&#39;banner&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># path(&#39;banner/&#39;, views.BannerView.as_view()),</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">router</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">####2 views.py</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework.viewsets</span> <span class="kn">import</span> <span class="n">GenericViewSet</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework.mixins</span> <span class="kn">import</span> <span class="n">ListModelMixin</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">BannerView</span><span class="p">(</span><span class="n">GenericViewSet</span><span class="p">,</span><span class="n">ListModelMixin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 无论有多少条待展示的数据，最多就展示3条</span>
</span></span><span class="line"><span class="cl">    <span class="n">queryset</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Banner</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_delete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">is_show</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;display_order&#39;</span><span class="p">)[:</span><span class="n">settings</span><span class="o">.</span><span class="n">BANNER_COUNTER</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">BannerModelSerilaizer</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">### 3 serializer.py</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">serializers</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">BannerModelSerilaizer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Banner</span>
</span></span><span class="line"><span class="cl">        <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;link&#39;</span><span class="p">,</span><span class="s1">&#39;img&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="c1">### 4 models.py</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">utils.models</span> <span class="kn">import</span> <span class="n">BaseModel</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Banner</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span><span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;图片名字&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">img</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s1">&#39;banner&#39;</span><span class="p">,</span><span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;轮播图&#39;</span><span class="p">,</span><span class="n">help_text</span><span class="o">=</span><span class="s1">&#39;图片尺寸必须是：3840*800&#39;</span><span class="p">,</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">link</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span><span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;跳转连接&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">info</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;图片简介&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># type=models.IntegerField(choices=)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span></span><span class="line"><span class="cl"><span class="c1">####5 utils/models.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">BaseModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">create_time</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;创建时间&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">update_time</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;最后更新时间&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">is_delete</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;是否删除&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">is_show</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;是否展示&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">display_order</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">abstract</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># 一定不要忘了</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="c1">### 6 settings/const.py</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 首页轮播图个数</span>
</span></span><span class="line"><span class="cl"><span class="n">BANNER_COUNTER</span><span class="o">=</span><span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#### 7 settings/dev.py</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">.const</span> <span class="kn">import</span> <span class="o">*</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="86-轮播图组件">8.6 轮播图组件</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="err">#</span><span class="nx">Banner</span><span class="p">.</span><span class="nx">vue</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;banner&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">el-carousel</span> <span class="na">height</span><span class="o">=</span><span class="s">&#34;400px&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">el-carousel-item</span> <span class="nt">v-for</span><span class="s">=&#34;item in banner_list&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;!--&lt;img src=&#34;../assets/img/banner1.png&#34; alt=&#34;&#34;&gt;--&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;router-link :to=&#34;item.link&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;img :src=&#34;item.img&#34; :alt=&#34;item.name&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="err">&lt;/</span><span class="na">router</span><span class="nt">-link</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="o">&lt;</span><span class="err">/el-carousel-item&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;</span><span class="err">/el-carousel&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Banner&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// data:function(){},
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">banner_list</span><span class="o">:</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//当banner组件一创建，就向后台发请求，拿回轮播图数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">$axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$settings</span><span class="p">.</span><span class="nx">base_url</span> <span class="o">+</span> <span class="s1">&#39;/home/banner/&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">banner_list</span><span class="o">=</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span>
</span></span><span class="line"><span class="cl">                <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="p">})</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">carousel__item</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">height</span><span class="o">:</span> <span class="mi">400</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">min</span><span class="o">-</span><span class="nx">width</span><span class="o">:</span> <span class="mi">1200</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">carousel__item</span> <span class="nx">img</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">height</span><span class="o">:</span> <span class="mi">400</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="cm">/*margin-left: 20px;*/</span>
</span></span><span class="line"><span class="cl">            <span class="cm">/*margin-left: calc(50% - 1920px / 2);*/</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="err">#</span><span class="nx">src</span><span class="err">\</span><span class="nx">router</span><span class="err">\</span><span class="nx">index</span><span class="p">.</span><span class="nx">js</span>
</span></span><span class="line"><span class="cl">	<span class="err">#</span><span class="nx">路由设置</span>
</span></span><span class="line"><span class="cl">	<span class="kr">const</span> <span class="nx">routes</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Home&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">component</span><span class="o">:</span> <span class="nx">Home</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/free-course&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;FreeCourse&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">component</span><span class="o">:</span> <span class="nx">FreeCourse</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/light-course&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;LightCourse&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">component</span><span class="o">:</span> <span class="nx">LightCourse</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/actual-course&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;ActualCourse&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">component</span><span class="o">:</span> <span class="nx">ActualCourse</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="2-登录注册">2 登录注册</h2>
<h3 id="21-vue登录界面">2.1 vue登录界面</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="err">#</span> <span class="nx">Login</span><span class="p">.</span><span class="nx">vue</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;login&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">span</span> <span class="nt">@click</span><span class="s">=&#34;close_login&#34;</span><span class="p">&gt;</span><span class="na">X</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Login&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">methods</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">close_login</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">//子传父组件 this.$emit,给父组件传递一个事件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s2">&#34;close&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">login</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">width</span><span class="o">:</span> <span class="mi">100</span><span class="nx">vw</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">height</span><span class="o">:</span> <span class="mi">100</span><span class="nx">vw</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">position</span><span class="o">:</span> <span class="nx">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">z</span><span class="o">-</span><span class="nx">index</span><span class="o">:</span> <span class="mi">666</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nx">span</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">30</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="err">#</span> <span class="nx">Head</span><span class="p">.</span><span class="nx">vue</span>
</span></span><span class="line"><span class="cl">    <span class="err">#</span><span class="nx">template中</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;right-part&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span> <span class="nt">@click</span><span class="s">=&#34;pull_login&#34;</span><span class="p">&gt;</span><span class="na">登录</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;line&#34;</span><span class="p">&gt;</span><span class="o">|</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="nx">注册</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">Login</span> <span class="na">v</span><span class="nt">-if</span><span class="err">=&#34;</span><span class="na">is_login</span><span class="err">&#34;</span> <span class="nt">@close</span><span class="s">=&#34;close&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--</span><span class="nx">is_login是True就显示</span><span class="err">，</span><span class="nx">false就不显示</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="err">#</span> <span class="nx">js中</span>
</span></span><span class="line"><span class="cl">    <span class="nx">pull_login</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="nx">is_login</span><span class="o">=</span><span class="kc">true</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">close</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="nx">is_login</span><span class="o">=</span><span class="kc">false</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="22-登录注册模态框">2.2 登录注册模态框</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span><span class="lnt">331
</span><span class="lnt">332
</span><span class="lnt">333
</span><span class="lnt">334
</span><span class="lnt">335
</span><span class="lnt">336
</span><span class="lnt">337
</span><span class="lnt">338
</span><span class="lnt">339
</span><span class="lnt">340
</span><span class="lnt">341
</span><span class="lnt">342
</span><span class="lnt">343
</span><span class="lnt">344
</span><span class="lnt">345
</span><span class="lnt">346
</span><span class="lnt">347
</span><span class="lnt">348
</span><span class="lnt">349
</span><span class="lnt">350
</span><span class="lnt">351
</span><span class="lnt">352
</span><span class="lnt">353
</span><span class="lnt">354
</span><span class="lnt">355
</span><span class="lnt">356
</span><span class="lnt">357
</span><span class="lnt">358
</span><span class="lnt">359
</span><span class="lnt">360
</span><span class="lnt">361
</span><span class="lnt">362
</span><span class="lnt">363
</span><span class="lnt">364
</span><span class="lnt">365
</span><span class="lnt">366
</span><span class="lnt">367
</span><span class="lnt">368
</span><span class="lnt">369
</span><span class="lnt">370
</span><span class="lnt">371
</span><span class="lnt">372
</span><span class="lnt">373
</span><span class="lnt">374
</span><span class="lnt">375
</span><span class="lnt">376
</span><span class="lnt">377
</span><span class="lnt">378
</span><span class="lnt">379
</span><span class="lnt">380
</span><span class="lnt">381
</span><span class="lnt">382
</span><span class="lnt">383
</span><span class="lnt">384
</span><span class="lnt">385
</span><span class="lnt">386
</span><span class="lnt">387
</span><span class="lnt">388
</span><span class="lnt">389
</span><span class="lnt">390
</span><span class="lnt">391
</span><span class="lnt">392
</span><span class="lnt">393
</span><span class="lnt">394
</span><span class="lnt">395
</span><span class="lnt">396
</span><span class="lnt">397
</span><span class="lnt">398
</span><span class="lnt">399
</span><span class="lnt">400
</span><span class="lnt">401
</span><span class="lnt">402
</span><span class="lnt">403
</span><span class="lnt">404
</span><span class="lnt">405
</span><span class="lnt">406
</span><span class="lnt">407
</span><span class="lnt">408
</span><span class="lnt">409
</span><span class="lnt">410
</span><span class="lnt">411
</span><span class="lnt">412
</span><span class="lnt">413
</span><span class="lnt">414
</span><span class="lnt">415
</span><span class="lnt">416
</span><span class="lnt">417
</span><span class="lnt">418
</span><span class="lnt">419
</span><span class="lnt">420
</span><span class="lnt">421
</span><span class="lnt">422
</span><span class="lnt">423
</span><span class="lnt">424
</span><span class="lnt">425
</span><span class="lnt">426
</span><span class="lnt">427
</span><span class="lnt">428
</span><span class="lnt">429
</span><span class="lnt">430
</span><span class="lnt">431
</span><span class="lnt">432
</span><span class="lnt">433
</span><span class="lnt">434
</span><span class="lnt">435
</span><span class="lnt">436
</span><span class="lnt">437
</span><span class="lnt">438
</span><span class="lnt">439
</span><span class="lnt">440
</span><span class="lnt">441
</span><span class="lnt">442
</span><span class="lnt">443
</span><span class="lnt">444
</span><span class="lnt">445
</span><span class="lnt">446
</span><span class="lnt">447
</span><span class="lnt">448
</span><span class="lnt">449
</span><span class="lnt">450
</span><span class="lnt">451
</span><span class="lnt">452
</span><span class="lnt">453
</span><span class="lnt">454
</span><span class="lnt">455
</span><span class="lnt">456
</span><span class="lnt">457
</span><span class="lnt">458
</span><span class="lnt">459
</span><span class="lnt">460
</span><span class="lnt">461
</span><span class="lnt">462
</span><span class="lnt">463
</span><span class="lnt">464
</span><span class="lnt">465
</span><span class="lnt">466
</span><span class="lnt">467
</span><span class="lnt">468
</span><span class="lnt">469
</span><span class="lnt">470
</span><span class="lnt">471
</span><span class="lnt">472
</span><span class="lnt">473
</span><span class="lnt">474
</span><span class="lnt">475
</span><span class="lnt">476
</span><span class="lnt">477
</span><span class="lnt">478
</span><span class="lnt">479
</span><span class="lnt">480
</span><span class="lnt">481
</span><span class="lnt">482
</span><span class="lnt">483
</span><span class="lnt">484
</span><span class="lnt">485
</span><span class="lnt">486
</span><span class="lnt">487
</span><span class="lnt">488
</span><span class="lnt">489
</span><span class="lnt">490
</span><span class="lnt">491
</span><span class="lnt">492
</span><span class="lnt">493
</span><span class="lnt">494
</span><span class="lnt">495
</span><span class="lnt">496
</span><span class="lnt">497
</span><span class="lnt">498
</span><span class="lnt">499
</span><span class="lnt">500
</span><span class="lnt">501
</span><span class="lnt">502
</span><span class="lnt">503
</span><span class="lnt">504
</span><span class="lnt">505
</span><span class="lnt">506
</span><span class="lnt">507
</span><span class="lnt">508
</span><span class="lnt">509
</span><span class="lnt">510
</span><span class="lnt">511
</span><span class="lnt">512
</span><span class="lnt">513
</span><span class="lnt">514
</span><span class="lnt">515
</span><span class="lnt">516
</span><span class="lnt">517
</span><span class="lnt">518
</span><span class="lnt">519
</span><span class="lnt">520
</span><span class="lnt">521
</span><span class="lnt">522
</span><span class="lnt">523
</span><span class="lnt">524
</span><span class="lnt">525
</span><span class="lnt">526
</span><span class="lnt">527
</span><span class="lnt">528
</span><span class="lnt">529
</span><span class="lnt">530
</span><span class="lnt">531
</span><span class="lnt">532
</span><span class="lnt">533
</span><span class="lnt">534
</span><span class="lnt">535
</span><span class="lnt">536
</span><span class="lnt">537
</span><span class="lnt">538
</span><span class="lnt">539
</span><span class="lnt">540
</span><span class="lnt">541
</span><span class="lnt">542
</span><span class="lnt">543
</span><span class="lnt">544
</span><span class="lnt">545
</span><span class="lnt">546
</span><span class="lnt">547
</span><span class="lnt">548
</span><span class="lnt">549
</span><span class="lnt">550
</span><span class="lnt">551
</span><span class="lnt">552
</span><span class="lnt">553
</span><span class="lnt">554
</span><span class="lnt">555
</span><span class="lnt">556
</span><span class="lnt">557
</span><span class="lnt">558
</span><span class="lnt">559
</span><span class="lnt">560
</span><span class="lnt">561
</span><span class="lnt">562
</span><span class="lnt">563
</span><span class="lnt">564
</span><span class="lnt">565
</span><span class="lnt">566
</span><span class="lnt">567
</span><span class="lnt">568
</span><span class="lnt">569
</span><span class="lnt">570
</span><span class="lnt">571
</span><span class="lnt">572
</span><span class="lnt">573
</span><span class="lnt">574
</span><span class="lnt">575
</span><span class="lnt">576
</span><span class="lnt">577
</span><span class="lnt">578
</span><span class="lnt">579
</span><span class="lnt">580
</span><span class="lnt">581
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="err">#</span><span class="nx">src</span><span class="err">\</span><span class="nx">components</span><span class="err">\</span><span class="nx">Login</span><span class="p">.</span><span class="nx">vue</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;login&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;box&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;el-icon-close&#34;</span> <span class="nt">@click</span><span class="s">=&#34;close_login&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;content&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;nav&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">span</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;{active: login_method === &#39;is_pwd&#39;}&#34;</span>
</span></span><span class="line"><span class="cl">                              <span class="nt">@click</span><span class="s">=&#34;change_login_method(&#39;is_pwd&#39;)&#34;</span><span class="p">&gt;</span><span class="na">密码登录</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">span</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;{active: login_method === &#39;is_sms&#39;}&#34;</span>
</span></span><span class="line"><span class="cl">                              <span class="nt">@click</span><span class="s">=&#34;change_login_method(&#39;is_sms&#39;)&#34;</span><span class="p">&gt;</span><span class="na">短信登录</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">el-form</span> <span class="nt">v-if</span><span class="s">=&#34;login_method === &#39;is_pwd&#39;&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-input
</span></span></span><span class="line"><span class="cl"><span class="s">                                placeholder=&#34;用户名/手机号/邮箱&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                prefix-icon=&#34;el-icon-user&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                v-model=&#34;username&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                clearable&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/el-input&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-input
</span></span></span><span class="line"><span class="cl"><span class="s">                                placeholder=&#34;密码&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                prefix-icon=&#34;el-icon-key&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                v-model=&#34;password&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                clearable
</span></span></span><span class="line"><span class="cl"><span class="s">                                show-password&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/el-input&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-button type=&#34;primary&#34;&gt;登录&lt;/el-button&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/el-form&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;el-form v-if=&#34;login_method === &#39;is_sms&#39;&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-input
</span></span></span><span class="line"><span class="cl"><span class="s">                                placeholder=&#34;手机号&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                prefix-icon=&#34;el-icon-phone-outline&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                v-model=&#34;mobile&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                clearable
</span></span></span><span class="line"><span class="cl"><span class="s">                                @blur=&#34;check_mobile&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/el-input&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-input
</span></span></span><span class="line"><span class="cl"><span class="s">                                placeholder=&#34;验证码&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                prefix-icon=&#34;el-icon-chat-line-round&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                v-model=&#34;sms&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                clearable&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;template slot=&#34;append&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                                &lt;span class=&#34;sms&#34; @click=&#34;send_sms&#34;&gt;{{ sms_interval }}&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;/template&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/el-input&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-button type=&#34;primary&#34;&gt;登录&lt;/el-button&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/el-form&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;div class=&#34;foot&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;span @click=&#34;go_register&#34;&gt;立即注册&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">            &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">        &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">    &lt;/template&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">    &lt;script&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">        export default {
</span></span></span><span class="line"><span class="cl"><span class="s">            name: &#34;Login&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">            data() {
</span></span></span><span class="line"><span class="cl"><span class="s">                return {
</span></span></span><span class="line"><span class="cl"><span class="s">                    username: &#39;&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">                    password: &#39;&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">                    mobile: &#39;&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">                    sms: &#39;&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">                    login_method: &#39;is_pwd&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">                    sms_interval: &#39;获取验证码&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">                    is_send: false,
</span></span></span><span class="line"><span class="cl"><span class="s">                }
</span></span></span><span class="line"><span class="cl"><span class="s">            },
</span></span></span><span class="line"><span class="cl"><span class="s">            methods: {
</span></span></span><span class="line"><span class="cl"><span class="s">                close_login() {
</span></span></span><span class="line"><span class="cl"><span class="s">                    this.$emit(&#39;close&#39;)
</span></span></span><span class="line"><span class="cl"><span class="s">                },
</span></span></span><span class="line"><span class="cl"><span class="s">                go_register() {
</span></span></span><span class="line"><span class="cl"><span class="s">                    this.$emit(&#39;go&#39;)
</span></span></span><span class="line"><span class="cl"><span class="s">                },
</span></span></span><span class="line"><span class="cl"><span class="s">                change_login_method(method) {
</span></span></span><span class="line"><span class="cl"><span class="s">                    this.login_method = method;
</span></span></span><span class="line"><span class="cl"><span class="s">                },
</span></span></span><span class="line"><span class="cl"><span class="s">                check_mobile() {
</span></span></span><span class="line"><span class="cl"><span class="s">                    if (!this.mobile) return;
</span></span></span><span class="line"><span class="cl"><span class="s">                    if (!this.mobile.match(/^1[3-9][0-9]{9}$/)) {
</span></span></span><span class="line"><span class="cl"><span class="s">                        this.$message({
</span></span></span><span class="line"><span class="cl"><span class="s">                            message: &#39;手机号有误&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">                            type: &#39;warning&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">                            duration: 1000,
</span></span></span><span class="line"><span class="cl"><span class="s">                            onClose: () =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="s">                                this.mobile = &#39;&#39;;
</span></span></span><span class="line"><span class="cl"><span class="s">                            }
</span></span></span><span class="line"><span class="cl"><span class="s">                        });
</span></span></span><span class="line"><span class="cl"><span class="s">                        return false;
</span></span></span><span class="line"><span class="cl"><span class="s">                    }
</span></span></span><span class="line"><span class="cl"><span class="s">                    this.is_send = true;
</span></span></span><span class="line"><span class="cl"><span class="s">                },
</span></span></span><span class="line"><span class="cl"><span class="s">                send_sms() {
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                    if (!this.is_send) return;
</span></span></span><span class="line"><span class="cl"><span class="s">                    this.is_send = false;
</span></span></span><span class="line"><span class="cl"><span class="s">                    let sms_interval_time = 60;
</span></span></span><span class="line"><span class="cl"><span class="s">                    this.sms_interval = &#34;发送中...&#34;;
</span></span></span><span class="line"><span class="cl"><span class="s">                    let timer = setInterval(() =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="s">                        if (sms_interval_time &lt;= 1) {
</span></span></span><span class="line"><span class="cl"><span class="s">                            clearInterval(timer);
</span></span></span><span class="line"><span class="cl"><span class="s">                            this.sms_interval = &#34;获取验证码&#34;;
</span></span></span><span class="line"><span class="cl"><span class="s">                            this.is_send = true; // 重新回复点击发送功能的条件
</span></span></span><span class="line"><span class="cl"><span class="s">                        } else {
</span></span></span><span class="line"><span class="cl"><span class="s">                            sms_interval_time -= 1;
</span></span></span><span class="line"><span class="cl"><span class="s">                            this.sms_interval = `${sms_interval_time}秒后再发`;
</span></span></span><span class="line"><span class="cl"><span class="s">                        }
</span></span></span><span class="line"><span class="cl"><span class="s">                    }, 1000);
</span></span></span><span class="line"><span class="cl"><span class="s">                }
</span></span></span><span class="line"><span class="cl"><span class="s">            }
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">    &lt;/script&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">    &lt;style scoped&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">        .login {
</span></span></span><span class="line"><span class="cl"><span class="s">            width: 100vw;
</span></span></span><span class="line"><span class="cl"><span class="s">            height: 100vh;
</span></span></span><span class="line"><span class="cl"><span class="s">            position: fixed;
</span></span></span><span class="line"><span class="cl"><span class="s">            top: 0;
</span></span></span><span class="line"><span class="cl"><span class="s">            left: 0;
</span></span></span><span class="line"><span class="cl"><span class="s">            z-index: 10;
</span></span></span><span class="line"><span class="cl"><span class="s">            background-color: rgba(0, 0, 0, 0.3);
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .box {
</span></span></span><span class="line"><span class="cl"><span class="s">            width: 400px;
</span></span></span><span class="line"><span class="cl"><span class="s">            height: 420px;
</span></span></span><span class="line"><span class="cl"><span class="s">            background-color: white;
</span></span></span><span class="line"><span class="cl"><span class="s">            border-radius: 10px;
</span></span></span><span class="line"><span class="cl"><span class="s">            position: relative;
</span></span></span><span class="line"><span class="cl"><span class="s">            top: calc(50vh - 210px);
</span></span></span><span class="line"><span class="cl"><span class="s">            left: calc(50vw - 200px);
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .el-icon-close {
</span></span></span><span class="line"><span class="cl"><span class="s">            position: absolute;
</span></span></span><span class="line"><span class="cl"><span class="s">            font-weight: bold;
</span></span></span><span class="line"><span class="cl"><span class="s">            font-size: 20px;
</span></span></span><span class="line"><span class="cl"><span class="s">            top: 10px;
</span></span></span><span class="line"><span class="cl"><span class="s">            right: 10px;
</span></span></span><span class="line"><span class="cl"><span class="s">            cursor: pointer;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .el-icon-close:hover {
</span></span></span><span class="line"><span class="cl"><span class="s">            color: darkred;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .content {
</span></span></span><span class="line"><span class="cl"><span class="s">            position: absolute;
</span></span></span><span class="line"><span class="cl"><span class="s">            top: 40px;
</span></span></span><span class="line"><span class="cl"><span class="s">            width: 280px;
</span></span></span><span class="line"><span class="cl"><span class="s">            left: 60px;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .nav {
</span></span></span><span class="line"><span class="cl"><span class="s">            font-size: 20px;
</span></span></span><span class="line"><span class="cl"><span class="s">            height: 38px;
</span></span></span><span class="line"><span class="cl"><span class="s">            border-bottom: 2px solid darkgrey;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .nav &gt; span {
</span></span></span><span class="line"><span class="cl"><span class="s">            margin: 0 20px 0 35px;
</span></span></span><span class="line"><span class="cl"><span class="s">            color: darkgrey;
</span></span></span><span class="line"><span class="cl"><span class="s">            user-select: none;
</span></span></span><span class="line"><span class="cl"><span class="s">            cursor: pointer;
</span></span></span><span class="line"><span class="cl"><span class="s">            padding-bottom: 10px;
</span></span></span><span class="line"><span class="cl"><span class="s">            border-bottom: 2px solid darkgrey;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .nav &gt; span.active {
</span></span></span><span class="line"><span class="cl"><span class="s">            color: black;
</span></span></span><span class="line"><span class="cl"><span class="s">            border-bottom: 3px solid black;
</span></span></span><span class="line"><span class="cl"><span class="s">            padding-bottom: 9px;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .el-input, .el-button {
</span></span></span><span class="line"><span class="cl"><span class="s">            margin-top: 40px;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .el-button {
</span></span></span><span class="line"><span class="cl"><span class="s">            width: 100%;
</span></span></span><span class="line"><span class="cl"><span class="s">            font-size: 18px;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .foot &gt; span {
</span></span></span><span class="line"><span class="cl"><span class="s">            float: right;
</span></span></span><span class="line"><span class="cl"><span class="s">            margin-top: 20px;
</span></span></span><span class="line"><span class="cl"><span class="s">            color: orange;
</span></span></span><span class="line"><span class="cl"><span class="s">            cursor: pointer;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .sms {
</span></span></span><span class="line"><span class="cl"><span class="s">            color: orange;
</span></span></span><span class="line"><span class="cl"><span class="s">            cursor: pointer;
</span></span></span><span class="line"><span class="cl"><span class="s">            display: inline-block;
</span></span></span><span class="line"><span class="cl"><span class="s">            width: 70px;
</span></span></span><span class="line"><span class="cl"><span class="s">            text-align: center;
</span></span></span><span class="line"><span class="cl"><span class="s">            user-select: none;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">    &lt;/style&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">#src\components\Register.vue
</span></span></span><span class="line"><span class="cl"><span class="s">    &lt;template&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">        &lt;div class=&#34;register&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">            &lt;div class=&#34;box&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                &lt;i class=&#34;el-icon-close&#34; @click=&#34;close_register&#34;&gt;&lt;/i&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                &lt;div class=&#34;content&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;div class=&#34;nav&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;span class=&#34;active&#34;&gt;新用户注册&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;el-form&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-input
</span></span></span><span class="line"><span class="cl"><span class="s">                                placeholder=&#34;手机号&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                prefix-icon=&#34;el-icon-phone-outline&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                v-model=&#34;mobile&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                clearable
</span></span></span><span class="line"><span class="cl"><span class="s">                                @blur=&#34;check_mobile&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/el-input&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-input
</span></span></span><span class="line"><span class="cl"><span class="s">                                placeholder=&#34;密码&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                prefix-icon=&#34;el-icon-key&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                v-model=&#34;password&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                clearable
</span></span></span><span class="line"><span class="cl"><span class="s">                                show-password&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/el-input&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-input
</span></span></span><span class="line"><span class="cl"><span class="s">                                placeholder=&#34;验证码&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                prefix-icon=&#34;el-icon-chat-line-round&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                v-model=&#34;sms&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                clearable&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;template slot=&#34;append&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                                &lt;span class=&#34;sms&#34; @click=&#34;send_sms&#34;&gt;{{ sms_interval }}&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;/template&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/el-input&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-button type=&#34;primary&#34;&gt;注册&lt;/el-button&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/el-form&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;div class=&#34;foot&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;span @click=&#34;go_login&#34;&gt;立即登录&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">            &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">        &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">    &lt;/template&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">    &lt;script&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">        export default {
</span></span></span><span class="line"><span class="cl"><span class="s">            name: &#34;Register&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">            data() {
</span></span></span><span class="line"><span class="cl"><span class="s">                return {
</span></span></span><span class="line"><span class="cl"><span class="s">                    mobile: &#39;&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">                    password: &#39;&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">                    sms: &#39;&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">                    sms_interval: &#39;获取验证码&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">                    is_send: false,
</span></span></span><span class="line"><span class="cl"><span class="s">                }
</span></span></span><span class="line"><span class="cl"><span class="s">            },
</span></span></span><span class="line"><span class="cl"><span class="s">            methods: {
</span></span></span><span class="line"><span class="cl"><span class="s">                close_register() {
</span></span></span><span class="line"><span class="cl"><span class="s">                    this.$emit(&#39;close&#39;, false)
</span></span></span><span class="line"><span class="cl"><span class="s">                },
</span></span></span><span class="line"><span class="cl"><span class="s">                go_login() {
</span></span></span><span class="line"><span class="cl"><span class="s">                    this.$emit(&#39;go&#39;)
</span></span></span><span class="line"><span class="cl"><span class="s">                },
</span></span></span><span class="line"><span class="cl"><span class="s">                check_mobile() {
</span></span></span><span class="line"><span class="cl"><span class="s">                    if (!this.mobile) return;
</span></span></span><span class="line"><span class="cl"><span class="s">                    if (!this.mobile.match(/^1[3-9][0-9]{9}$/)) {
</span></span></span><span class="line"><span class="cl"><span class="s">                        this.$message({
</span></span></span><span class="line"><span class="cl"><span class="s">                            message: &#39;手机号有误&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">                            type: &#39;warning&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">                            duration: 1000,
</span></span></span><span class="line"><span class="cl"><span class="s">                            onClose: () =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="s">                                this.mobile = &#39;&#39;;
</span></span></span><span class="line"><span class="cl"><span class="s">                            }
</span></span></span><span class="line"><span class="cl"><span class="s">                        });
</span></span></span><span class="line"><span class="cl"><span class="s">                        return false;
</span></span></span><span class="line"><span class="cl"><span class="s">                    }
</span></span></span><span class="line"><span class="cl"><span class="s">                    this.is_send = true;
</span></span></span><span class="line"><span class="cl"><span class="s">                },
</span></span></span><span class="line"><span class="cl"><span class="s">                send_sms() {
</span></span></span><span class="line"><span class="cl"><span class="s">                    if (!this.is_send) return;
</span></span></span><span class="line"><span class="cl"><span class="s">                    this.is_send = false;
</span></span></span><span class="line"><span class="cl"><span class="s">                    let sms_interval_time = 60;
</span></span></span><span class="line"><span class="cl"><span class="s">                    this.sms_interval = &#34;发送中...&#34;;
</span></span></span><span class="line"><span class="cl"><span class="s">                    let timer = setInterval(() =&gt; {
</span></span></span><span class="line"><span class="cl"><span class="s">                        if (sms_interval_time &lt;= 1) {
</span></span></span><span class="line"><span class="cl"><span class="s">                            clearInterval(timer);
</span></span></span><span class="line"><span class="cl"><span class="s">                            this.sms_interval = &#34;获取验证码&#34;;
</span></span></span><span class="line"><span class="cl"><span class="s">                            this.is_send = true; // 重新回复点击发送功能的条件
</span></span></span><span class="line"><span class="cl"><span class="s">                        } else {
</span></span></span><span class="line"><span class="cl"><span class="s">                            sms_interval_time -= 1;
</span></span></span><span class="line"><span class="cl"><span class="s">                            this.sms_interval = `${sms_interval_time}秒后再发`;
</span></span></span><span class="line"><span class="cl"><span class="s">                        }
</span></span></span><span class="line"><span class="cl"><span class="s">                    }, 1000);
</span></span></span><span class="line"><span class="cl"><span class="s">                }
</span></span></span><span class="line"><span class="cl"><span class="s">            }
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">    &lt;/script&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">    &lt;style scoped&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">        .register {
</span></span></span><span class="line"><span class="cl"><span class="s">            width: 100vw;
</span></span></span><span class="line"><span class="cl"><span class="s">            height: 100vh;
</span></span></span><span class="line"><span class="cl"><span class="s">            position: fixed;
</span></span></span><span class="line"><span class="cl"><span class="s">            top: 0;
</span></span></span><span class="line"><span class="cl"><span class="s">            left: 0;
</span></span></span><span class="line"><span class="cl"><span class="s">            z-index: 10;
</span></span></span><span class="line"><span class="cl"><span class="s">            background-color: rgba(0, 0, 0, 0.3);
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .box {
</span></span></span><span class="line"><span class="cl"><span class="s">            width: 400px;
</span></span></span><span class="line"><span class="cl"><span class="s">            height: 480px;
</span></span></span><span class="line"><span class="cl"><span class="s">            background-color: white;
</span></span></span><span class="line"><span class="cl"><span class="s">            border-radius: 10px;
</span></span></span><span class="line"><span class="cl"><span class="s">            position: relative;
</span></span></span><span class="line"><span class="cl"><span class="s">            top: calc(50vh - 240px);
</span></span></span><span class="line"><span class="cl"><span class="s">            left: calc(50vw - 200px);
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .el-icon-close {
</span></span></span><span class="line"><span class="cl"><span class="s">            position: absolute;
</span></span></span><span class="line"><span class="cl"><span class="s">            font-weight: bold;
</span></span></span><span class="line"><span class="cl"><span class="s">            font-size: 20px;
</span></span></span><span class="line"><span class="cl"><span class="s">            top: 10px;
</span></span></span><span class="line"><span class="cl"><span class="s">            right: 10px;
</span></span></span><span class="line"><span class="cl"><span class="s">            cursor: pointer;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .el-icon-close:hover {
</span></span></span><span class="line"><span class="cl"><span class="s">            color: darkred;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .content {
</span></span></span><span class="line"><span class="cl"><span class="s">            position: absolute;
</span></span></span><span class="line"><span class="cl"><span class="s">            top: 40px;
</span></span></span><span class="line"><span class="cl"><span class="s">            width: 280px;
</span></span></span><span class="line"><span class="cl"><span class="s">            left: 60px;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .nav {
</span></span></span><span class="line"><span class="cl"><span class="s">            font-size: 20px;
</span></span></span><span class="line"><span class="cl"><span class="s">            height: 38px;
</span></span></span><span class="line"><span class="cl"><span class="s">            border-bottom: 2px solid darkgrey;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .nav &gt; span {
</span></span></span><span class="line"><span class="cl"><span class="s">            margin-left: 90px;
</span></span></span><span class="line"><span class="cl"><span class="s">            color: darkgrey;
</span></span></span><span class="line"><span class="cl"><span class="s">            user-select: none;
</span></span></span><span class="line"><span class="cl"><span class="s">            cursor: pointer;
</span></span></span><span class="line"><span class="cl"><span class="s">            padding-bottom: 10px;
</span></span></span><span class="line"><span class="cl"><span class="s">            border-bottom: 2px solid darkgrey;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .nav &gt; span.active {
</span></span></span><span class="line"><span class="cl"><span class="s">            color: black;
</span></span></span><span class="line"><span class="cl"><span class="s">            border-bottom: 3px solid black;
</span></span></span><span class="line"><span class="cl"><span class="s">            padding-bottom: 9px;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .el-input, .el-button {
</span></span></span><span class="line"><span class="cl"><span class="s">            margin-top: 40px;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .el-button {
</span></span></span><span class="line"><span class="cl"><span class="s">            width: 100%;
</span></span></span><span class="line"><span class="cl"><span class="s">            font-size: 18px;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .foot &gt; span {
</span></span></span><span class="line"><span class="cl"><span class="s">            float: right;
</span></span></span><span class="line"><span class="cl"><span class="s">            margin-top: 20px;
</span></span></span><span class="line"><span class="cl"><span class="s">            color: orange;
</span></span></span><span class="line"><span class="cl"><span class="s">            cursor: pointer;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">        .sms {
</span></span></span><span class="line"><span class="cl"><span class="s">            color: orange;
</span></span></span><span class="line"><span class="cl"><span class="s">            cursor: pointer;
</span></span></span><span class="line"><span class="cl"><span class="s">            display: inline-block;
</span></span></span><span class="line"><span class="cl"><span class="s">            width: 70px;
</span></span></span><span class="line"><span class="cl"><span class="s">            text-align: center;
</span></span></span><span class="line"><span class="cl"><span class="s">            user-select: none;
</span></span></span><span class="line"><span class="cl"><span class="s">        }
</span></span></span><span class="line"><span class="cl"><span class="s">    &lt;/style&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">#src\components\Head.vue
</span></span></span><span class="line"><span class="cl"><span class="s">    &lt;template&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">        &lt;div class=&#34;header&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">            &lt;div class=&#34;slogan&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                &lt;p&gt;老男孩IT教育 | 帮助有志向的年轻人通过努力学习获得体面的工作和生活&lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">            &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">            &lt;div class=&#34;nav&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                &lt;ul class=&#34;left-part&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;li class=&#34;logo&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;router-link to=&#34;/&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;img src=&#34;../assets/img/head-logo.svg&#34; alt=&#34;&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/router-link&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/li&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;li class=&#34;ele&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;span @click=&#34;goPage(&#39;/free-course&#39;)&#34; :class=&#34;{active: url_path === &#39;/free-course&#39;}&#34;&gt;免费课&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/li&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;li class=&#34;ele&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;span @click=&#34;goPage(&#39;/actual-course&#39;)&#34; :class=&#34;{active: url_path === &#39;/actual-course&#39;}&#34;&gt;实战课&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/li&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;li class=&#34;ele&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;span @click=&#34;goPage(&#39;/light-course&#39;)&#34; :class=&#34;{active: url_path === &#39;/light-course&#39;}&#34;&gt;轻课&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/li&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                &lt;/ul&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                &lt;div class=&#34;right-part&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;div v-if=&#34;!username&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;span @click=&#34;put_login&#34;&gt;登录&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;span class=&#34;line&#34;&gt;|&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;span @click=&#34;put_register&#34;&gt;注册&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;div v-else&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;span &gt;{{username}}&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;span class=&#34;line&#34;&gt;|&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;span @click=&#34;logout&#34;</span><span class="p">&gt;</span><span class="na">注销</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">Login</span> <span class="na">v</span><span class="nt">-if</span><span class="err">=&#34;</span><span class="na">is_login</span><span class="err">&#34;</span> <span class="nt">@close</span><span class="s">=&#34;close_login&#34;</span> <span class="nt">@go</span><span class="s">=&#34;put_register&#34;</span> <span class="nt">@loginsuccess</span><span class="s">=&#34;login_success&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">Register</span> <span class="na">v</span><span class="nt">-if</span><span class="err">=&#34;</span><span class="na">is_register</span><span class="err">&#34;</span> <span class="nt">@close</span><span class="s">=&#34;close_register&#34;</span> <span class="nt">@go</span><span class="s">=&#34;put_login&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">import</span> <span class="nx">Login</span> <span class="nx">from</span> <span class="s1">&#39;./Login&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">import</span> <span class="nx">Register</span> <span class="nx">from</span> <span class="s1">&#39;./Register&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Header&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">url_path</span><span class="o">:</span> <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">url_path</span> <span class="o">||</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">is_login</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">is_register</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">token</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">username</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">goPage</span><span class="p">(</span><span class="nx">url_path</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// 传入的路由如果不是当前所在路径，就跳转
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">url_path</span> <span class="o">!==</span> <span class="nx">url_path</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">url_path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">url_path</span> <span class="o">=</span> <span class="nx">url_path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="nx">put_login</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">is_login</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">is_register</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="nx">put_register</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">is_login</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">is_register</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="nx">close_login</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">is_login</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="nx">close_register</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">is_register</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="nx">login_success</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">username</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="nx">logout</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">//清除cookie
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">//把两个变量值为空
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">this</span><span class="p">.</span><span class="nx">username</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">url_path</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">url_path</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1">//当页面一创建，我就去cookie中取token和username
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">username</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>   <span class="c1">//取到就有值，取不到就为空
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">token</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">)</span>   <span class="c1">//取到就有值，取不到就为空
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">Login</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">Register</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">header</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">white</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">box</span><span class="o">-</span><span class="nx">shadow</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">5</span><span class="nx">px</span> <span class="mi">0</span> <span class="err">#</span><span class="nx">aaa</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">header</span><span class="o">:</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">content</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">clear</span><span class="o">:</span> <span class="nx">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">slogan</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">eee</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">height</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">slogan</span> <span class="nx">p</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">width</span><span class="o">:</span> <span class="mi">1200</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="nx">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">aaa</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">13</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">nav</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">white</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">user</span><span class="o">-</span><span class="nx">select</span><span class="o">:</span> <span class="nx">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">width</span><span class="o">:</span> <span class="mi">1200</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="nx">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">nav</span> <span class="nx">ul</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">padding</span><span class="o">:</span> <span class="mi">15</span><span class="nx">px</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">nav</span> <span class="nx">ul</span><span class="o">:</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">clear</span><span class="o">:</span> <span class="nx">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">nav</span> <span class="nx">ul</span> <span class="nx">li</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">logo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">-</span><span class="nx">right</span><span class="o">:</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">ele</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">ele</span> <span class="nx">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">font</span><span class="o">:</span> <span class="mi">15</span><span class="nx">px</span><span class="o">/</span><span class="mi">36</span><span class="nx">px</span> <span class="s1">&#39;微软雅黑&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">2</span><span class="nx">px</span> <span class="nx">solid</span> <span class="nx">transparent</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">ele</span> <span class="nx">span</span><span class="o">:</span><span class="nx">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">ele</span> <span class="nx">span</span><span class="p">.</span><span class="nx">active</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">right</span><span class="o">-</span><span class="nx">part</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kr">float</span><span class="o">:</span> <span class="nx">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">right</span><span class="o">-</span><span class="nx">part</span> <span class="p">.</span><span class="nx">line</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">right</span><span class="o">-</span><span class="nx">part</span> <span class="nx">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">68</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="23-登录注册接口分析">2.3 登录注册接口分析</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="mi">1</span> <span class="n">是多方式用户登录接口</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span> <span class="n">手机号登录接口</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span> <span class="n">发送验证码接口</span>
</span></span><span class="line"><span class="cl"><span class="mi">4</span> <span class="n">注册接口</span>
</span></span><span class="line"><span class="cl"><span class="mi">5</span> <span class="n">校检手机号是否存在接口</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="24-多种方式登录">2.4 多种方式登录</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\user\views.py</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">luffyapi.utils.response</span> <span class="kn">import</span> <span class="n">APIResponse</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.viewsets</span> <span class="kn">import</span> <span class="n">ViewSet</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">serializer</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.decorators</span> <span class="kn">import</span> <span class="n">action</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">LoginViewSet</span><span class="p">(</span><span class="n">ViewSet</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nd">@action</span><span class="p">(</span><span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">],</span><span class="n">detail</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">request</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">user_ser</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">UserModelSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span><span class="c1">#自定义了全局异常，不需要使用raise_exception=True</span>
</span></span><span class="line"><span class="cl">                <span class="c1">#从序列化对象user_ser.context中获取token和用户名</span>
</span></span><span class="line"><span class="cl">                <span class="n">token</span> <span class="o">=</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="n">username</span> <span class="o">=</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">username</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">msg</span><span class="o">=</span><span class="n">user_ser</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span><span class="c1">#序列化校检失败，返回错误信息</span>
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\user\serializer.py</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#用户序列化器</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">serializers</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.exceptions</span> <span class="kn">import</span> <span class="n">ValidationError</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">UserModelSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">UserModelSerilaizer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">username</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span>
</span></span><span class="line"><span class="cl">        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">extra_kwargs</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;read_only&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;write_only&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 多种方式登录</span>
</span></span><span class="line"><span class="cl">        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_user</span><span class="p">(</span><span class="n">attrs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 签发token</span>
</span></span><span class="line"><span class="cl">        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_token</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 放到context中，我在视图类中可以取出来</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">token</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">attrs</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">_get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">username</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">password</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 多种登录方式</span>
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">re</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;^1[3-9][0-9]</span><span class="si">{9}</span><span class="s1">$&#39;</span><span class="p">,</span> <span class="n">username</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">telephone</span><span class="o">=</span><span class="n">username</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;^.+@.+$&#39;</span><span class="p">,</span> <span class="n">username</span><span class="p">):</span>  <span class="c1"># 邮箱</span>
</span></span><span class="line"><span class="cl">            <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="n">username</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">ret</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">check_password</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">ret</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">user</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s1">&#39;密码错误&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s1">&#39;用户不存在&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">_get_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">rest_framework_jwt.serializers</span> <span class="kn">import</span> <span class="n">jwt_payload_handler</span><span class="p">,</span> <span class="n">jwt_encode_handler</span>
</span></span><span class="line"><span class="cl">        <span class="n">payload</span> <span class="o">=</span> <span class="n">jwt_payload_handler</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>  <span class="c1"># 通过user对象获得payload</span>
</span></span><span class="line"><span class="cl">        <span class="n">token</span> <span class="o">=</span> <span class="n">jwt_encode_handler</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>  <span class="c1"># 通过payload获得token</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">token</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\user\urls.py</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 导入路由对象</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.routers</span> <span class="kn">import</span> <span class="n">SimpleRouter</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span><span class="p">,</span> <span class="n">include</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 实例化路由对象</span>
</span></span><span class="line"><span class="cl">    <span class="n">router</span> <span class="o">=</span> <span class="n">SimpleRouter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 注册路由</span>
</span></span><span class="line"><span class="cl">    <span class="n">router</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">LoginViewSet</span><span class="p">,</span><span class="s1">&#39;login&#39;</span><span class="p">)</span><span class="c1">#不要用as_view(),需要加上方向解析，不然不会报错</span>
</span></span><span class="line"><span class="cl">    <span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 加入路由</span>
</span></span><span class="line"><span class="cl">        <span class="n">path</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">router</span><span class="o">.</span><span class="n">urls</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">ps</span><span class="p">:</span><span class="n">如果遇到报错</span>
</span></span><span class="line"><span class="cl">    <span class="n">报错RuntimeError</span><span class="p">:</span> <span class="n">Model</span> <span class="k">class</span> <span class="nc">apps</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">User</span> <span class="n">doesn</span><span class="s1">&#39;t declare an explicit app_label and isn&#39;</span><span class="n">t</span> <span class="ow">in</span> <span class="n">an</span> <span class="n">application</span> <span class="ow">in</span> <span class="n">INSTALLED_APPS</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">  <span class="n">使用相对路径引用Models模块</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="n">在同时存在多个apps的情况下</span><span class="err">，</span><span class="n">有机会报错</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="25-cookies修改页面登录状态前台注销">2.5 Cookies修改页面登录状态、前台注销</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="mi">1</span> <span class="nx">重点</span><span class="err">，</span><span class="nx">Cookies操作</span>
</span></span><span class="line"><span class="cl">	<span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span><span class="nx">value</span><span class="p">,</span><span class="nx">过期时间</span><span class="p">)</span>	<span class="err">#</span><span class="nx">设置cookies</span><span class="err">，</span><span class="nx">还有过期时间</span>
</span></span><span class="line"><span class="cl">	<span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">)</span>	<span class="err">#</span><span class="nx">获取cookies</span>
</span></span><span class="line"><span class="cl">	<span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">remove</span><span class="p">(;</span><span class="nx">key</span><span class="p">)</span>	<span class="err">#</span><span class="nx">注销cookies</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span> <span class="err">#</span><span class="nx">src</span><span class="err">\</span><span class="nx">components</span><span class="err">\</span><span class="nx">Login</span><span class="p">.</span><span class="nx">vue</span> 
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;header&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;slogan&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="nx">老男孩IT教育</span> <span class="o">|</span> <span class="nx">帮助有志向的年轻人通过努力学习获得体面的工作和生活</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;nav&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;left-part&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;logo&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">router-link</span> <span class="na">to</span><span class="o">=</span><span class="s">&#34;/&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;../assets/img/head-logo.svg&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="err">/router-link&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;ele&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">span</span> <span class="nt">@click</span><span class="s">=&#34;goPage(&#39;/free-course&#39;)&#34;</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;{active: url_path === &#39;/free-course&#39;}&#34;</span><span class="p">&gt;</span><span class="nx">免费课</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;ele&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">span</span> <span class="nt">@click</span><span class="s">=&#34;goPage(&#39;/actual-course&#39;)&#34;</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;{active: url_path === &#39;/actual-course&#39;}&#34;</span><span class="p">&gt;</span><span class="nx">实战课</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;ele&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">span</span> <span class="nt">@click</span><span class="s">=&#34;goPage(&#39;/light-course&#39;)&#34;</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;{active: url_path === &#39;/light-course&#39;}&#34;</span><span class="p">&gt;</span><span class="nx">轻课</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;right-part&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="nt">v-if</span><span class="s">=&#34;!username&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">span</span> <span class="nt">@click</span><span class="s">=&#34;put_login&#34;</span><span class="p">&gt;</span><span class="na">登录</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;line&#34;</span><span class="p">&gt;</span><span class="o">|</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">span</span> <span class="nt">@click</span><span class="s">=&#34;put_register&#34;</span><span class="p">&gt;</span><span class="na">注册</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="nt">v-else</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">span</span> <span class="p">&gt;{{</span><span class="nx">username</span><span class="p">}}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;line&#34;</span><span class="p">&gt;</span><span class="o">|</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">span</span> <span class="nt">@click</span><span class="s">=&#34;logout&#34;</span><span class="p">&gt;</span><span class="na">注销</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">Login</span> <span class="na">v</span><span class="nt">-if</span><span class="err">=&#34;</span><span class="na">is_login</span><span class="err">&#34;</span> <span class="nt">@close</span><span class="s">=&#34;close_login&#34;</span> <span class="nt">@go</span><span class="s">=&#34;put_register&#34;</span> <span class="nt">@loginsuccess</span><span class="s">=&#34;login_success&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">Register</span> <span class="na">v</span><span class="nt">-if</span><span class="err">=&#34;</span><span class="na">is_register</span><span class="err">&#34;</span> <span class="nt">@close</span><span class="s">=&#34;close_register&#34;</span> <span class="nt">@go</span><span class="s">=&#34;put_login&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">import</span> <span class="nx">Login</span> <span class="nx">from</span> <span class="s1">&#39;./Login&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">import</span> <span class="nx">Register</span> <span class="nx">from</span> <span class="s1">&#39;./Register&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Header&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">url_path</span><span class="o">:</span> <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">url_path</span> <span class="o">||</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">is_login</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">is_register</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">token</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">username</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">goPage</span><span class="p">(</span><span class="nx">url_path</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 传入的路由如果不是当前所在路径，就跳转
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">url_path</span> <span class="o">!==</span> <span class="nx">url_path</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">url_path</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">url_path</span> <span class="o">=</span> <span class="nx">url_path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">put_login</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">is_login</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">is_register</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">put_register</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">is_login</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">is_register</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">close_login</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">is_login</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">close_register</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">is_register</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">login_success</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">username</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">logout</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//清除cookie
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//把两个变量值为空
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">username</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">token</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">url_path</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">this</span><span class="p">.</span><span class="nx">url_path</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">path</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">//当页面一创建，我就去cookie中取token和username
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">this</span><span class="p">.</span><span class="nx">username</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>   <span class="c1">//取到就有值，取不到就为空
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">this</span><span class="p">.</span><span class="nx">token</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">)</span>   <span class="c1">//取到就有值，取不到就为空
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">Login</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">Register</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">header</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">white</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">box</span><span class="o">-</span><span class="nx">shadow</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">5</span><span class="nx">px</span> <span class="mi">0</span> <span class="err">#</span><span class="nx">aaa</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">header</span><span class="o">:</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">content</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">clear</span><span class="o">:</span> <span class="nx">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">slogan</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">eee</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">height</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">slogan</span> <span class="nx">p</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">width</span><span class="o">:</span> <span class="mi">1200</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="nx">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">aaa</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">13</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">nav</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">white</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">user</span><span class="o">-</span><span class="nx">select</span><span class="o">:</span> <span class="nx">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">width</span><span class="o">:</span> <span class="mi">1200</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="nx">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">nav</span> <span class="nx">ul</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">padding</span><span class="o">:</span> <span class="mi">15</span><span class="nx">px</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">nav</span> <span class="nx">ul</span><span class="o">:</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">clear</span><span class="o">:</span> <span class="nx">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">nav</span> <span class="nx">ul</span> <span class="nx">li</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">logo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">right</span><span class="o">:</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">ele</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">ele</span> <span class="nx">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">:</span> <span class="mi">15</span><span class="nx">px</span><span class="o">/</span><span class="mi">36</span><span class="nx">px</span> <span class="s1">&#39;微软雅黑&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">2</span><span class="nx">px</span> <span class="nx">solid</span> <span class="nx">transparent</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">ele</span> <span class="nx">span</span><span class="o">:</span><span class="nx">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">ele</span> <span class="nx">span</span><span class="p">.</span><span class="nx">active</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">right</span><span class="o">-</span><span class="nx">part</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">right</span><span class="o">-</span><span class="nx">part</span> <span class="p">.</span><span class="nx">line</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">right</span><span class="o">-</span><span class="nx">part</span> <span class="nx">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">68</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="26-手机号是否存在">2.6 手机号是否存在</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\user\views.py</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#多方式用户登录</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">luffyapi.utils.response</span> <span class="kn">import</span> <span class="n">APIResponse</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.viewsets</span> <span class="kn">import</span> <span class="n">ViewSet</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">serializer</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.decorators</span> <span class="kn">import</span> <span class="n">action</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">LoginViewSet</span><span class="p">(</span><span class="n">ViewSet</span><span class="p">,):</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nd">@action</span><span class="p">(</span><span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">],</span><span class="n">detail</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">request</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">user_ser</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">UserModelSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span><span class="c1">#自定义了全局异常，不需要使用raise_exception=True</span>
</span></span><span class="line"><span class="cl">                <span class="c1">#从序列化对象user_ser.context中获取token和用户名</span>
</span></span><span class="line"><span class="cl">                <span class="n">token</span> <span class="o">=</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="n">username</span> <span class="o">=</span> <span class="n">user_ser</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">username</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">msg</span><span class="o">=</span><span class="n">user_ser</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span><span class="c1">#序列化校检失败，返回错误信息</span>
</span></span><span class="line"><span class="cl">		<span class="c1">#判断手机号是否存在</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">check_mobilephone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">request</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="kn">import</span> <span class="nn">re</span>
</span></span><span class="line"><span class="cl">            <span class="n">mobilephone</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mobilephone&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;^[1][3-9][0-9]</span><span class="si">{9}</span><span class="s1">$&#39;</span><span class="p">,</span><span class="n">mobilephone</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">msg</span><span class="o">=</span><span class="s1">&#39;手机号不合法&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">mobilephone</span><span class="o">=</span><span class="n">mobilephone</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">except</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s1">&#39;手机号不存在&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="27-申请腾讯云短信服务">2.7 申请腾讯云短信服务</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1 必需申请一个公众号地址https://mp.weixin.qq.com/
</span></span><span class="line"><span class="cl">	1 进去之后点右上角立即注册，类型订阅号就行，其他类型需要域名比较复杂，然后按提示操作即可
</span></span><span class="line"><span class="cl">2 到腾讯云登录https://cloud.tencent.com/，第一次使用需要实名认证，然后搜索短信，点击免费领取
</span></span><span class="line"><span class="cl">3 创建签名，创建正文模板，看图1
</span></span><span class="line"><span class="cl">4 创建应用，记住SDK AppID,App Key后面要用到
</span></span></code></pre></td></tr></table>
</div>
</div><p>图1</p>
<p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731190229743-1952570057.png" alt="img"></p>
<p>图2</p>
<p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731190240946-1707033460.png" alt="img"></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="mi">5</span> <span class="n">扣代码</span><span class="err">，</span><span class="n">用的是短信2</span><span class="mf">.0</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">cloud</span><span class="o">.</span><span class="n">tencent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">document</span><span class="o">/</span><span class="n">product</span><span class="o">/</span><span class="mi">382</span><span class="o">/</span><span class="mi">11672</span>
</span></span><span class="line"><span class="cl"><span class="mi">6</span> <span class="n">可以康康帮助文档</span><span class="err">，</span><span class="n">看图1</span> 
</span></span><span class="line"><span class="cl">	<span class="n">API指很多web接口</span><span class="err">，</span><span class="n">基于APIView来写</span>
</span></span><span class="line"><span class="cl">    <span class="n">SDK指软件开发工具包</span><span class="err">，</span><span class="n">别人基于api接口</span><span class="err">，</span><span class="n">用不同语言封装的工具包</span><span class="err">，</span><span class="n">我们可以直接调用方法完成某种事</span><span class="p">,</span><span class="n">不同语言需要不同的SDK</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731190254418-920756845.png" alt="img"></p>
<h3 id="28-实操腾讯云短信接口">2.8 实操腾讯云短信接口</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="mi">1</span> <span class="n">配置SDK</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">qcloudsms_py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mi">2</span> <span class="c1">#luffyapi\libs\tx_sms\settings.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 短信应用 SDK AppID</span>
</span></span><span class="line"><span class="cl">    <span class="n">appid</span> <span class="o">=</span> <span class="mi">1400403539</span>  <span class="c1"># SDK AppID 以1400开头</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 短信应用 SDK AppKey</span>
</span></span><span class="line"><span class="cl">    <span class="n">appkey</span> <span class="o">=</span> <span class="s2">&#34;ca57467043d91ce7dfc090e9cd913acb&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 需要发送短信的手机号码</span>
</span></span><span class="line"><span class="cl">    <span class="n">phone_numbers</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;21212313123&#34;</span><span class="p">,</span> <span class="s2">&#34;12345678902&#34;</span><span class="p">,</span> <span class="s2">&#34;12345678903&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 短信模板ID，需要在短信控制台中申请</span>
</span></span><span class="line"><span class="cl">    <span class="n">template_id</span> <span class="o">=</span> <span class="mi">669037</span>  <span class="c1"># NOTE: 这里的模板 ID`7839`只是示例，真实的模板 ID 需要在短信控制台中申请</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 签名</span>
</span></span><span class="line"><span class="cl">    <span class="n">sms_sign</span> <span class="o">=</span> <span class="s2">&#34;Joab搞IT&#34;</span>  <span class="c1"># NOTE: 签名参数使用的是`签名内容`，而不是`签名ID`。这里的签名&#34;腾讯云&#34;只是示例，真实的签名需要在短信控制台中申请</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\libs\tx_sms\send.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">qcloudsms_py</span> <span class="kn">import</span> <span class="n">SmsSingleSender</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">luffyapi.utils.logger</span> <span class="kn">import</span> <span class="n">log</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">settings</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 生成4位随机验证码</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">get_code</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">random</span>
</span></span><span class="line"><span class="cl">        <span class="n">str_code</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">str_code</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>  <span class="c1"># int需要转成str</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">str_code</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 发送验证码</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">send_str_code</span><span class="p">(</span><span class="n">phone</span><span class="p">,</span> <span class="n">str_code</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">sender</span> <span class="o">=</span> <span class="n">SmsSingleSender</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">appid</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">appkey</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="n">str_code</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">]</span>  <span class="c1"># 3指短信过期时间3分钟</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span> <span class="o">=</span> <span class="n">sender</span><span class="o">.</span><span class="n">send_with_param</span><span class="p">(</span><span class="mi">86</span><span class="p">,</span> <span class="n">phone</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">template_id</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">sign</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">sms_sign</span><span class="p">,</span> <span class="n">extend</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                            <span class="n">ext</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;result&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;手机号</span><span class="si">{</span><span class="n">phone</span><span class="si">}</span><span class="s1">短信发送失败，错误为</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\libs\tx_sms\__init__.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.send</span> <span class="kn">import</span> <span class="n">get_code</span><span class="p">,</span><span class="n">send_str_code</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\user\views.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 发送短信接口</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@action</span><span class="p">(</span><span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">],</span><span class="n">detail</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">request</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">        发送验证码接口
</span></span></span><span class="line"><span class="cl"><span class="s2">        :param request:
</span></span></span><span class="line"><span class="cl"><span class="s2">        :param args:
</span></span></span><span class="line"><span class="cl"><span class="s2">        :param kwargs:
</span></span></span><span class="line"><span class="cl"><span class="s2">        :return:
</span></span></span><span class="line"><span class="cl"><span class="s2">        &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#先判断是不是手机号</span>
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">re</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">luffyapi.libs.tx_sms</span> <span class="kn">import</span> <span class="n">get_code</span><span class="p">,</span> <span class="n">send_str_code</span><span class="c1">#因为tx_sms的init导入了get_code，send_str_code所以可以不用.send直接导到这两个方法</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">django.core.cache</span> <span class="kn">import</span> <span class="n">cache</span><span class="c1">#导入django缓存</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
</span></span><span class="line"><span class="cl">        <span class="n">mobilephone</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mobilephone&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;^1[3-9][0-9]</span><span class="si">{9}</span><span class="s1">$&#39;</span><span class="p">,</span><span class="n">mobilephone</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">msg</span><span class="o">=</span><span class="s1">&#39;手机号不合法&#39;</span><span class="p">)</span><span class="c1">#code=0表示不合法，code=1是0k</span>
</span></span><span class="line"><span class="cl">        <span class="n">code</span> <span class="o">=</span> <span class="n">get_code</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="n">send_str_code</span><span class="p">(</span><span class="n">mobilephone</span><span class="p">,</span><span class="n">code</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#验证码存到django缓存中</span>
</span></span><span class="line"><span class="cl">        <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">PHONE_CACHE_KEY</span><span class="o">%</span><span class="n">mobilephone</span><span class="p">,</span><span class="n">code</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span><span class="c1">#过期时间180秒，3分钟</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">msg</span><span class="o">=</span><span class="s1">&#39;验证码发送成功&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">msg</span><span class="o">=</span><span class="s1">&#39;验证码发送失败&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="29-短信接口频率限制">2.9 短信接口频率限制</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#luffyapi\utils\throttings.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.throttling</span> <span class="kn">import</span> <span class="n">SimpleRateThrottle</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">SMSThrotting</span><span class="p">(</span><span class="n">SimpleRateThrottle</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">scope</span> <span class="o">=</span> <span class="s1">&#39;sms&#39;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1"># 做限制需要继承SimpleRateThrottle，重写get_cache_key，</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 返回什么就以什么做限制</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">get_cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;00&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">mobilephone</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mobilephone&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_format</span><span class="o">%</span><span class="p">{</span><span class="s1">&#39;scope&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span><span class="s1">&#39;ident&#39;</span><span class="p">:</span><span class="n">mobilephone</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\user\views.py</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#短信频率限制</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">luffyapi.utils.throttings</span> <span class="kn">import</span> <span class="n">SMSThrotting</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">SendSmsView</span><span class="p">(</span><span class="n">ViewSet</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">throttle_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">SMSThrotting</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 发送短信接口</span>
</span></span><span class="line"><span class="cl">        <span class="nd">@action</span><span class="p">(</span><span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">],</span><span class="n">detail</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">request</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;00&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">            发送验证码接口
</span></span></span><span class="line"><span class="cl"><span class="s2">            :param request:
</span></span></span><span class="line"><span class="cl"><span class="s2">            :param args:
</span></span></span><span class="line"><span class="cl"><span class="s2">            :param kwargs:
</span></span></span><span class="line"><span class="cl"><span class="s2">            :return:
</span></span></span><span class="line"><span class="cl"><span class="s2">            &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="c1">#先判断是不是手机号</span>
</span></span><span class="line"><span class="cl">            <span class="kn">import</span> <span class="nn">re</span>
</span></span><span class="line"><span class="cl">            <span class="kn">from</span> <span class="nn">luffyapi.libs.tx_sms</span> <span class="kn">import</span> <span class="n">get_code</span><span class="p">,</span> <span class="n">send_str_code</span><span class="c1">#因为tx_sms的init导入了get_code，send_str_code所以可以不用.send直接导到这两个方法</span>
</span></span><span class="line"><span class="cl">            <span class="kn">from</span> <span class="nn">django.core.cache</span> <span class="kn">import</span> <span class="n">cache</span><span class="c1">#导入django缓存</span>
</span></span><span class="line"><span class="cl">            <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
</span></span><span class="line"><span class="cl">            <span class="n">mobilephone</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mobilephone&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;^1[3-9][0-9]</span><span class="si">{9}</span><span class="s1">$&#39;</span><span class="p">,</span><span class="n">mobilephone</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">msg</span><span class="o">=</span><span class="s1">&#39;手机号不合法&#39;</span><span class="p">)</span><span class="c1">#code=0表示不合法，code=1是0k</span>
</span></span><span class="line"><span class="cl">            <span class="n">code</span> <span class="o">=</span> <span class="n">get_code</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span> <span class="o">=</span> <span class="n">send_str_code</span><span class="p">(</span><span class="n">mobilephone</span><span class="p">,</span><span class="n">code</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1">#验证码存到django缓存中</span>
</span></span><span class="line"><span class="cl">            <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">PHONE_CACHE_KEY</span><span class="o">%</span><span class="n">mobilephone</span><span class="p">,</span><span class="n">code</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span><span class="c1">#过期时间180秒，3分钟</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">msg</span><span class="o">=</span><span class="s1">&#39;验证码发送成功&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">msg</span><span class="o">=</span><span class="s1">&#39;验证码发送失败&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\settings\const.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1"># 手机验证码缓存的key值</span>
</span></span><span class="line"><span class="cl">	<span class="n">PHONE_CACHE_KEY</span><span class="o">=</span><span class="s1">&#39;sms_cache_</span><span class="si">%s</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\settings\dev.py配置短信发送频率的key</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">REST_FRAMEWORK</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;EXCEPTION_HANDLER&#39;</span><span class="p">:</span> <span class="s1">&#39;luffyapi.utils.exceptions.common_exception_handler&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 短信发送频率限制的key</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;DEFAULT_THROTTLE_RATES&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;sms&#39;</span><span class="p">:</span> <span class="s1">&#39;1/m&#39;</span>  <span class="p">}</span><span class="c1"># key要跟类中的scop对应</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="210-验证码登录接口">2.10 验证码登录接口</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\user\views.py,LoginViewSet视图内</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">#验证码登录接口</span>
</span></span><span class="line"><span class="cl">        <span class="nd">@action</span><span class="p">(</span><span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">],</span><span class="n">detail</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">code_login</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">request</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">ser</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">CodeUserSSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">ser</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">                <span class="n">token</span> <span class="o">=</span> <span class="n">ser</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">username</span> <span class="o">=</span> <span class="n">ser</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">username</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span><span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">ser</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\user\serializer.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">#验证码序列化器</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">CodeUserSSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 由于code不是数据库里面的字段，所以在这里需要进行重写</span>
</span></span><span class="line"><span class="cl">        <span class="n">code</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span>
</span></span><span class="line"><span class="cl">            <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;mobilephone&#39;</span><span class="p">,</span><span class="s1">&#39;code&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">#全局钩子,验证码登录成功签发token</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="c1">#_get_user去获取用户对象</span>
</span></span><span class="line"><span class="cl">            <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_user</span><span class="p">(</span><span class="n">attrs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1">#去获取签发的token</span>
</span></span><span class="line"><span class="cl">            <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_token</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">token</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">attrs</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">#获取用户名</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">_get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="kn">from</span> <span class="nn">django.core.cache</span> <span class="kn">import</span> <span class="n">cache</span>
</span></span><span class="line"><span class="cl">            <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
</span></span><span class="line"><span class="cl">            <span class="kn">import</span> <span class="nn">re</span>
</span></span><span class="line"><span class="cl">            <span class="n">mobilephone</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mobilephone&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">code</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1">#取出原来的code</span>
</span></span><span class="line"><span class="cl">            <span class="n">cache_code</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">PHONE_CACHE_KEY</span><span class="o">%</span><span class="n">mobilephone</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># if code == &#39;0000&#39;: # 万能验证码</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">cache_code</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 验证码用过一次就更新为空</span>
</span></span><span class="line"><span class="cl">                <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">PHONE_CACHE_KEY</span><span class="o">%</span><span class="n">mobilephone</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">mobilephone</span><span class="o">=</span><span class="n">mobilephone</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="c1">#验证成功返回用户</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">user</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s1">&#39;验证码错误，请重新输入&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">#获取token</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">_get_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">user</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="kn">from</span> <span class="nn">rest_framework_jwt.serializers</span> <span class="kn">import</span> <span class="n">jwt_payload_handler</span><span class="p">,</span><span class="n">jwt_encode_handler</span>
</span></span><span class="line"><span class="cl">            <span class="n">payload</span> <span class="o">=</span> <span class="n">jwt_payload_handler</span><span class="p">(</span><span class="n">user</span><span class="p">)</span><span class="c1">#加入user得到payload</span>
</span></span><span class="line"><span class="cl">            <span class="n">token</span> <span class="o">=</span> <span class="n">jwt_decode_handler</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span><span class="c1">#加入patload得到token</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">token</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="211-前台发送验证码">2.11 前台发送验证码</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="err">#</span><span class="nx">src</span><span class="err">\</span><span class="nx">components</span><span class="err">\</span><span class="nx">Login</span><span class="p">.</span><span class="nx">vue</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;login&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;box&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;el-icon-close&#34;</span> <span class="nt">@click</span><span class="s">=&#34;close_login&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;content&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;nav&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">span</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;{active: login_method === &#39;is_pwd&#39;}&#34;</span>
</span></span><span class="line"><span class="cl">                              <span class="nt">@click</span><span class="s">=&#34;change_login_method(&#39;is_pwd&#39;)&#34;</span><span class="p">&gt;</span><span class="na">密码登录</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">span</span> <span class="o">:</span><span class="na">class</span><span class="o">=</span><span class="s">&#34;{active: login_method === &#39;is_sms&#39;}&#34;</span>
</span></span><span class="line"><span class="cl">                              <span class="nt">@click</span><span class="s">=&#34;change_login_method(&#39;is_sms&#39;)&#34;</span><span class="p">&gt;</span><span class="na">短信登录</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">el-form</span> <span class="nt">v-if</span><span class="s">=&#34;login_method === &#39;is_pwd&#39;&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-input
</span></span></span><span class="line"><span class="cl"><span class="s">                                placeholder=&#34;用户名/手机号/邮箱&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                prefix-icon=&#34;el-icon-user&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                v-model=&#34;username&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                clearable&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/el-input&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-input
</span></span></span><span class="line"><span class="cl"><span class="s">                                placeholder=&#34;密码&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                prefix-icon=&#34;el-icon-key&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                v-model=&#34;password&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                clearable
</span></span></span><span class="line"><span class="cl"><span class="s">                                show-password&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/el-input&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-button type=&#34;primary&#34; @click=&#34;login_password&#34;&gt;登录&lt;/el-button&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/el-form&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;el-form v-if=&#34;login_method === &#39;is_sms&#39;&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-input
</span></span></span><span class="line"><span class="cl"><span class="s">                                placeholder=&#34;手机号&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                prefix-icon=&#34;el-icon-phone-outline&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                v-model=&#34;mobile&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                clearable
</span></span></span><span class="line"><span class="cl"><span class="s">                                @blur=&#34;check_mobile&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/el-input&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-input
</span></span></span><span class="line"><span class="cl"><span class="s">                                placeholder=&#34;验证码&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                prefix-icon=&#34;el-icon-chat-line-round&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                v-model=&#34;sms&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                                clearable&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;template slot=&#34;append&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                                &lt;span class=&#34;sms&#34; @click=&#34;send_sms&#34;&gt;{{ sms_interval }}&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;/template&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/el-input&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;el-button type=&#34;primary&#34; @click=&#34;code_login&#34;&gt;登录&lt;/el-button&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/el-form&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;div class=&#34;foot&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;span @click=&#34;go_register&#34;</span><span class="p">&gt;</span><span class="na">立即注册</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Login&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">username</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">password</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">mobile</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">sms</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">login_method</span><span class="o">:</span> <span class="s1">&#39;is_pwd&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">sms_interval</span><span class="o">:</span> <span class="s1">&#39;获取验证码&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">is_send</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">close_login</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="nx">go_register</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;go&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="nx">change_login_method</span><span class="p">(</span><span class="nx">method</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">login_method</span> <span class="o">=</span> <span class="nx">method</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="nx">check_mobile</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">mobile</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">//字符串.match(/正则表达式/)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^1[3-9][0-9]{9}$/</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;手机号有误&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;warning&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">duration</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">onClose</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                <span class="c1">// this.mobile = &#39;&#39;;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="p">}</span>
</span></span><span class="line"><span class="cl">                        <span class="p">});</span>
</span></span><span class="line"><span class="cl">                        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">//发送axios请求
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="c1">// this.$axios.get(this.$settings.base_url+&#39;/user/check_telephone/telephone=&#39;+this.mobile})
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">this</span><span class="p">.</span><span class="nx">$axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$settings</span><span class="p">.</span><span class="nx">base_url</span> <span class="o">+</span> <span class="s1">&#39;/user/check_telephone/&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">params</span><span class="o">:</span> <span class="p">{</span><span class="nx">telephone</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">mobile</span><span class="p">}}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">//手机号存在，允许发送验证码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="k">this</span><span class="p">.</span><span class="nx">is_send</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                                <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;手机号不存在&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;warning&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="nx">duration</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="nx">onClose</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                    <span class="c1">// this.mobile = &#39;&#39;;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                            <span class="p">});</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="nx">send_sms</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">is_send</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">is_send</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="kd">let</span> <span class="nx">sms_interval_time</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">sms_interval</span> <span class="o">=</span> <span class="s2">&#34;发送中...&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">$axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$settings</span><span class="p">.</span><span class="nx">base_url</span> <span class="o">+</span> <span class="s1">&#39;/user/send/&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">params</span><span class="o">:</span> <span class="p">{</span><span class="s1">&#39;telephone&#39;</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">mobile</span><span class="p">}})</span>
</span></span><span class="line"><span class="cl">                        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                                    <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;发送验证码成功&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                    <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                    <span class="nx">duration</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                                <span class="p">});</span>
</span></span><span class="line"><span class="cl">                            <span class="p">}</span>
</span></span><span class="line"><span class="cl">                        <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="c1">// setInterval(()=&gt;{},100)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="c1">//定时器：每隔一秒种，把数字减一，当减到小于1，按钮又能点了，显示获取验证码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="kd">let</span> <span class="nx">timer</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">if</span> <span class="p">(</span><span class="nx">sms_interval_time</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>  <span class="c1">//如果小于等于1，把定时器清除
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="k">this</span><span class="p">.</span><span class="nx">sms_interval</span> <span class="o">=</span> <span class="s2">&#34;获取验证码&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                            <span class="k">this</span><span class="p">.</span><span class="nx">is_send</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// 重新回复点击发送功能的条件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">sms_interval_time</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                            <span class="k">this</span><span class="p">.</span><span class="nx">sms_interval</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">sms_interval_time</span><span class="si">}</span><span class="sb">秒后再发`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="nx">login_password</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">username</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">password</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="c1">//发送请求
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="k">this</span><span class="p">.</span><span class="nx">$axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$settings</span><span class="p">.</span><span class="nx">base_url</span> <span class="o">+</span> <span class="s1">&#39;/user/login/&#39;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">username</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">password</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">password</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                        <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">//把用户信息保存到cookie中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="c1">// this.$cookies.set(&#39;key&#39;,&#39;value&#39;,&#39;过期时间,按s计&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">token</span><span class="p">,</span> <span class="s1">&#39;7d&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                            <span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span> <span class="s1">&#39;7d&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">//关闭登录窗口(子传父)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">//给父组件，Head传递一个事件，让它从cookie中取出token和username
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;loginsuccess&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">errors</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="p">})</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;用户名或密码必须填哦&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;warning&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                        <span class="p">});</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="nx">code_login</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mobile</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">sms</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="c1">//发送请求
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="k">this</span><span class="p">.</span><span class="nx">$axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$settings</span><span class="p">.</span><span class="nx">base_url</span> <span class="o">+</span> <span class="s1">&#39;/user/code_login/&#39;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">telephone</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">mobile</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">code</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">sms</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                        <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">//把用户信息保存到cookie中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="c1">// this.$cookies.set(&#39;key&#39;,&#39;value&#39;,&#39;过期时间,按s计&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">token</span><span class="p">,</span> <span class="s1">&#39;7d&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                            <span class="k">this</span><span class="p">.</span><span class="nx">$cookies</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span> <span class="s1">&#39;7d&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">//关闭登录窗口(子传父)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">//给父组件，Head传递一个事件，让它从cookie中取出token和username
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;loginsuccess&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">errors</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="p">})</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;手机号或验证码必填&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;warning&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                        <span class="p">});</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">login</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">width</span><span class="o">:</span> <span class="mi">100</span><span class="nx">vw</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">height</span><span class="o">:</span> <span class="mi">100</span><span class="nx">vh</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">position</span><span class="o">:</span> <span class="nx">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">z</span><span class="o">-</span><span class="nx">index</span><span class="o">:</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">box</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">width</span><span class="o">:</span> <span class="mi">400</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">height</span><span class="o">:</span> <span class="mi">420</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">white</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">position</span><span class="o">:</span> <span class="nx">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">top</span><span class="o">:</span> <span class="nx">calc</span><span class="p">(</span><span class="mi">50</span><span class="nx">vh</span> <span class="o">-</span> <span class="mi">210</span><span class="nx">px</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nx">left</span><span class="o">:</span> <span class="nx">calc</span><span class="p">(</span><span class="mi">50</span><span class="nx">vw</span> <span class="o">-</span> <span class="mi">200</span><span class="nx">px</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">icon</span><span class="o">-</span><span class="nx">close</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">position</span><span class="o">:</span> <span class="nx">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">font</span><span class="o">-</span><span class="nx">weight</span><span class="o">:</span> <span class="nx">bold</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">top</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">right</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">icon</span><span class="o">-</span><span class="nx">close</span><span class="o">:</span><span class="nx">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">color</span><span class="o">:</span> <span class="nx">darkred</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">content</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">position</span><span class="o">:</span> <span class="nx">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">top</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">width</span><span class="o">:</span> <span class="mi">280</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">left</span><span class="o">:</span> <span class="mi">60</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">nav</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">height</span><span class="o">:</span> <span class="mi">38</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">2</span><span class="nx">px</span> <span class="nx">solid</span> <span class="nx">darkgrey</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">nav</span> <span class="o">&gt;</span> <span class="nx">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">20</span><span class="nx">px</span> <span class="mi">0</span> <span class="mi">35</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">color</span><span class="o">:</span> <span class="nx">darkgrey</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">user</span><span class="o">-</span><span class="nx">select</span><span class="o">:</span> <span class="nx">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">padding</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">2</span><span class="nx">px</span> <span class="nx">solid</span> <span class="nx">darkgrey</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">nav</span> <span class="o">&gt;</span> <span class="nx">span</span><span class="p">.</span><span class="nx">active</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">color</span><span class="o">:</span> <span class="nx">black</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">3</span><span class="nx">px</span> <span class="nx">solid</span> <span class="nx">black</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">padding</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">9</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">input</span><span class="p">,</span> <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">button</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">-</span><span class="nx">top</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">el</span><span class="o">-</span><span class="nx">button</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">width</span><span class="o">:</span> <span class="mi">100</span><span class="o">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">18</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">foot</span> <span class="o">&gt;</span> <span class="nx">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kr">float</span><span class="o">:</span> <span class="nx">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">-</span><span class="nx">top</span><span class="o">:</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">sms</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">display</span><span class="o">:</span> <span class="nx">inline</span><span class="o">-</span><span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">width</span><span class="o">:</span> <span class="mi">70</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">user</span><span class="o">-</span><span class="nx">select</span><span class="o">:</span> <span class="nx">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="212-后台注册接口">2.12 后台注册接口</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># luffyapi\apps\user\urls.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 导入路由对象</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.routers</span> <span class="kn">import</span> <span class="n">SimpleRouter</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span><span class="p">,</span> <span class="n">include</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 实例化路由对象</span>
</span></span><span class="line"><span class="cl">    <span class="n">router</span> <span class="o">=</span> <span class="n">SimpleRouter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 注册路由</span>
</span></span><span class="line"><span class="cl">    <span class="n">router</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">LoginViewSet</span><span class="p">,</span><span class="s1">&#39;login&#39;</span><span class="p">)</span><span class="c1">#不要用as_view()，需要加上反向解析，不然不会报错</span>
</span></span><span class="line"><span class="cl">    <span class="n">router</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">SendSmsView</span><span class="p">,</span><span class="s1">&#39;send&#39;</span><span class="p">)</span><span class="c1">#不要用as_view()，需要加上反向解析，不然不会报错</span>
</span></span><span class="line"><span class="cl">    <span class="n">router</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;register&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">RegisterGenericViewSet</span><span class="p">,</span><span class="s1">&#39;register&#39;</span><span class="p">)</span><span class="c1">#用户注册接口 # /user/register 路径下post请求就是新增</span>
</span></span><span class="line"><span class="cl">    <span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 加入路由</span>
</span></span><span class="line"><span class="cl">        <span class="n">path</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">router</span><span class="o">.</span><span class="n">urls</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\user\views.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">#注册接口</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.viewsets</span> <span class="kn">import</span> <span class="n">GenericViewSet</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.mixins</span> <span class="kn">import</span> <span class="n">CreateModelMixin</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">RegisterGenericViewSet</span><span class="p">(</span><span class="n">GenericViewSet</span><span class="p">,</span><span class="n">CreateModelMixin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">queryset</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">RegisterModelSerializer</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">request</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">response</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">request</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">username</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">APIResponse</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">msg</span><span class="o">=</span><span class="s1">&#39;注册成功&#39;</span><span class="p">,</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># luffyapi\apps\user\serializer.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">#注册序列化器</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">django.core.cache</span> <span class="kn">import</span> <span class="n">cache</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">RegisterModelSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">code</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">min_length</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">write_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span>
</span></span><span class="line"><span class="cl">            <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;telephone&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">extra_kwargs</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;write_only&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;read_obly&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">telephone</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;telephone&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">code</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">cache_code</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">PHONE_CACHE_KEY</span> <span class="o">%</span> <span class="n">telephone</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">cache_code</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="kn">import</span> <span class="nn">re</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;^[1][3-9][0-9]</span><span class="si">{9}</span><span class="s1">$&#39;</span><span class="p">,</span><span class="n">telephone</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                    <span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">telephone</span>
</span></span><span class="line"><span class="cl">                    <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">attrs</span>
</span></span><span class="line"><span class="cl">                <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s1">&#39;手机不合法&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s1">&#39;验证码有误&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                
</span></span><span class="line"><span class="cl">        <span class="c1"># 重写create方法,一定要重写，不然密码就有问题</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="o">**</span><span class="n">validated_data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">user</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="213-前台注册接口">2.13 前台注册接口</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#src\components\Register.vue</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">template</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;register&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;box&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;</span><span class="n">i</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;el-icon-close&#34;</span> <span class="nd">@click</span><span class="o">=</span><span class="s2">&#34;close_register&#34;</span><span class="o">&gt;&lt;/</span><span class="n">i</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;content&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;nav&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;active&#34;</span><span class="o">&gt;</span><span class="n">新用户注册</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">el</span><span class="o">-</span><span class="n">form</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">el</span><span class="o">-</span><span class="nb">input</span>
</span></span><span class="line"><span class="cl">                                <span class="n">placeholder</span><span class="o">=</span><span class="s2">&#34;手机号&#34;</span>
</span></span><span class="line"><span class="cl">                                <span class="n">prefix</span><span class="o">-</span><span class="n">icon</span><span class="o">=</span><span class="s2">&#34;el-icon-phone-outline&#34;</span>
</span></span><span class="line"><span class="cl">                                <span class="n">v</span><span class="o">-</span><span class="n">model</span><span class="o">=</span><span class="s2">&#34;mobile&#34;</span>
</span></span><span class="line"><span class="cl">                                <span class="n">clearable</span>
</span></span><span class="line"><span class="cl">                                <span class="nd">@blur</span><span class="o">=</span><span class="s2">&#34;check_mobile&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;/</span><span class="n">el</span><span class="o">-</span><span class="nb">input</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">el</span><span class="o">-</span><span class="nb">input</span>
</span></span><span class="line"><span class="cl">                                <span class="n">placeholder</span><span class="o">=</span><span class="s2">&#34;密码&#34;</span>
</span></span><span class="line"><span class="cl">                                <span class="n">prefix</span><span class="o">-</span><span class="n">icon</span><span class="o">=</span><span class="s2">&#34;el-icon-key&#34;</span>
</span></span><span class="line"><span class="cl">                                <span class="n">v</span><span class="o">-</span><span class="n">model</span><span class="o">=</span><span class="s2">&#34;password&#34;</span>
</span></span><span class="line"><span class="cl">                                <span class="n">clearable</span>
</span></span><span class="line"><span class="cl">                                <span class="n">show</span><span class="o">-</span><span class="n">password</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;/</span><span class="n">el</span><span class="o">-</span><span class="nb">input</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">el</span><span class="o">-</span><span class="nb">input</span>
</span></span><span class="line"><span class="cl">                                <span class="n">placeholder</span><span class="o">=</span><span class="s2">&#34;验证码&#34;</span>
</span></span><span class="line"><span class="cl">                                <span class="n">prefix</span><span class="o">-</span><span class="n">icon</span><span class="o">=</span><span class="s2">&#34;el-icon-chat-line-round&#34;</span>
</span></span><span class="line"><span class="cl">                                <span class="n">v</span><span class="o">-</span><span class="n">model</span><span class="o">=</span><span class="s2">&#34;sms&#34;</span>
</span></span><span class="line"><span class="cl">                                <span class="n">clearable</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">template</span> <span class="n">slot</span><span class="o">=</span><span class="s2">&#34;append&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                                <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;sms&#34;</span> <span class="nd">@click</span><span class="o">=</span><span class="s2">&#34;send_sms&#34;</span><span class="o">&gt;</span><span class="p">{{</span> <span class="n">sms_interval</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;/</span><span class="n">template</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;/</span><span class="n">el</span><span class="o">-</span><span class="nb">input</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">el</span><span class="o">-</span><span class="n">button</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&#34;primary&#34;</span> <span class="nd">@click</span><span class="o">=</span><span class="s2">&#34;register&#34;</span><span class="o">&gt;</span><span class="n">注册</span><span class="o">&lt;/</span><span class="n">el</span><span class="o">-</span><span class="n">button</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">el</span><span class="o">-</span><span class="n">form</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;foot&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">span</span> <span class="nd">@click</span><span class="o">=</span><span class="s2">&#34;go_login&#34;</span><span class="o">&gt;</span><span class="n">立即登录</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;/</span><span class="n">template</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="n">export</span> <span class="n">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">name</span><span class="p">:</span> <span class="s2">&#34;Register&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">mobile</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">password</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">sms</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">sms_interval</span><span class="p">:</span> <span class="s1">&#39;获取验证码&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">is_send</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="n">methods</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">close_register</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="n">false</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="n">go_login</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;go&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="n">check_mobile</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="p">(</span><span class="err">!</span><span class="n">this</span><span class="o">.</span><span class="n">mobile</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">//</span><span class="n">字符串</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="o">/</span><span class="n">正则表达式</span><span class="o">/</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="p">(</span><span class="err">!</span><span class="n">this</span><span class="o">.</span><span class="n">mobile</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="o">/^</span><span class="mi">1</span><span class="p">[</span><span class="mi">3</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]{</span><span class="mi">9</span><span class="p">}</span><span class="err">$</span><span class="o">/</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                            <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;手机号有误&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="nb">type</span><span class="p">:</span> <span class="s1">&#39;warning&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="n">duration</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="n">onClose</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                <span class="n">this</span><span class="o">.</span><span class="n">mobile</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                            <span class="p">}</span>
</span></span><span class="line"><span class="cl">                        <span class="p">});</span>
</span></span><span class="line"><span class="cl">                        <span class="k">return</span> <span class="n">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">axios</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">settings</span><span class="o">.</span><span class="n">base_url</span> <span class="o">+</span> <span class="s1">&#39;/user/check_telephone/&#39;</span><span class="p">,</span> <span class="p">{</span><span class="n">params</span><span class="p">:</span> <span class="p">{</span><span class="n">telephone</span><span class="p">:</span> <span class="n">this</span><span class="o">.</span><span class="n">mobile</span><span class="p">}})</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">code</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                                <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;您已经注册过了，快去登录把&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="nb">type</span><span class="p">:</span> <span class="s1">&#39;warning&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">duration</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">onClose</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                    <span class="n">this</span><span class="o">.</span><span class="n">go_login</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                            <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="n">this</span><span class="o">.</span><span class="n">is_send</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                            <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                                <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;该用户没有注册过，欢迎注册我们的平台&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="nb">type</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">duration</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="p">});</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="p">})</span><span class="o">.</span><span class="n">catch</span><span class="p">(</span><span class="n">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="n">send_sms</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="p">(</span><span class="err">!</span><span class="n">this</span><span class="o">.</span><span class="n">is_send</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">this</span><span class="o">.</span><span class="n">is_send</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">let</span> <span class="n">sms_interval_time</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">this</span><span class="o">.</span><span class="n">sms_interval</span> <span class="o">=</span> <span class="s2">&#34;发送中...&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">axios</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">settings</span><span class="o">.</span><span class="n">base_url</span> <span class="o">+</span> <span class="s1">&#39;/user/send/&#39;</span><span class="p">,</span> <span class="p">{</span><span class="n">params</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;telephone&#39;</span><span class="p">:</span> <span class="n">this</span><span class="o">.</span><span class="n">mobile</span><span class="p">}})</span>
</span></span><span class="line"><span class="cl">                        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">code</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                                    <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;发送验证码成功&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                    <span class="nb">type</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                    <span class="n">duration</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                                <span class="p">});</span>
</span></span><span class="line"><span class="cl">                            <span class="p">}</span>
</span></span><span class="line"><span class="cl">                        <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="o">//</span> <span class="n">setInterval</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{},</span><span class="mi">100</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="o">//</span><span class="n">定时器</span><span class="err">：</span><span class="n">每隔一秒种</span><span class="err">，</span><span class="n">把数字减一</span><span class="err">，</span><span class="n">当减到小于1</span><span class="err">，</span><span class="n">按钮又能点了</span><span class="err">，</span><span class="n">显示获取验证码</span>
</span></span><span class="line"><span class="cl">                    <span class="n">let</span> <span class="n">timer</span> <span class="o">=</span> <span class="n">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">if</span> <span class="p">(</span><span class="n">sms_interval_time</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="n">clearInterval</span><span class="p">(</span><span class="n">timer</span><span class="p">);</span>  <span class="o">//</span><span class="n">如果小于等于1</span><span class="err">，</span><span class="n">把定时器清除</span>
</span></span><span class="line"><span class="cl">                            <span class="n">this</span><span class="o">.</span><span class="n">sms_interval</span> <span class="o">=</span> <span class="s2">&#34;获取验证码&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                            <span class="n">this</span><span class="o">.</span><span class="n">is_send</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span> <span class="o">//</span> <span class="n">重新回复点击发送功能的条件</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="n">sms_interval_time</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                            <span class="n">this</span><span class="o">.</span><span class="n">sms_interval</span> <span class="o">=</span> <span class="err">`$</span><span class="p">{</span><span class="n">sms_interval_time</span><span class="p">}</span><span class="n">秒后再发</span><span class="err">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="n">register</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">mobile</span> <span class="o">&amp;&amp;</span> <span class="n">this</span><span class="o">.</span><span class="n">sms</span> <span class="o">&amp;&amp;</span> <span class="n">this</span><span class="o">.</span><span class="n">password</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">axios</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">settings</span><span class="o">.</span><span class="n">base_url</span> <span class="o">+</span> <span class="s1">&#39;/user/register/&#39;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="n">telephone</span><span class="p">:</span> <span class="n">this</span><span class="o">.</span><span class="n">mobile</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="n">code</span><span class="p">:</span> <span class="n">this</span><span class="o">.</span><span class="n">sms</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="n">password</span><span class="p">:</span> <span class="n">this</span><span class="o">.</span><span class="n">password</span>
</span></span><span class="line"><span class="cl">                        <span class="p">})</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">code</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                <span class="o">//</span><span class="n">注册成功</span><span class="err">，</span><span class="n">来个提示</span><span class="err">，</span><span class="n">跳转到登录</span>
</span></span><span class="line"><span class="cl">                                <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                                    <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;注册成功&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                    <span class="nb">type</span><span class="p">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                    <span class="n">duration</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                    <span class="n">onClose</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                        <span class="n">this</span><span class="o">.</span><span class="n">go_login</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                                <span class="p">});</span>
</span></span><span class="line"><span class="cl">                            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                                    <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;未知错误&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                    <span class="nb">type</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                    <span class="n">duration</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                    <span class="n">onClose</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                        <span class="n">this</span><span class="o">.</span><span class="n">mobile</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">                                        <span class="n">this</span><span class="o">.</span><span class="n">sms</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">                                        <span class="n">this</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">                                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                                <span class="p">});</span>
</span></span><span class="line"><span class="cl">                            <span class="p">}</span>
</span></span><span class="line"><span class="cl">                        <span class="p">})</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                            <span class="n">message</span><span class="p">:</span> <span class="s1">&#39;你有没填的信息&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="nb">type</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="n">duration</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="p">});</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">style</span> <span class="n">scoped</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">register</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">width</span><span class="p">:</span> <span class="mi">100</span><span class="n">vw</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">height</span><span class="p">:</span> <span class="mi">100</span><span class="n">vh</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">position</span><span class="p">:</span> <span class="n">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">z</span><span class="o">-</span><span class="n">index</span><span class="p">:</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">background</span><span class="o">-</span><span class="n">color</span><span class="p">:</span> <span class="n">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">box</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">width</span><span class="p">:</span> <span class="mi">400</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">height</span><span class="p">:</span> <span class="mi">480</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">background</span><span class="o">-</span><span class="n">color</span><span class="p">:</span> <span class="n">white</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span> <span class="mi">10</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">position</span><span class="p">:</span> <span class="n">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">top</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="mi">50</span><span class="n">vh</span> <span class="o">-</span> <span class="mi">240</span><span class="n">px</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">left</span><span class="p">:</span> <span class="n">calc</span><span class="p">(</span><span class="mi">50</span><span class="n">vw</span> <span class="o">-</span> <span class="mi">200</span><span class="n">px</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">el</span><span class="o">-</span><span class="n">icon</span><span class="o">-</span><span class="n">close</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">position</span><span class="p">:</span> <span class="n">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">font</span><span class="o">-</span><span class="n">weight</span><span class="p">:</span> <span class="n">bold</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">top</span><span class="p">:</span> <span class="mi">10</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">right</span><span class="p">:</span> <span class="mi">10</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">cursor</span><span class="p">:</span> <span class="n">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">el</span><span class="o">-</span><span class="n">icon</span><span class="o">-</span><span class="n">close</span><span class="p">:</span><span class="n">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">color</span><span class="p">:</span> <span class="n">darkred</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">content</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">position</span><span class="p">:</span> <span class="n">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">top</span><span class="p">:</span> <span class="mi">40</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">width</span><span class="p">:</span> <span class="mi">280</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">left</span><span class="p">:</span> <span class="mi">60</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">nav</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">height</span><span class="p">:</span> <span class="mi">38</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">2</span><span class="n">px</span> <span class="n">solid</span> <span class="n">darkgrey</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">nav</span> <span class="o">&gt;</span> <span class="n">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">margin</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">90</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">color</span><span class="p">:</span> <span class="n">darkgrey</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">user</span><span class="o">-</span><span class="n">select</span><span class="p">:</span> <span class="n">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">cursor</span><span class="p">:</span> <span class="n">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">padding</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">10</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">2</span><span class="n">px</span> <span class="n">solid</span> <span class="n">darkgrey</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">nav</span> <span class="o">&gt;</span> <span class="n">span</span><span class="o">.</span><span class="n">active</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">color</span><span class="p">:</span> <span class="n">black</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">3</span><span class="n">px</span> <span class="n">solid</span> <span class="n">black</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">padding</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">9</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">el</span><span class="o">-</span><span class="nb">input</span><span class="p">,</span> <span class="o">.</span><span class="n">el</span><span class="o">-</span><span class="n">button</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">margin</span><span class="o">-</span><span class="n">top</span><span class="p">:</span> <span class="mi">40</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">el</span><span class="o">-</span><span class="n">button</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">width</span><span class="p">:</span> <span class="mi">100</span><span class="o">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">18</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">foot</span> <span class="o">&gt;</span> <span class="n">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nb">float</span><span class="p">:</span> <span class="n">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">margin</span><span class="o">-</span><span class="n">top</span><span class="p">:</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">color</span><span class="p">:</span> <span class="n">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">cursor</span><span class="p">:</span> <span class="n">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="n">sms</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">color</span><span class="p">:</span> <span class="n">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">cursor</span><span class="p">:</span> <span class="n">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">display</span><span class="p">:</span> <span class="n">inline</span><span class="o">-</span><span class="n">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">width</span><span class="p">:</span> <span class="mi">70</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">text</span><span class="o">-</span><span class="n">align</span><span class="p">:</span> <span class="n">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">user</span><span class="o">-</span><span class="n">select</span><span class="p">:</span> <span class="n">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;/</span><span class="n">style</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="3-redis使用">3 Redis使用</h2>
<p><a href="https://www.cnblogs.com/liuqingzheng/articles/9833534.html">Redis使用</a></p>
<h3 id="31-安装">3.1 安装</h3>
<h3 id="32-python操作redis普通连接">3.2 Python操作Redis普通连接</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="mi">1</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">redis</span>
</span></span><span class="line"><span class="cl"><span class="c1">#简单使用</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">redis</span> <span class="kn">import</span> <span class="n">Redis</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#获取redis连接</span>
</span></span><span class="line"><span class="cl">    <span class="n">conn</span> <span class="o">=</span> <span class="n">Redis</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">6379</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#key取值</span>
</span></span><span class="line"><span class="cl">    <span class="n">ret</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span><span class="c1">#b&#39;alex&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="33-python操作redis连接池">3.3 Python操作Redis连接池</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#redis_pool\redis_pool.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">import</span> <span class="nn">redis</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#连接池对象，最大连接数100</span>
</span></span><span class="line"><span class="cl">    <span class="n">POOL</span> <span class="o">=</span> <span class="n">redis</span><span class="o">.</span><span class="n">ConnectionPool</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">6379</span><span class="p">,</span><span class="n">max_connections</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#redis_pool\redis_pool.py  </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">import</span> <span class="nn">redis</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">redis_pool</span> <span class="kn">import</span> <span class="n">POOL</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#执行这句话就是从连接池拿出一个连接</span>
</span></span><span class="line"><span class="cl">    <span class="n">r</span> <span class="o">=</span> <span class="n">redis</span><span class="o">.</span><span class="n">Redis</span><span class="p">(</span><span class="n">connection_pool</span><span class="o">=</span><span class="n">POOL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">ret</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span><span class="c1">#b&#39;alex&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="34-redis数据类型">3.4 Redis数据类型</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">string</span><span class="p">(</span><span class="n">字符串</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">list</span><span class="p">(</span><span class="n">列表</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span><span class="p">(</span><span class="n">集合</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">zset</span><span class="p">(</span><span class="n">有序集合</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">hash</span><span class="p">(</span><span class="n">哈希</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="35-string字符串操作">3.5 String(字符串)操作</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">string在内存中按照一个name一个value来存储</span><span class="err">，</span><span class="n">看图1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#加*表示重点</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">ex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">px</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nx</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">xx</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#设置值，不存在则创建，存在则修改，</span>
</span></span><span class="line"><span class="cl"><span class="n">参数</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">	<span class="n">ex过期时间秒</span>
</span></span><span class="line"><span class="cl">    <span class="n">px过期时间毫秒</span>
</span></span><span class="line"><span class="cl">    <span class="n">nx为True时</span><span class="err">，</span><span class="n">key不存在时</span><span class="err">，</span><span class="n">才会执行</span><span class="err">，</span><span class="n">key存在则不执行操作</span>
</span></span><span class="line"><span class="cl">    <span class="n">xx为True时</span><span class="err">，</span><span class="n">key不存在时</span><span class="err">，</span><span class="n">不会执行操作</span><span class="err">，</span><span class="n">key存在才会执行</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">setnx</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#设置值，key不存在，才会执行，存在不会执行操作</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">setex</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#设置值，参数time过期时间数字秒，或timedelta对象</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">psetex</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">time_ms</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#设置值，参数time_ms过期时间数字毫秒，或timedelta对象</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">mset</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#批量设置值，如</span>
</span></span><span class="line"><span class="cl">	<span class="n">mset</span><span class="p">(</span><span class="n">k1</span><span class="o">=</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="n">k2</span><span class="o">=</span><span class="s1">&#39;v2&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">mset</span><span class="p">({</span><span class="s1">&#39;k1&#39;</span><span class="p">:</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;k2&#39;</span><span class="p">:</span><span class="s1">&#39;v2&#39;</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">*</span>    
</span></span><span class="line"><span class="cl"><span class="c1">#获取值</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">mget</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#批量获取，如</span>
</span></span><span class="line"><span class="cl">	<span class="n">mget</span><span class="p">(</span><span class="s1">&#39;k1&#39;</span><span class="p">,</span><span class="s1">&#39;k2&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">mget</span><span class="p">([</span><span class="s1">&#39;k1&#39;</span><span class="p">,</span><span class="s1">&#39;k2&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">getset</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#设置值并获取原来的值</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">getrange</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#获取子序列，根据字节获取，非字符，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">start开始位置的索引</span><span class="err">（</span><span class="n">前闭后闭</span><span class="err">）</span><span class="c1">#汉字占3个字节</span>
</span></span><span class="line"><span class="cl">    <span class="n">end结束位置的的索引</span><span class="err">（</span><span class="n">前闭后闭</span><span class="err">）</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">setrange</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#修改字符串内容，从指定索引向后修改，新值比原值长则向后添加，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="mi">0</span><span class="n">ffset开始修改字符串的索引</span><span class="err">，</span><span class="n">汉字占3个字节</span>
</span></span><span class="line"><span class="cl">    <span class="n">value指要设置的指</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">setbit</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#对key对应的值的二进制（010101001）进行操作，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">offset开始位的索引</span><span class="err">，</span><span class="n">需要将值转成二进制</span><span class="err">（</span><span class="mi">1</span><span class="n">字节等于8位二进制</span><span class="err">）</span><span class="n">索引</span>
</span></span><span class="line"><span class="cl">    <span class="n">value值只能是0或1</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">getbit</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 获取key对应值开始索引的二进制的值0或1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">bitcount</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#获取key对应值的二进制的值中的1的个数，参数:</span>
</span></span><span class="line"><span class="cl">	<span class="n">strat二进制起始位置</span>
</span></span><span class="line"><span class="cl">    <span class="n">end二进制结束位置</span>
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl"><span class="n">bitop</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">dest</span><span class="p">,</span> <span class="o">*</span><span class="n">keys</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#获取多个值，并将值做位运算，将最后的值保存至新的key对应的值，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">operation可以是AND</span><span class="p">(</span><span class="n">并</span><span class="p">)</span><span class="err">、</span><span class="n">OR</span><span class="p">(</span><span class="n">或</span><span class="p">)</span><span class="err">、</span><span class="n">NOT</span><span class="p">(</span><span class="n">非</span><span class="p">)</span><span class="err">、</span><span class="n">XOR</span><span class="p">(</span><span class="n">异或</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">dest新的key名</span>
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="n">keys要查找的key</span>
</span></span><span class="line"><span class="cl">	<span class="n">如</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">    <span class="n">conn</span><span class="o">.</span><span class="n">bitop</span><span class="p">(</span><span class="s1">&#39;AND&#39;</span><span class="p">,</span><span class="s1">&#39;name_1&#39;</span><span class="p">,</span><span class="s1">&#39;name1&#39;</span><span class="p">,</span><span class="s1">&#39;name2&#39;</span><span class="p">,</span><span class="s1">&#39;name3&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#获取key,&#39;name1&#39;,&#39;name2&#39;,&#39;name3&#39;对应的值，做位运算（并集），然后将结果保存到name_1对应的值中</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">strlen</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#返回key对应值的字节长度（汉字三个字节）</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">incr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="c1">#incrby(self, name, amount=1)*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#自增key对应的值，当key不存在时，则创建key对应值是amount的值，否则则自增，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">amount自增数</span><span class="err">，</span><span class="n">必须是整数</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">incrbyfloat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#自增key对应的值，key不存在时，则创建key=amount，否则自增，参数:</span>
</span></span><span class="line"><span class="cl">	<span class="n">amount自增数</span><span class="err">，</span><span class="n">必须是浮点型</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">decr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#自减key对应的值，key不存在时，则创建key=amount,否则则自减，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">amount自减数</span><span class="err">，</span><span class="n">必须是整数</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#在key对应的值后面追加内容，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">value要追加的字符串</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>图1</p>
<p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731190446938-1584690347.png" alt="img"></p>
<h3 id="36-hash哈希操作">3.6 Hash(哈希)操作</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#Hash在内存中的存储格式，value值必须是字符串类型，看图1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#加*表示重点</span>
</span></span><span class="line"><span class="cl"><span class="n">hset</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#name对应的hash中设置一个键值对，不存在创建，存在则修改，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">name指redis存储hash的name</span>
</span></span><span class="line"><span class="cl">    <span class="n">key指name对应的hash的key</span>
</span></span><span class="line"><span class="cl">    <span class="n">value指name对应的hash的value</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">hmset</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">mapping</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#在name对应的hash中批量设置键值对，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">mapping是字典</span><span class="err">，</span><span class="n">比如</span><span class="p">{</span><span class="s1">&#39;k1&#39;</span><span class="p">:</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span><span class="s1">&#39;k2&#39;</span><span class="p">,</span><span class="s1">&#39;v2&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">hget</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">key</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#在name对应的hash中获取根据key获取value值</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">hmget</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">keys</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#在name对应的hash中获取多个key对应的值。参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">keys要获取key的集合</span><span class="err">，</span><span class="n">如</span><span class="p">[</span><span class="s1">&#39;k1&#39;</span><span class="p">,</span><span class="s1">&#39;k2&#39;</span><span class="p">,</span><span class="s1">&#39;k3&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="n">args要获取的key</span><span class="err">，</span><span class="n">如k1</span><span class="p">,</span><span class="n">k2</span><span class="p">,</span><span class="n">k3</span>
</span></span><span class="line"><span class="cl">    <span class="n">实例</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">hmget</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,[</span><span class="s1">&#39;k1&#39;</span><span class="p">,</span><span class="s1">&#39;k2&#39;</span><span class="p">,</span><span class="s1">&#39;k3&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">         <span class="n">hmget</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="n">k1</span><span class="p">,</span><span class="n">k2</span><span class="p">,</span><span class="n">k3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">hgetall</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#获取name对应的hash的所有键值</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">hlen</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#获取name对应的hash的键值对的个数</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">hkeys</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#获取name对应的hash的所有的key的值</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">hvals</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#获取name对应的hash的所有的value的值</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">hexists</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#检查name对应的hash是否存在key</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">hdel</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="o">*</span><span class="n">keys</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#将name对应的hash指定的key的键值对删除</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">hincrby</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#自增name对应的hash中指定的key的值，不存在则创建key=amount,参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">amount自增数</span><span class="err">，</span><span class="n">必须是整数</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">hincrbyfloat</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#自增name对应的hash中指定key的值，不存在则创建key=amount,参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">amount自增数</span><span class="err">，</span><span class="n">必须是浮点数</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">hscan</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">cursor</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#增量式迭代获取，对于数据大的非常有用，hscan可以实现分片式获取数据，并非一次性将数据全部获取，导致内存被撑爆，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">cursor游标</span><span class="err">，</span><span class="n">基于游标分批获取数据</span>
</span></span><span class="line"><span class="cl">    <span class="n">match匹配指定key</span><span class="err">，</span><span class="n">默认None</span><span class="err">，</span><span class="n">表示所有的key</span>
</span></span><span class="line"><span class="cl">    <span class="n">count每次分片最少获取个数</span><span class="err">，</span><span class="n">默认None表示采用redis默认分片个数</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">hscan_iter</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#利用yield封装hscan创建生成器，实现分批去redis中获取数据，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">match匹配指定key</span><span class="err">，</span><span class="n">默认Nnoe</span><span class="err">，</span><span class="n">表示所有的key</span>
</span></span><span class="line"><span class="cl">    <span class="n">count每次分片最少获取个数</span><span class="err">，</span><span class="n">默认None表示采用redis的默认分片个数</span>
</span></span><span class="line"><span class="cl">    <span class="n">实例</span><span class="err">：</span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">hscan_iter</span><span class="p">(</span><span class="s1">&#39;xx&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        	<span class="nb">print</span> <span class="n">item</span>    
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl"><span class="c1"># 区分hgetall和hscan_iter            </span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731190500333-1304763885.png" alt="img"></p>
<h3 id="37-list列表操作">3.7 List(列表)操作</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#List在内存中按照一个name对应一个List来存储，看图1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#加*表示重点</span>
</span></span><span class="line"><span class="cl"><span class="n">lpush</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">values</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#在name对应的list中添加元素，每个新的元素都添加到列表的最左边，如：</span>
</span></span><span class="line"><span class="cl">	<span class="n">r</span><span class="o">.</span><span class="n">lpush</span><span class="p">(</span><span class="s1">&#39;oo&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">结果为</span><span class="p">:</span> <span class="mi">33</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">11</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 扩展：</span>
</span></span><span class="line"><span class="cl">        <span class="n">rpush</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span> <span class="n">表示从右向左操作</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">lpushx</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#在name对应的list中添加元素，只有name存在时，值添加到list最左边</span>
</span></span><span class="line"><span class="cl">	<span class="n">扩展</span><span class="err">：</span><span class="n">rpushx</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="n">表示从右向左操作</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">llen</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#name对应的list元素的个数</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">linsert</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">refvalue</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="c1">#在name对应的list的某一个值前面或后面插入一个值，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">where可以式BEFORE或AFTER</span><span class="err">（</span><span class="n">小写也可以</span><span class="err">）</span>
</span></span><span class="line"><span class="cl">    <span class="n">refvalue标杆值</span><span class="err">，</span><span class="n">在它前后插入数据</span><span class="err">，</span><span class="n">如果存在多个标杆值</span><span class="err">，</span><span class="n">以找到的第一个为准</span>
</span></span><span class="line"><span class="cl">    <span class="n">value要插入的值</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">r</span><span class="o">.</span><span class="n">lset</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#对name对应的list的某一个索引位置重新赋值，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">index指需要重新赋值的索引位置</span>
</span></span><span class="line"><span class="cl">    <span class="n">value要设置的值</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">r</span><span class="o">.</span><span class="n">lrem</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#在name对应的list中删除指定的值，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">value要删除的值</span>
</span></span><span class="line"><span class="cl">    <span class="n">num</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">    	<span class="n">num</span><span class="o">=</span><span class="mi">0</span><span class="n">表示删除该list中所有指定值</span>
</span></span><span class="line"><span class="cl">        <span class="n">num</span><span class="o">=</span><span class="mi">2</span><span class="n">表示从前到后删除两个</span>
</span></span><span class="line"><span class="cl">        <span class="n">num</span><span class="o">=-</span><span class="mi">2</span><span class="n">表示从后到前删除两个</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="n">lpop</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#在name对应的list左侧获取第一个元素并在list中移除，返回值则是该元素</span>
</span></span><span class="line"><span class="cl">	<span class="n">扩展</span><span class="err">：</span><span class="n">rpop</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="n">表示从右向左操作</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">lindex</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#在name对应的list中根据索引获取list元素</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">lrange</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#在name对应的list分片获取数据，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">start开始的索引位置</span>
</span></span><span class="line"><span class="cl">    <span class="n">end结束的索引位置</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">ltrim</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#在name对应的list中移除没有在start-end索引之间的值，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">start开始的索引位置</span>
</span></span><span class="line"><span class="cl">    <span class="n">end结束的索引位置</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">rpoplpush</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#从一个列表取出最右边的元素，提示添加到另一个list的最左边，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">src要获取数据的list的name</span>
</span></span><span class="line"><span class="cl">    <span class="n">dst要添加数据的list的name</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">blpop</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span><span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="c1">#将多个list排列,按照从左到右去pop对应list的元素，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">keys是个集合</span><span class="err">，</span><span class="n">要pop元素的集合</span>
</span></span><span class="line"><span class="cl">    <span class="n">timeout超时时间</span><span class="err">，</span><span class="n">当元素所有list的元素获取玩之后</span><span class="err">，</span><span class="n">阻塞等待list内数据局的时间秒</span><span class="err">，</span><span class="mi">0</span><span class="n">表示医院阻塞</span><span class="err">，</span>
</span></span><span class="line"><span class="cl">    <span class="n">扩展</span><span class="err">：</span><span class="n">r</span><span class="o">.</span><span class="n">brpop</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span><span class="err">，</span><span class="n">从右向左获取数据</span><span class="err">，</span><span class="n">应用场景</span><span class="err">：</span><span class="n">爬虫实现简单分布式</span><span class="err">：</span><span class="n">多个url放到列表里</span><span class="err">，</span><span class="n">往里不停放URL</span><span class="err">，</span><span class="n">程序循环取值</span><span class="err">，</span><span class="n">但是只能一台机器运行取值</span><span class="err">，</span><span class="n">可以把url放到redis中</span><span class="err">，</span><span class="n">多台机器从redis中取值</span><span class="err">，</span><span class="n">爬取数据</span><span class="err">，</span><span class="n">实现简单分布式</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">brpoplpush</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>    
</span></span><span class="line"><span class="cl"><span class="c1">#从一个列表的右侧移除一个元素，并将其添加到另一个list的左侧，参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">src取出并要移除元素的list的name</span>
</span></span><span class="line"><span class="cl">    <span class="n">dst要插入元素的list的name</span>
</span></span><span class="line"><span class="cl">    <span class="n">timeout当src对应的list中没有数据时</span><span class="err">，</span><span class="n">阻塞等待其有数据的超时时间秒</span><span class="err">，</span><span class="mi">0</span><span class="n">表示医院阻塞</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="n">自定义增量迭代</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 由于redis类库中没有提供对列表元素的增量迭代，如果想要循环name对应的列表的所有元素，那么就需要：</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 1、获取name对应的所有列表</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 2、循环列表</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 但是，如果列表非常大，那么就有可能在第一步时就将程序的内容撑爆，所有有必要自定义一个增量迭代的功能：</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">redis</span>
</span></span><span class="line"><span class="cl"><span class="n">conn</span><span class="o">=</span><span class="n">redis</span><span class="o">.</span><span class="n">Redis</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">6379</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># conn.lpush(&#39;test&#39;,*[1,2,3,4,45,5,6,7,7,8,43,5,6,768,89,9,65,4,23,54,6757,8,68])</span>
</span></span><span class="line"><span class="cl"><span class="c1"># conn.flushall()</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">scan_list</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">count</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">index</span><span class="o">=</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">data_list</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">lrange</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">index</span><span class="p">,</span><span class="n">count</span><span class="o">+</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">data_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span>
</span></span><span class="line"><span class="cl">        <span class="n">index</span><span class="o">+=</span><span class="n">count</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">yield</span> <span class="n">item</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">lrange</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">scan_list</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731190515553-809922777.png" alt="img"></p>
<h3 id="38-set集合操作">3.8 Set(集合)操作</h3>
<h3 id="39-其他操作">3.9 其他操作</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">delete</span><span class="p">(</span><span class="o">*</span><span class="n">names</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#删除redis中任意数据类型</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">exists</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#检查redis的name是否存在</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">keys</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#根据模型获取redis的name，其他参数：</span>
</span></span><span class="line"><span class="cl">	<span class="n">KEYS</span> <span class="o">*</span> <span class="n">匹配数据库中所有</span> <span class="n">key</span> <span class="err">。</span>
</span></span><span class="line"><span class="cl">    <span class="n">KEYS</span> <span class="n">h</span><span class="err">?</span><span class="n">llo</span> <span class="n">匹配</span> <span class="n">hello</span> <span class="err">，</span> <span class="n">hallo</span> <span class="n">和</span> <span class="n">hxllo</span> <span class="n">等</span><span class="err">。</span>
</span></span><span class="line"><span class="cl">    <span class="n">KEYS</span> <span class="n">h</span><span class="o">*</span><span class="n">llo</span> <span class="n">匹配</span> <span class="n">hllo</span> <span class="n">和</span> <span class="n">heeeeello</span> <span class="n">等</span><span class="err">。</span>
</span></span><span class="line"><span class="cl">    <span class="n">KEYS</span> <span class="n">h</span><span class="p">[</span><span class="n">ae</span><span class="p">]</span><span class="n">llo</span> <span class="n">匹配</span> <span class="n">hello</span> <span class="n">和</span> <span class="n">hallo</span> <span class="err">，</span><span class="n">不匹配</span> <span class="n">hillo</span> 
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="n">expire</span><span class="p">(</span><span class="n">name</span> <span class="p">,</span><span class="n">time</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#为某个redis的某个name设置超时时间</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">rename</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#对redis的name重命名</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">move</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#将redis的某个值移动到指定的db下</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">randomkey</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="c1">#随机获取一个redis的name，不删除</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#获取nmae对应值的类型</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">scan</span><span class="p">(</span><span class="n">cursor</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">scan_iter</span><span class="p">(</span><span class="n">match</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#同字符串操作，用于增量迭代获取key</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="310-管道">3.10 管道</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">如果想要在一次请求中指定多个命令</span><span class="err">，</span><span class="n">则可以使用pipline实现一次请求指定多个命令</span><span class="err">，</span><span class="n">并且默认情况下一次pipline</span> <span class="n">是原子性操作</span><span class="err">。</span><span class="c1">#redis默认在执行每次请求都会创建（连接申请连接池）和断开（归还连接池）一次性操作，如果想要在一次请求中指定多个命令，则可以使用pipline实现一次请求指定多个命令，并且默认情况下一次pipline 是原子性操作（要么全部成功，要么全部失败）。</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#test.py</span>
</span></span><span class="line"><span class="cl">    <span class="kn">import</span> <span class="nn">redis</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">pool</span> <span class="o">=</span> <span class="n">redis</span><span class="o">.</span><span class="n">ConnectionPool</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;10.211.55.4&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">6379</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">r</span> <span class="o">=</span> <span class="n">redis</span><span class="o">.</span><span class="n">Redis</span><span class="p">(</span><span class="n">connection_pool</span><span class="o">=</span><span class="n">pool</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># pipe = r.pipeline(transaction=False)</span>
</span></span><span class="line"><span class="cl">    <span class="n">pipe</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">pipeline</span><span class="p">(</span><span class="n">transaction</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">pipe</span><span class="o">.</span><span class="n">multi</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">pipe</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;alex&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">pipe</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;role&#39;</span><span class="p">,</span> <span class="s1">&#39;sb&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">pipe</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="311-django使用redis">3.11 Django使用Redis</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#方式一，通用方式</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#utils\redis_pool.py</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">		<span class="kn">import</span> <span class="nn">redis</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#POOL连接池，max_connections=100指最大连接数是100</span>
</span></span><span class="line"><span class="cl">        <span class="n">POOL</span> <span class="o">=</span> <span class="n">redis</span><span class="o">.</span><span class="n">ConnectionPool</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">6379</span><span class="p">,</span><span class="n">max_connections</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">	<span class="c1">#app01\views.py</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">redis</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">utils.redis_pool</span> <span class="kn">import</span> <span class="n">POOL</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">HttpResponse</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">conn</span> <span class="o">=</span> <span class="n">redis</span><span class="o">.</span><span class="n">Redis</span><span class="p">(</span><span class="n">connection_pool</span><span class="o">=</span><span class="n">POOL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">conn</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;hobby&#39;</span><span class="p">,</span><span class="s1">&#39;sleep&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s1">&#39;设置成功&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">order</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">conn</span> <span class="o">=</span> <span class="n">redis</span><span class="o">.</span><span class="n">Redis</span><span class="p">(</span><span class="n">connection_pool</span><span class="o">=</span><span class="n">POOL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">ret</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;hobby&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s1">&#39;获取成功&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="c1">#方式二，安装django-redis模块</span>
</span></span><span class="line"><span class="cl">	<span class="n">pip</span> <span class="n">install</span> <span class="n">django</span><span class="o">-</span><span class="n">redis</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">#settings.py配置</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 只要这里配置之后，以后所有的缓存都缓存到redis中</span>
</span></span><span class="line"><span class="cl">        <span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;default&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;BACKEND&#34;</span><span class="p">:</span> <span class="s2">&#34;django_redis.cache.RedisCache&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;LOCATION&#34;</span><span class="p">:</span> <span class="s2">&#34;redis://127.0.0.1:6379&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;OPTIONS&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;CLIENT_CLASS&#34;</span><span class="p">:</span> <span class="s2">&#34;django_redis.client.DefaultClient&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;CONNECTION_POOL_KWARGS&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;max_connections&#34;</span><span class="p">:</span> <span class="mi">100</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># &#34;PASSWORD&#34;: &#34;123&#34;,</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#views.py</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span> <span class="n">两种使用方式</span> 
</span></span><span class="line"><span class="cl">    <span class="mi">1</span><span class="err">、</span><span class="n">使用cache</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">django.core.cache</span> <span class="kn">import</span> <span class="n">cache</span>
</span></span><span class="line"><span class="cl">    <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="n">user</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">2</span><span class="err">、</span><span class="n">直接使用conn对象</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">django_redis</span> <span class="kn">import</span> <span class="n">get_redis_connection</span>
</span></span><span class="line"><span class="cl">    <span class="n">conn</span> <span class="o">=</span> <span class="n">get_redis_connection</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">hgetall</span><span class="p">(</span><span class="s1">&#39;xxx&#39;</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="312-接口缓存">3.12 接口缓存</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework.viewsets</span> <span class="kn">import</span> <span class="n">GenericViewSet</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework.mixins</span> <span class="kn">import</span> <span class="n">ListModelMixin</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">luffyapi01.apps.home</span> <span class="kn">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">serializers</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.core.cache</span> <span class="kn">import</span> <span class="n">cache</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework.response</span> <span class="kn">import</span> <span class="n">Response</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">BannerView</span><span class="p">(</span><span class="n">GenericViewSet</span><span class="p">,</span> <span class="n">ListModelMixin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">queryset</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Banner</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_delete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_show</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;display_order&#39;</span><span class="p">)[</span>
</span></span><span class="line"><span class="cl">               <span class="p">:</span><span class="n">settings</span><span class="o">.</span><span class="n">BANNER_COUNTER</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">BannerSerializers</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">request</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">banner_list</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;banner_list&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">banner_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># 缓存没有去数据库拿，调用父类的方法去数据库中拿</span>
</span></span><span class="line"><span class="cl">            <span class="n">response</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1">#加到缓存</span>
</span></span><span class="line"><span class="cl">            <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;banner_list&#39;</span><span class="p">,</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">,</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">24</span><span class="p">)</span><span class="c1">#banner_list一天过期</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">response</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">banner_list</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="4-celery异步任务框架">4 Celery(异步任务框架)</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#了解</span>
</span></span><span class="line"><span class="cl">    <span class="n">Celery</span> <span class="n">官网</span><span class="err">：</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">celeryproject</span><span class="o">.</span><span class="n">org</span><span class="o">/</span>
</span></span><span class="line"><span class="cl">    <span class="n">Celery</span> <span class="n">官方文档英文版</span><span class="p">:</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">celeryproject</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">en</span><span class="o">/</span><span class="n">latest</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
</span></span><span class="line"><span class="cl">    <span class="n">Celery</span> <span class="n">官方文档中文版</span><span class="err">：</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">jinkan</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">celery</span><span class="o">/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">介绍</span><span class="err">：</span> <span class="n">Celery是一个简单</span><span class="err">、</span><span class="n">灵活</span><span class="err">、</span><span class="n">可靠处理大量消息的分布式系统</span><span class="err">，</span><span class="n">专注于实时处理的异步入任务队列</span><span class="err">，</span><span class="n">同时支持任务调度</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Celery</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">project</span> <span class="k">with</span> <span class="n">minimal</span> <span class="n">funding</span><span class="p">,</span> <span class="n">so</span> <span class="n">we</span> <span class="n">don</span><span class="err">’</span><span class="n">t</span> <span class="n">support</span> <span class="n">Microsoft</span> <span class="n">Windows</span><span class="o">.</span> <span class="n">Please</span> <span class="n">don</span><span class="err">’</span><span class="n">t</span> <span class="nb">open</span> <span class="nb">any</span> <span class="n">issues</span> <span class="n">related</span> <span class="n">to</span> <span class="n">that</span> <span class="n">platform</span><span class="o">.</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="41-celery使用">4.1 Celery使用</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#可以执行异步、延时、定时任务</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#安装 pip install celery</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="42-基本机构">4.2 基本机构</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#t_redis_pool\celery_1\celery_task.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">celery</span> <span class="kn">import</span> <span class="n">Celery</span>
</span></span><span class="line"><span class="cl">    <span class="n">broker</span> <span class="o">=</span> <span class="s1">&#39;redis://127.0.0.1:6379/1&#39;</span><span class="c1">#brokey任务队列</span>
</span></span><span class="line"><span class="cl">    <span class="n">backend</span> <span class="o">=</span> <span class="s1">&#39;redis://127.0.0.1:6379/2&#39;</span><span class="c1">#结构存储，执行完的结果存在这</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">app</span> <span class="o">=</span> <span class="n">Celery</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span><span class="n">broker</span><span class="o">=</span><span class="n">broker</span><span class="p">,</span><span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">#添加任务，使用装饰器@app.task</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@app</span><span class="o">.</span><span class="n">task</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#t_redis_pool\celery_1\celery_add.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">celery_task</span> <span class="kn">import</span> <span class="n">add</span>
</span></span><span class="line"><span class="cl">    <span class="n">ret</span> <span class="o">=</span> <span class="n">add</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span><span class="c1">#向add函数添加一个任务</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#t_redis_pool\celery_1\result1.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">celery_task</span> <span class="kn">import</span> <span class="n">app</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">celery.result</span> <span class="kn">import</span> <span class="n">AsyncResult</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">id</span> <span class="o">=</span> <span class="s1">&#39;3e397fd7-e0c1-4c5c-999c-2655a96793bb&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">a</span> <span class="o">=</span> <span class="n">AsyncResult</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">app</span><span class="o">=</span><span class="n">app</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">successful</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">a</span><span class="o">.</span><span class="n">failed</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;任务失败&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">a</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;PENDING&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;任务等待中被执行&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">a</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;RETRY&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;任务异常后正在重试&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">a</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;STARTED&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;任务已经开始被执行&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="43-包结构">4.3 包结构</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span><span class="lnt">96
</span><span class="lnt">97
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#新建一个包celery_task，包里面必须有个celery.py</span>
</span></span><span class="line"><span class="cl"><span class="c1">#celery_task\celery.py</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">celery</span> <span class="kn">import</span> <span class="n">Celery</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">broker</span> <span class="o">=</span> <span class="s1">&#39;redis://127.0.0.1:6379/1&#39;</span><span class="c1">#broker任务队列</span>
</span></span><span class="line"><span class="cl">    <span class="n">backend</span> <span class="o">=</span> <span class="s1">&#39;redis://127.0.0.1:6379/2&#39;</span><span class="c1">#结构存储，执行完的结果在这</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">app</span> <span class="o">=</span> <span class="n">Celery</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span><span class="n">broker</span><span class="o">=</span><span class="n">broker</span><span class="p">,</span><span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;celery_task.task1&#39;</span><span class="p">,</span><span class="s1">&#39;celery_task.task2&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#celery_task\task1.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.celery</span> <span class="kn">import</span> <span class="n">app</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@app</span><span class="o">.</span><span class="n">task</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">mutile</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#celery_task\task2.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.celery</span> <span class="kn">import</span> <span class="n">app</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@app</span><span class="o">.</span><span class="n">task</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#celery_task\test.py提交任务</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">celery_task.task1</span> <span class="kn">import</span> <span class="n">mutile</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">celery_task.task2</span> <span class="kn">import</span> <span class="n">add</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">ret</span> <span class="o">=</span> <span class="n">add</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">9</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">ret</span> <span class="o">=</span> <span class="n">mutile</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span><span class="c1">#上面的ret不用注释，可以提交多个</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">#提交延时任务</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">#需要utc时间</span>
</span></span><span class="line"><span class="cl">    <span class="n">eta</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">ret</span> <span class="o">=</span> <span class="n">add</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span><span class="mi">50</span><span class="p">),</span><span class="n">eta</span><span class="o">=</span><span class="n">eta</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#查看任务结果</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="kn">from</span> <span class="nn">celery_task</span> <span class="kn">import</span> <span class="n">app</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">celery.result</span> <span class="kn">import</span> <span class="n">AsyncResult</span>
</span></span><span class="line"><span class="cl">    <span class="nb">id</span> <span class="o">=</span> <span class="s1">&#39;3e397fd7-e0c1-4c5c-999c-2655a96793bb&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">async</span> <span class="o">=</span> <span class="n">AsyncResult</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">app</span><span class="o">=</span><span class="n">app</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="k">async</span><span class="o">.</span><span class="n">successful</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span> <span class="o">=</span> <span class="k">async</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="k">async</span><span class="o">.</span><span class="n">failed</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;任务失败&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="k">async</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;PENDING&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;任务等待中被执行&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="k">async</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;RETRY&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;任务异常后正在重试&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="k">async</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;STARTED&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;任务已经开始被执行&#39;</span><span class="p">)</span>    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#执行定时任务</span>
</span></span><span class="line"><span class="cl"><span class="c1">#celery_task\celery.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">celery</span> <span class="kn">import</span> <span class="n">Celery</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">broker</span> <span class="o">=</span> <span class="s1">&#39;redis://127.0.0.1:6379/1&#39;</span>  <span class="c1"># broker任务队列</span>
</span></span><span class="line"><span class="cl">    <span class="n">backend</span> <span class="o">=</span> <span class="s1">&#39;redis://127.0.0.1:6379/2&#39;</span>  <span class="c1"># 结构存储，执行完的结果存在这</span>
</span></span><span class="line"><span class="cl">    <span class="n">app</span> <span class="o">=</span> <span class="n">Celery</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">broker</span><span class="o">=</span><span class="n">broker</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span> <span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;celery_task.task1&#39;</span><span class="p">,</span> <span class="s1">&#39;celery_task.task2&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 执行定时任务</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 时区</span>
</span></span><span class="line"><span class="cl">    <span class="n">app</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">timezone</span> <span class="o">=</span> <span class="s1">&#39;Asia/Shanghai&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 是否使用UTC</span>
</span></span><span class="line"><span class="cl">    <span class="n">app</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">enable_utc</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 任务的定时配置</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">celery.schedules</span> <span class="kn">import</span> <span class="n">crontab</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">app</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">beat_schedule</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;add-task&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;task&#39;</span><span class="p">:</span> <span class="s1">&#39;celery_task.task1.add&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># &#39;schedule&#39;: timedelta(seconds=3),</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;schedule&#39;</span><span class="p">:</span> <span class="n">crontab</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">day_of_week</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>  <span class="c1"># 每周一早八点</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;args&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">#pycharm终端执行</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">#启动worker，等待任务</span>
</span></span><span class="line"><span class="cl">	<span class="o">-</span><span class="n">celery</span> <span class="n">worker</span> <span class="o">-</span><span class="n">A</span> <span class="n">celery_task</span> <span class="o">-</span><span class="n">l</span> <span class="n">info</span> <span class="o">-</span><span class="n">P</span> <span class="n">eventlet</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#启动beat，提交任务，如果报错删除产生的文件</span>
</span></span><span class="line"><span class="cl">	<span class="o">-</span><span class="n">celery</span> <span class="n">beat</span> <span class="o">-</span><span class="n">A</span> <span class="n">celery_task</span> <span class="o">-</span><span class="n">l</span> <span class="n">info</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="5-课程模块">5 课程模块</h2>
<h3 id="51-课程表结构分析优化">5.1 课程表结构分析、优化</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#  ForeignKey的字段：</span>
</span></span><span class="line"><span class="cl">	<span class="o">-</span><span class="n">related_name</span> <span class="n">反向操作时</span><span class="err">，</span><span class="n">使用的字段名</span><span class="err">，</span><span class="n">用于代替原反向查询时的</span><span class="s1">&#39;表名_set&#39;</span><span class="err">。</span>
</span></span><span class="line"><span class="cl">    <span class="o">-</span><span class="n">related_query_name</span> <span class="err">：</span><span class="n">反向查询操作时</span><span class="err">，</span><span class="n">使用的连接前缀</span><span class="err">，</span><span class="n">用于替换表名</span><span class="err">。</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">################1   course/models.py</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">luffyapi.utils.models</span> <span class="kn">import</span> <span class="n">BaseModel</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 实际路飞课程相关表，以免费课为例</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CourseCategory</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;分类
</span></span></span><span class="line"><span class="cl"><span class="s2">    python,linux,go, 网络安全
</span></span></span><span class="line"><span class="cl"><span class="s2">    跟课程是一对多的关系
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;分类名称&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">db_table</span> <span class="o">=</span> <span class="s2">&#34;luffy_course_category&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&#34;分类&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="n">verbose_name</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s2">&#34;</span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Course</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;课程&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">course_type</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;付费&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;VIP专享&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;学位课程&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">level_choices</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;初级&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;中级&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;高级&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">status_choices</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;上线&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;下线&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;预上线&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 原始字段</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;课程名称&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">course_img</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s2">&#34;courses&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;封面图片&#34;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">course_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SmallIntegerField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">course_type</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;付费类型&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 使用这个字段的原因</span>
</span></span><span class="line"><span class="cl">    <span class="n">brief</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">2048</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;详情介绍&#34;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">level</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SmallIntegerField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">level_choices</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;难度等级&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;发布日期&#34;</span><span class="p">,</span> <span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">period</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;建议学习周期(day)&#34;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">attachment_path</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FileField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s2">&#34;attachment&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;课件路径&#34;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SmallIntegerField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">status_choices</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;课程状态&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">price</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="n">max_digits</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;课程原价&#34;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 优化字段</span>
</span></span><span class="line"><span class="cl">    <span class="n">students</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;学习人数&#34;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">sections</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;总课时数量&#34;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">pub_sections</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;课时更新数量&#34;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 关联字段</span>
</span></span><span class="line"><span class="cl">    <span class="n">teacher</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&#34;Teacher&#34;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">DO_NOTHING</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;授课老师&#34;</span><span class="p">,</span><span class="n">db_constraint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">course_category</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&#34;CourseCategory&#34;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span> <span class="n">db_constraint</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;课程分类&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">db_table</span> <span class="o">=</span> <span class="s2">&#34;luffy_course&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&#34;课程&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&#34;课程&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s2">&#34;</span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Teacher</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;导师
</span></span></span><span class="line"><span class="cl"><span class="s2">    跟课程一对多，关联字段写在课程表中
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">role_choices</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;讲师&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;导师&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;班主任&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;导师名&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">role</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SmallIntegerField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">role_choices</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;导师身份&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;职位、职称&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">signature</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;导师签名&#34;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&#34;导师签名&#34;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">image</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s2">&#34;teacher&#34;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;导师封面&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">brief</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;导师描述&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">db_table</span> <span class="o">=</span> <span class="s2">&#34;luffy_teacher&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&#34;导师&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="n">verbose_name</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s2">&#34;</span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CourseChapter</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;章节
</span></span></span><span class="line"><span class="cl"><span class="s2">    章节跟课程是一（课程）对多（章节多）
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">course</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&#34;Course&#34;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;coursechapters&#39;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;课程名称&#34;</span><span class="p">,</span><span class="n">db_constraint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">chapter</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SmallIntegerField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;第几章&#34;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;章节标题&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">summary</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;章节介绍&#34;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;发布日期&#34;</span><span class="p">,</span> <span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">db_table</span> <span class="o">=</span> <span class="s2">&#34;luffy_course_chapter&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&#34;章节&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="n">verbose_name</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s2">&#34;</span><span class="si">%s</span><span class="s2">:(第</span><span class="si">%s</span><span class="s2">章)</span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chapter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CourseSection</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;课时
</span></span></span><span class="line"><span class="cl"><span class="s2">        章节和课时是一对多的关系，关联字段写在多的一方，课时
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">section_type_choices</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;文档&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;练习&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;视频&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">chapter</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&#34;CourseChapter&#34;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;coursesections&#39;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;课程章节&#34;</span><span class="p">,</span><span class="n">db_constraint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;课时标题&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">orders</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveSmallIntegerField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;课时排序&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">section_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SmallIntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">section_type_choices</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;课时种类&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">section_link</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;课时链接&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                    <span class="n">help_text</span><span class="o">=</span><span class="s2">&#34;若是video，填vid,若是文档，填link&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">duration</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;视频时长&#34;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>  <span class="c1"># 仅在前端展示使用</span>
</span></span><span class="line"><span class="cl">    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;发布时间&#34;</span><span class="p">,</span> <span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">free_trail</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;是否可试看&#34;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">db_table</span> <span class="o">=</span> <span class="s2">&#34;luffy_course_Section&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&#34;课时&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="n">verbose_name</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s2">&#34;</span><span class="si">%s</span><span class="s2">-</span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chapter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">################2 utils/models/BaseModel</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 后期课程表，轮播图表，都会用到这些字段</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">BaseModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">is_delete</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;是否删除&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">is_show</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;是否展示&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 修改成这样</span>
</span></span><span class="line"><span class="cl">    <span class="n">created_time</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;创建时间&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">updated_time</span>  <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;最后更新时间&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">orders</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">abstract</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># 一定不要忘了</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">创建应用python</span> <span class="o">../../</span><span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">startapp</span> <span class="n">course</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">################3 数据迁移</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">makemigrations</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="52-课程测试数据准备">5.2 课程测试数据准备</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">--</span> <span class="n">老师表</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_teacher</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">brief</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:44:19.661327&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:46:54.246271&#39;</span><span class="p">,</span> <span class="s1">&#39;Alex&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;老男孩Python教学总监&#39;</span><span class="p">,</span> <span class="s1">&#39;金角大王&#39;</span><span class="p">,</span> <span class="s1">&#39;teacher/alex_icon.png&#39;</span><span class="p">,</span> <span class="s1">&#39;老男孩教育CTO &amp; CO-FOUNDER 国内知名PYTHON语言推广者 51CTO学院2016</span><span class="se">\201</span><span class="s1">7年度最受学员喜爱10大讲师之一 多款开源软件作者 曾任职公安部、飞信、中金公司、NOKIA中国研究院、华尔街英语、ADVENT、汽车之家等公司&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> 
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_teacher</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">brief</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:45:25.092902&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:45:25.092936&#39;</span><span class="p">,</span> <span class="s1">&#39;Mjj&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;前美团前端项目组架构师&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;teacher/mjj_icon.png&#39;</span><span class="p">,</span> <span class="s1">&#39;是马JJ老师, 一个集美貌与才华于一身的男人，搞过几年IOS，又转了前端开发几年，曾就职于美团网任高级前端开发，后来因为不同意王兴(美团老板)的战略布局而出家做老师去了，有丰富的教学经验，开起车来也毫不含糊。一直专注在前端的前沿技术领域。同时，爱好抽烟、喝酒、烫头(锡纸烫)。 我的最爱是前端，因为前端妹子多。&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> 
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_teacher</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">brief</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:46:21.997846&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:46:21.997880&#39;</span><span class="p">,</span> <span class="s1">&#39;Lyy&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;老男孩Linux学科带头人&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;teacher/lyy_icon.png&#39;</span><span class="p">,</span> <span class="s1">&#39;Linux运维技术专家，老男孩Linux金牌讲师，讲课风趣幽默、深入浅出、声音洪亮到爆炸&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">课程分类表</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_category</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:40:58.690413&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:40:58.690477&#39;</span><span class="p">,</span> <span class="s1">&#39;Python&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> 
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_category</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:41:08.249735&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:41:08.249817&#39;</span><span class="p">,</span> <span class="s1">&#39;Linux&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">课程表数据</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">course_img</span><span class="p">,</span> <span class="n">course_type</span><span class="p">,</span> <span class="n">brief</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="n">attachment_path</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">students</span><span class="p">,</span> <span class="n">sections</span><span class="p">,</span> <span class="n">pub_sections</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">course_category_id</span><span class="p">,</span> <span class="n">teacher_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:54:33.095201&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:54:33.095238&#39;</span><span class="p">,</span> <span class="s1">&#39;Python开发21天入门&#39;</span><span class="p">,</span> <span class="s1">&#39;courses/alex_python.png&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14&#39;</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">231</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mf">0.00</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> 
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">course_img</span><span class="p">,</span> <span class="n">course_type</span><span class="p">,</span> <span class="n">brief</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="n">attachment_path</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">students</span><span class="p">,</span> <span class="n">sections</span><span class="p">,</span> <span class="n">pub_sections</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">course_category_id</span><span class="p">,</span> <span class="n">teacher_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:56:05.051103&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:56:05.051142&#39;</span><span class="p">,</span> <span class="s1">&#39;Python项目实战&#39;</span><span class="p">,</span> <span class="s1">&#39;courses/mjj_python.png&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;2019-07-14&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">340</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mf">99.00</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> 
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">course_img</span><span class="p">,</span> <span class="n">course_type</span><span class="p">,</span> <span class="n">brief</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="n">attachment_path</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">students</span><span class="p">,</span> <span class="n">sections</span><span class="p">,</span> <span class="n">pub_sections</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">course_category_id</span><span class="p">,</span> <span class="n">teacher_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:57:21.190053&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:57:21.190095&#39;</span><span class="p">,</span> <span class="s1">&#39;Linux系统基础5周入门精讲&#39;</span><span class="p">,</span> <span class="s1">&#39;courses/lyy_linux.png&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">219</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mf">39.00</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> 
</span></span><span class="line"><span class="cl"><span class="o">--</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">章节表数据</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_chapter</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">chapter</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">course_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:58:34.867005&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:00:58.276541&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;计算机原理&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> 
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_chapter</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">chapter</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">course_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:58:48.051543&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:01:22.024206&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;环境搭建&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> 
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_chapter</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">chapter</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">course_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:59:09.878183&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:01:40.048608&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;项目创建&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> 
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_chapter</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">chapter</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">course_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:59:37.448626&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:01:58.709652&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Linux环境创建&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">课时表数据</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_Section</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">section_type</span><span class="p">,</span> <span class="n">section_link</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">free_trail</span><span class="p">,</span> <span class="n">chapter_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:02:33.779098&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:02:33.779135&#39;</span><span class="p">,</span> <span class="s1">&#39;计算机原理上&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:02:33.779193&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> 
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_Section</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">section_type</span><span class="p">,</span> <span class="n">section_link</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">free_trail</span><span class="p">,</span> <span class="n">chapter_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:02:56.657134&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:02:56.657173&#39;</span><span class="p">,</span> <span class="s1">&#39;计算机原理下&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:02:56.657227&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> 
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_Section</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">section_type</span><span class="p">,</span> <span class="n">section_link</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">free_trail</span><span class="p">,</span> <span class="n">chapter_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:03:20.493324&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:03:52.329394&#39;</span><span class="p">,</span> <span class="s1">&#39;环境搭建上&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:03:20.493420&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> 
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_Section</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">section_type</span><span class="p">,</span> <span class="n">section_link</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">free_trail</span><span class="p">,</span> <span class="n">chapter_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:03:36.472742&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:03:36.472779&#39;</span><span class="p">,</span> <span class="s1">&#39;环境搭建下&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:03:36.472831&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> 
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_Section</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">section_type</span><span class="p">,</span> <span class="n">section_link</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">free_trail</span><span class="p">,</span> <span class="n">chapter_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:04:19.338153&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:04:19.338192&#39;</span><span class="p">,</span> <span class="s1">&#39;web项目的创建&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:04:19.338252&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> 
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_Section</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">section_type</span><span class="p">,</span> <span class="n">section_link</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">free_trail</span><span class="p">,</span> <span class="n">chapter_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:04:52.895855&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:04:52.895890&#39;</span><span class="p">,</span> <span class="s1">&#39;Linux的环境搭建&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:04:52.895942&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="53-课程主页页面测试">5.3 课程主页页面测试</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span><span class="lnt">331
</span><span class="lnt">332
</span><span class="lnt">333
</span><span class="lnt">334
</span><span class="lnt">335
</span><span class="lnt">336
</span><span class="lnt">337
</span><span class="lnt">338
</span><span class="lnt">339
</span><span class="lnt">340
</span><span class="lnt">341
</span><span class="lnt">342
</span><span class="lnt">343
</span><span class="lnt">344
</span><span class="lnt">345
</span><span class="lnt">346
</span><span class="lnt">347
</span><span class="lnt">348
</span><span class="lnt">349
</span><span class="lnt">350
</span><span class="lnt">351
</span><span class="lnt">352
</span><span class="lnt">353
</span><span class="lnt">354
</span><span class="lnt">355
</span><span class="lnt">356
</span><span class="lnt">357
</span><span class="lnt">358
</span><span class="lnt">359
</span><span class="lnt">360
</span><span class="lnt">361
</span><span class="lnt">362
</span><span class="lnt">363
</span><span class="lnt">364
</span><span class="lnt">365
</span><span class="lnt">366
</span><span class="lnt">367
</span><span class="lnt">368
</span><span class="lnt">369
</span><span class="lnt">370
</span><span class="lnt">371
</span><span class="lnt">372
</span><span class="lnt">373
</span><span class="lnt">374
</span><span class="lnt">375
</span><span class="lnt">376
</span><span class="lnt">377
</span><span class="lnt">378
</span><span class="lnt">379
</span><span class="lnt">380
</span><span class="lnt">381
</span><span class="lnt">382
</span><span class="lnt">383
</span><span class="lnt">384
</span><span class="lnt">385
</span><span class="lnt">386
</span><span class="lnt">387
</span><span class="lnt">388
</span><span class="lnt">389
</span><span class="lnt">390
</span><span class="lnt">391
</span><span class="lnt">392
</span><span class="lnt">393
</span><span class="lnt">394
</span><span class="lnt">395
</span><span class="lnt">396
</span><span class="lnt">397
</span><span class="lnt">398
</span><span class="lnt">399
</span><span class="lnt">400
</span><span class="lnt">401
</span><span class="lnt">402
</span><span class="lnt">403
</span><span class="lnt">404
</span><span class="lnt">405
</span><span class="lnt">406
</span><span class="lnt">407
</span><span class="lnt">408
</span><span class="lnt">409
</span><span class="lnt">410
</span><span class="lnt">411
</span><span class="lnt">412
</span><span class="lnt">413
</span><span class="lnt">414
</span><span class="lnt">415
</span><span class="lnt">416
</span><span class="lnt">417
</span><span class="lnt">418
</span><span class="lnt">419
</span><span class="lnt">420
</span><span class="lnt">421
</span><span class="lnt">422
</span><span class="lnt">423
</span><span class="lnt">424
</span><span class="lnt">425
</span><span class="lnt">426
</span><span class="lnt">427
</span><span class="lnt">428
</span><span class="lnt">429
</span><span class="lnt">430
</span><span class="lnt">431
</span><span class="lnt">432
</span><span class="lnt">433
</span><span class="lnt">434
</span><span class="lnt">435
</span><span class="lnt">436
</span><span class="lnt">437
</span><span class="lnt">438
</span><span class="lnt">439
</span><span class="lnt">440
</span><span class="lnt">441
</span><span class="lnt">442
</span><span class="lnt">443
</span><span class="lnt">444
</span><span class="lnt">445
</span><span class="lnt">446
</span><span class="lnt">447
</span><span class="lnt">448
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># 不要忘了注册路由</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># FreeCourse.vue</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">template</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="n">Header</span><span class="o">&gt;&lt;/</span><span class="n">Header</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;main&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">筛选条件</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;condition&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;</span><span class="n">ul</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;cate-list&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">li</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;title&#34;</span><span class="o">&gt;</span><span class="n">课程分类</span><span class="p">:</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">li</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;this&#34;</span><span class="o">&gt;</span><span class="n">全部</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">Python</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">Linux运维</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">Python进阶</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">开发工具</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">Go语言</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">机器学习</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">技术生涯</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;ordering&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">ul</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">li</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;title&#34;</span><span class="o">&gt;</span><span class="n">筛</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="n">选</span><span class="p">:</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">li</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;default this&#34;</span><span class="o">&gt;</span><span class="n">默认</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">li</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;hot&#34;</span><span class="o">&gt;</span><span class="n">人气</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">li</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;price&#34;</span><span class="o">&gt;</span><span class="n">价格</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;condition-result&#34;</span><span class="o">&gt;</span><span class="n">共21个课程</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">课程列表</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-list&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-item&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-image&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&#34;@/assets/img/course-cover.jpeg&#34;</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-info&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">h3</span><span class="o">&gt;</span><span class="n">Python开发21天入门</span> <span class="o">&lt;</span><span class="n">span</span><span class="o">&gt;&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&#34;@/assets/img/avatar1.svg&#34;</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="o">&gt;</span><span class="mi">100</span><span class="n">人已加入学习</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">h3</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;teather-info&#34;</span><span class="o">&gt;</span><span class="n">Alex</span> <span class="n">金角大王</span> <span class="n">老男孩Python教学总监</span> <span class="o">&lt;</span><span class="n">span</span><span class="o">&gt;</span><span class="n">共154课时</span><span class="o">/</span><span class="n">更新完成</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">ul</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-list&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;free&#34;</span><span class="o">&gt;</span><span class="n">免费</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;free&#34;</span><span class="o">&gt;</span><span class="n">免费</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;pay-box&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;discount-type&#34;</span><span class="o">&gt;</span><span class="n">限时免费</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;discount-price&#34;</span><span class="o">&gt;</span><span class="err">￥</span><span class="mf">0.00</span><span class="n">元</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;original-price&#34;</span><span class="o">&gt;</span><span class="n">原价</span><span class="err">：</span><span class="mf">9.00</span><span class="n">元</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;buy-now&#34;</span><span class="o">&gt;</span><span class="n">立即购买</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-item&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-image&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&#34;@/assets/img/course-cover.jpeg&#34;</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-info&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">h3</span><span class="o">&gt;</span><span class="n">Python开发21天入门</span> <span class="o">&lt;</span><span class="n">span</span><span class="o">&gt;&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&#34;@/assets/img/avatar1.svg&#34;</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="o">&gt;</span><span class="mi">100</span><span class="n">人已加入学习</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">h3</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;teather-info&#34;</span><span class="o">&gt;</span><span class="n">Alex</span> <span class="n">金角大王</span> <span class="n">老男孩Python教学总监</span> <span class="o">&lt;</span><span class="n">span</span><span class="o">&gt;</span><span class="n">共154课时</span><span class="o">/</span><span class="n">更新完成</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">ul</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-list&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;free&#34;</span><span class="o">&gt;</span><span class="n">免费</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;free&#34;</span><span class="o">&gt;</span><span class="n">免费</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;pay-box&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;discount-type&#34;</span><span class="o">&gt;</span><span class="n">限时免费</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;discount-price&#34;</span><span class="o">&gt;</span><span class="err">￥</span><span class="mf">0.00</span><span class="n">元</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;original-price&#34;</span><span class="o">&gt;</span><span class="n">原价</span><span class="err">：</span><span class="mf">9.00</span><span class="n">元</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;buy-now&#34;</span><span class="o">&gt;</span><span class="n">立即购买</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-item&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-image&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&#34;@/assets/img/course-cover.jpeg&#34;</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-info&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">h3</span><span class="o">&gt;</span><span class="n">Python开发21天入门</span> <span class="o">&lt;</span><span class="n">span</span><span class="o">&gt;&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&#34;@/assets/img/avatar1.svg&#34;</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="o">&gt;</span><span class="mi">100</span><span class="n">人已加入学习</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">h3</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;teather-info&#34;</span><span class="o">&gt;</span><span class="n">Alex</span> <span class="n">金角大王</span> <span class="n">老男孩Python教学总监</span> <span class="o">&lt;</span><span class="n">span</span><span class="o">&gt;</span><span class="n">共154课时</span><span class="o">/</span><span class="n">更新完成</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">ul</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-list&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;free&#34;</span><span class="o">&gt;</span><span class="n">免费</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;free&#34;</span><span class="o">&gt;</span><span class="n">免费</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;pay-box&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;discount-type&#34;</span><span class="o">&gt;</span><span class="n">限时免费</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;discount-price&#34;</span><span class="o">&gt;</span><span class="err">￥</span><span class="mf">0.00</span><span class="n">元</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;original-price&#34;</span><span class="o">&gt;</span><span class="n">原价</span><span class="err">：</span><span class="mf">9.00</span><span class="n">元</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;buy-now&#34;</span><span class="o">&gt;</span><span class="n">立即购买</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-item&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-image&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&#34;@/assets/img/course-cover.jpeg&#34;</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-info&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">h3</span><span class="o">&gt;</span><span class="n">Python开发21天入门</span> <span class="o">&lt;</span><span class="n">span</span><span class="o">&gt;&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&#34;@/assets/img/avatar1.svg&#34;</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="o">&gt;</span><span class="mi">100</span><span class="n">人已加入学习</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">h3</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;teather-info&#34;</span><span class="o">&gt;</span><span class="n">Alex</span> <span class="n">金角大王</span> <span class="n">老男孩Python教学总监</span> <span class="o">&lt;</span><span class="n">span</span><span class="o">&gt;</span><span class="n">共154课时</span><span class="o">/</span><span class="n">更新完成</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">ul</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-list&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;free&#34;</span><span class="o">&gt;</span><span class="n">免费</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;free&#34;</span><span class="o">&gt;</span><span class="n">免费</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;lesson-title&#34;</span><span class="o">&gt;</span><span class="mi">01</span> <span class="o">|</span> <span class="n">第1节</span><span class="err">：</span><span class="n">初识编码初识编码</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;pay-box&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;discount-type&#34;</span><span class="o">&gt;</span><span class="n">限时免费</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;discount-price&#34;</span><span class="o">&gt;</span><span class="err">￥</span><span class="mf">0.00</span><span class="n">元</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;original-price&#34;</span><span class="o">&gt;</span><span class="n">原价</span><span class="err">：</span><span class="mf">9.00</span><span class="n">元</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;buy-now&#34;</span><span class="o">&gt;</span><span class="n">立即购买</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="n">Footer</span><span class="o">&gt;&lt;/</span><span class="n">Footer</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">template</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">import</span> <span class="nn">Header</span> <span class="kn">from</span> <span class="s2">&#34;@/components/Head&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">import</span> <span class="nn">Footer</span> <span class="kn">from</span> <span class="s2">&#34;@/components/Footer&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">export</span> <span class="n">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">name</span><span class="p">:</span> <span class="s2">&#34;Course&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">category</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="n">components</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Header</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">Footer</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">style</span> <span class="n">scoped</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#f6f6f6;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">main</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">1100</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="p">:</span> <span class="mi">35</span><span class="n">px</span> <span class="n">auto</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">condition</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">35</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">25</span><span class="n">px</span> <span class="mi">30</span><span class="n">px</span> <span class="mi">25</span><span class="n">px</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span> <span class="mi">4</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">2</span><span class="n">px</span> <span class="mi">4</span><span class="n">px</span> <span class="mi">0</span> <span class="c1">#f0f0f0;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">cate</span><span class="o">-</span><span class="nb">list</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">1</span><span class="n">px</span> <span class="n">solid</span> <span class="c1">#333;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="o">-</span><span class="n">color</span><span class="p">:</span> <span class="n">rgba</span><span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mf">.05</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">18</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">17</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">cate</span><span class="o">-</span><span class="nb">list</span><span class="p">::</span><span class="n">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">content</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">display</span><span class="p">:</span> <span class="n">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">clear</span><span class="p">:</span> <span class="n">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">cate</span><span class="o">-</span><span class="nb">list</span> <span class="n">li</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">16</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">6</span><span class="n">px</span> <span class="mi">15</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">line</span><span class="o">-</span><span class="n">height</span><span class="p">:</span> <span class="mi">16</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">position</span><span class="p">:</span> <span class="n">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">transition</span><span class="p">:</span> <span class="nb">all</span> <span class="mf">.3</span><span class="n">s</span> <span class="n">ease</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">cursor</span><span class="p">:</span> <span class="n">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#4a4a4a;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="p">:</span> <span class="mi">1</span><span class="n">px</span> <span class="n">solid</span> <span class="n">transparent</span><span class="p">;</span> <span class="o">/*</span> <span class="n">transparent</span> <span class="n">透明</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">cate</span><span class="o">-</span><span class="nb">list</span> <span class="o">.</span><span class="n">title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#888;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">letter</span><span class="o">-</span><span class="n">spacing</span><span class="p">:</span> <span class="mf">.36</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">line</span><span class="o">-</span><span class="n">height</span><span class="p">:</span> <span class="mi">28</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">cate</span><span class="o">-</span><span class="nb">list</span> <span class="o">.</span><span class="n">this</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="p">:</span> <span class="mi">1</span><span class="n">px</span> <span class="n">solid</span> <span class="c1">#ffc210 !important;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span> <span class="mi">30</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">ordering</span><span class="p">::</span><span class="n">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">content</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">display</span><span class="p">:</span> <span class="n">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">clear</span><span class="p">:</span> <span class="n">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">ordering</span> <span class="n">ul</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">ordering</span> <span class="n">ul</span><span class="p">::</span><span class="n">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">content</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">display</span><span class="p">:</span> <span class="n">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">clear</span><span class="p">:</span> <span class="n">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">ordering</span> <span class="o">.</span><span class="n">condition</span><span class="o">-</span><span class="n">result</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#9b9b9b;</span>
</span></span><span class="line"><span class="cl">        <span class="n">line</span><span class="o">-</span><span class="n">height</span><span class="p">:</span> <span class="mi">28</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">ordering</span> <span class="n">ul</span> <span class="n">li</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">6</span><span class="n">px</span> <span class="mi">15</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">line</span><span class="o">-</span><span class="n">height</span><span class="p">:</span> <span class="mi">16</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">position</span><span class="p">:</span> <span class="n">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">transition</span><span class="p">:</span> <span class="nb">all</span> <span class="mf">.3</span><span class="n">s</span> <span class="n">ease</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">cursor</span><span class="p">:</span> <span class="n">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#4a4a4a;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">ordering</span> <span class="o">.</span><span class="n">title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">16</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#888;</span>
</span></span><span class="line"><span class="cl">        <span class="n">letter</span><span class="o">-</span><span class="n">spacing</span><span class="p">:</span> <span class="mf">.36</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">line</span><span class="o">-</span><span class="n">height</span><span class="p">:</span> <span class="mi">28</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">ordering</span> <span class="o">.</span><span class="n">this</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">ordering</span> <span class="o">.</span><span class="n">price</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">position</span><span class="p">:</span> <span class="n">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">ordering</span> <span class="o">.</span><span class="n">price</span><span class="p">::</span><span class="n">before</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">ordering</span> <span class="o">.</span><span class="n">price</span><span class="p">::</span><span class="n">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">cursor</span><span class="p">:</span> <span class="n">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">content</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">display</span><span class="p">:</span> <span class="n">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">0</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="mi">0</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="p">:</span> <span class="mi">5</span><span class="n">px</span> <span class="n">solid</span> <span class="n">transparent</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">position</span><span class="p">:</span> <span class="n">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">ordering</span> <span class="o">.</span><span class="n">price</span><span class="p">::</span><span class="n">before</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">5</span><span class="n">px</span> <span class="n">solid</span> <span class="c1">#aaa;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">2</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">top</span><span class="p">:</span> <span class="mi">2</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">ordering</span> <span class="o">.</span><span class="n">price</span><span class="p">::</span><span class="n">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">top</span><span class="p">:</span> <span class="mi">5</span><span class="n">px</span> <span class="n">solid</span> <span class="c1">#aaa;</span>
</span></span><span class="line"><span class="cl">        <span class="n">bottom</span><span class="p">:</span> <span class="mi">2</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span><span class="p">:</span><span class="n">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="p">:</span> <span class="mi">4</span><span class="n">px</span> <span class="mi">6</span><span class="n">px</span> <span class="mi">16</span><span class="n">px</span> <span class="n">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">.5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">1100</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">20</span><span class="n">px</span> <span class="mi">30</span><span class="n">px</span> <span class="mi">20</span><span class="n">px</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">35</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span> <span class="mi">2</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">cursor</span><span class="p">:</span> <span class="n">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="p">:</span> <span class="mi">2</span><span class="n">px</span> <span class="mi">3</span><span class="n">px</span> <span class="mi">16</span><span class="n">px</span> <span class="n">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">.1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">/*</span> <span class="n">css3</span><span class="mf">.0</span> <span class="n">过渡动画</span> <span class="n">hover</span> <span class="n">事件操作</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">        <span class="n">transition</span><span class="p">:</span> <span class="nb">all</span> <span class="mf">.2</span><span class="n">s</span> <span class="n">ease</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span><span class="p">::</span><span class="n">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">content</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">display</span><span class="p">:</span> <span class="n">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">clear</span><span class="p">:</span> <span class="n">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">顶级元素</span> <span class="n">父级元素</span>  <span class="n">当前元素</span><span class="p">{}</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">image</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">423</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="mi">210</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">right</span><span class="p">:</span> <span class="mi">30</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">image</span> <span class="n">img</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">100</span><span class="o">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span> <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">info</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">596</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">info</span> <span class="n">h3</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">26</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#333;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">weight</span><span class="p">:</span> <span class="n">normal</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">8</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">info</span> <span class="n">h3</span> <span class="n">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#9b9b9b;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">top</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">info</span> <span class="n">h3</span> <span class="n">span</span> <span class="n">img</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">11</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="n">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">right</span><span class="p">:</span> <span class="mi">7</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">info</span> <span class="o">.</span><span class="n">teather</span><span class="o">-</span><span class="n">info</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#9b9b9b;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">1</span><span class="n">px</span> <span class="n">solid</span> <span class="c1">#333;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="o">-</span><span class="n">color</span><span class="p">:</span> <span class="n">rgba</span><span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mf">.05</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">info</span> <span class="o">.</span><span class="n">teather</span><span class="o">-</span><span class="n">info</span> <span class="n">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">lesson</span><span class="o">-</span><span class="nb">list</span><span class="p">::</span><span class="n">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">content</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">display</span><span class="p">:</span> <span class="n">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">clear</span><span class="p">:</span> <span class="n">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">lesson</span><span class="o">-</span><span class="nb">list</span> <span class="n">li</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">44</span><span class="o">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#666;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">22</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">/*</span> <span class="n">background</span><span class="p">:</span> <span class="n">url</span><span class="p">(</span><span class="s2">&#34;路径&#34;</span><span class="p">)</span> <span class="n">是否平铺</span> <span class="n">x轴位置</span> <span class="n">y轴位置</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="n">url</span><span class="p">(</span><span class="s2">&#34;/src/assets/img/play-icon-gray.svg&#34;</span><span class="p">)</span> <span class="n">no</span><span class="o">-</span><span class="n">repeat</span> <span class="n">left</span> <span class="mi">4</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">15</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">lesson</span><span class="o">-</span><span class="nb">list</span> <span class="n">li</span> <span class="o">.</span><span class="n">lesson</span><span class="o">-</span><span class="n">title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="o">/*</span> <span class="n">以下3句</span><span class="err">，</span><span class="n">文本内容过多</span><span class="err">，</span><span class="n">会自动隐藏</span><span class="err">，</span><span class="n">并显示省略符号</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">        <span class="n">text</span><span class="o">-</span><span class="n">overflow</span><span class="p">:</span> <span class="n">ellipsis</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">overflow</span><span class="p">:</span> <span class="n">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">white</span><span class="o">-</span><span class="n">space</span><span class="p">:</span> <span class="n">nowrap</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">display</span><span class="p">:</span> <span class="n">inline</span><span class="o">-</span><span class="n">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">max</span><span class="o">-</span><span class="n">width</span><span class="p">:</span> <span class="mi">200</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">lesson</span><span class="o">-</span><span class="nb">list</span> <span class="n">li</span><span class="p">:</span><span class="n">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="o">-</span><span class="n">image</span><span class="p">:</span> <span class="n">url</span><span class="p">(</span><span class="s2">&#34;/src/assets/img/play-icon-yellow.svg&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">lesson</span><span class="o">-</span><span class="nb">list</span> <span class="n">li</span> <span class="o">.</span><span class="n">free</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">34</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#fd7b4d;</span>
</span></span><span class="line"><span class="cl">        <span class="n">vertical</span><span class="o">-</span><span class="n">align</span><span class="p">:</span> <span class="nb">super</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">10</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="p">:</span> <span class="mi">1</span><span class="n">px</span> <span class="n">solid</span> <span class="c1">#fd7b4d;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span> <span class="mi">2</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">text</span><span class="o">-</span><span class="n">align</span><span class="p">:</span> <span class="n">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">13</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">white</span><span class="o">-</span><span class="n">space</span><span class="p">:</span> <span class="n">nowrap</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">lesson</span><span class="o">-</span><span class="nb">list</span> <span class="n">li</span><span class="p">:</span><span class="n">hover</span> <span class="o">.</span><span class="n">free</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">color</span><span class="p">:</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">pay</span><span class="o">-</span><span class="n">box</span><span class="p">::</span><span class="n">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">content</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">display</span><span class="p">:</span> <span class="n">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">clear</span><span class="p">:</span> <span class="n">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">pay</span><span class="o">-</span><span class="n">box</span> <span class="o">.</span><span class="n">discount</span><span class="o">-</span><span class="nb">type</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">6</span><span class="n">px</span> <span class="mi">10</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">16</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="n">text</span><span class="o">-</span><span class="n">align</span><span class="p">:</span> <span class="n">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">right</span><span class="p">:</span> <span class="mi">8</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#fa6240;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="p">:</span> <span class="mi">1</span><span class="n">px</span> <span class="n">solid</span> <span class="c1">#fa6240;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span> <span class="mi">10</span><span class="n">px</span> <span class="mi">0</span> <span class="mi">10</span><span class="n">px</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">pay</span><span class="o">-</span><span class="n">box</span> <span class="o">.</span><span class="n">discount</span><span class="o">-</span><span class="n">price</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">24</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#fa6240;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">pay</span><span class="o">-</span><span class="n">box</span> <span class="o">.</span><span class="n">original</span><span class="o">-</span><span class="n">price</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">text</span><span class="o">-</span><span class="n">decoration</span><span class="p">:</span> <span class="n">line</span><span class="o">-</span><span class="n">through</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#9b9b9b;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">10</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">top</span><span class="p">:</span> <span class="mi">10</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">pay</span><span class="o">-</span><span class="n">box</span> <span class="o">.</span><span class="n">buy</span><span class="o">-</span><span class="n">now</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">120</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="mi">38</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="n">transparent</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#fa6240;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">16</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="p">:</span> <span class="mi">1</span><span class="n">px</span> <span class="n">solid</span> <span class="c1">#fd7b4d;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span> <span class="mi">3</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">transition</span><span class="p">:</span> <span class="nb">all</span> <span class="mf">.2</span><span class="n">s</span> <span class="n">ease</span><span class="o">-</span><span class="ow">in</span><span class="o">-</span><span class="n">out</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">text</span><span class="o">-</span><span class="n">align</span><span class="p">:</span> <span class="n">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">line</span><span class="o">-</span><span class="n">height</span><span class="p">:</span> <span class="mi">38</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">pay</span><span class="o">-</span><span class="n">box</span> <span class="o">.</span><span class="n">buy</span><span class="o">-</span><span class="n">now</span><span class="p">:</span><span class="n">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="p">:</span> <span class="mi">1</span><span class="n">px</span> <span class="n">solid</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">style</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="54-课程分类群查接口">5.4 课程分类群查接口</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># 路由</span>
</span></span><span class="line"><span class="cl"><span class="n">router</span> <span class="o">=</span> <span class="n">SimpleRouter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">router</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;categories&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">CourseCategoryViewSet</span><span class="p">,</span> <span class="s1">&#39;categories&#39;</span><span class="p">)</span>  <span class="c1"># 分类</span>
</span></span><span class="line"><span class="cl"><span class="n">router</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;free&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">CourseViewSet</span><span class="p">,</span> <span class="s1">&#39;free&#39;</span><span class="p">)</span>  <span class="c1"># 课程</span>
</span></span><span class="line"><span class="cl"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">router</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 视图views.py</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework.viewsets</span> <span class="kn">import</span> <span class="n">GenericViewSet</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework.mixins</span> <span class="kn">import</span> <span class="n">ListModelMixin</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">serializer</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CourseCategoryView</span><span class="p">(</span><span class="n">GenericViewSet</span><span class="p">,</span><span class="n">ListModelMixin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">queryset</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CourseCategory</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_delete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">is_show</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;orders&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">CourseCategorySerializer</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 序列化类</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">serializers</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CourseCategorySerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CourseCategory</span>
</span></span><span class="line"><span class="cl">        <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="55-课程群查接口">5.5 课程群查接口</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># 路由</span>
</span></span><span class="line"><span class="cl"><span class="n">router</span> <span class="o">=</span> <span class="n">SimpleRouter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">router</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;categories&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">CourseCategoryView</span><span class="p">,</span> <span class="s1">&#39;categories&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">router</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;free&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">CouresView</span><span class="p">,</span> <span class="s1">&#39;free&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">router</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 视图 views.py</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">.paginations</span> <span class="kn">import</span> <span class="n">PageNumberPagination</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django_filters.rest_framework</span> <span class="kn">import</span> <span class="n">DjangoFilterBackend</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework.filters</span> <span class="kn">import</span> <span class="n">OrderingFilter</span><span class="p">,</span><span class="n">SearchFilter</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">.filters</span> <span class="kn">import</span> <span class="n">MyFilter</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CouresView</span><span class="p">(</span><span class="n">GenericViewSet</span><span class="p">,</span><span class="n">ListModelMixin</span><span class="p">,</span><span class="n">RetrieveModelMixin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">queryset</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Course</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_delete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">is_show</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;orders&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">CourseModelSerializer</span>
</span></span><span class="line"><span class="cl">    <span class="n">pagination_class</span> <span class="o">=</span> <span class="n">PageNumberPagination</span>
</span></span><span class="line"><span class="cl">    <span class="n">filter_backends</span><span class="o">=</span><span class="p">[</span><span class="n">DjangoFilterBackend</span><span class="p">,</span><span class="n">OrderingFilter</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">ordering_fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;students&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">filter_fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;course_category&#39;</span><span class="p">,</span><span class="s1">&#39;students&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"> <span class="c1">###serializer</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">serializers</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CourseCategorySerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CourseCategory</span>
</span></span><span class="line"><span class="cl">        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">TeacherSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Teacher</span>
</span></span><span class="line"><span class="cl">        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;role_name&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;signature&#39;</span><span class="p">,</span> <span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="s1">&#39;brief&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CourseModelSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 子序列化的方式</span>
</span></span><span class="line"><span class="cl">    <span class="n">teacher</span> <span class="o">=</span> <span class="n">TeacherSerializer</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Course</span>
</span></span><span class="line"><span class="cl">        <span class="n">fields</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;id&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;name&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;course_img&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;brief&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;attachment_path&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;pub_sections&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;price&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;students&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;period&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;sections&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;course_type_name&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;level_name&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;status_name&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;teacher&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;section_list&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl"> <span class="c1"># models.py</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Course</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">	<span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@property</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">course_type_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_course_type_display</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@property</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">level_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_level_display</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@property</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">status_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_status_display</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@property</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">section_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">ll</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 根据课程取出所有章节(正向查询，字段名.all)</span>
</span></span><span class="line"><span class="cl">        <span class="n">course_chapter_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coursechapters</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">course_chapter</span> <span class="ow">in</span> <span class="n">course_chapter_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># 通过章节对象，取到章节下所有的课时(反向查询)</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># course_chapter,表名小写_set.all(),现在变成了course_chapter.coursesections.all()</span>
</span></span><span class="line"><span class="cl">            <span class="n">course_section_list</span> <span class="o">=</span> <span class="n">course_chapter</span><span class="o">.</span><span class="n">coursesections</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">course_section</span> <span class="ow">in</span> <span class="n">course_section_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">ll</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">course_section</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;section_link&#39;</span><span class="p">:</span> <span class="n">course_section</span><span class="o">.</span><span class="n">section_link</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="n">course_section</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;free_trail&#39;</span><span class="p">:</span> <span class="n">course_section</span><span class="o">.</span><span class="n">free_trail</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">})</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ll</span><span class="p">)</span> <span class="o">&gt;=</span><span class="mi">4</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">ll</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ll</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Teacher</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">	<span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">role_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 返回角色的中文</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_role_display</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="56-搜索组件和过滤">5.6 搜索组件和过滤</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">排序：
</span></span></span><span class="line"><span class="cl"><span class="s1">按id正序倒叙排序，按price正序倒叙排列
</span></span></span><span class="line"><span class="cl"><span class="s1">使用：http://127.0.0.1:8000/course/free/?ordering=-id
</span></span></span><span class="line"><span class="cl"><span class="s1">配置类：
</span></span></span><span class="line"><span class="cl"><span class="s1">    filter_backends=[OrderingFilter]
</span></span></span><span class="line"><span class="cl"><span class="s1">配置字段：
</span></span></span><span class="line"><span class="cl"><span class="s1">    ordering_fields=[&#39;id&#39;,&#39;price&#39;]
</span></span></span><span class="line"><span class="cl"><span class="s1">    
</span></span></span><span class="line"><span class="cl"><span class="s1">    
</span></span></span><span class="line"><span class="cl"><span class="s1">内置过滤：
</span></span></span><span class="line"><span class="cl"><span class="s1">使用：http://127.0.0.1:8000/course/free/?search=39
</span></span></span><span class="line"><span class="cl"><span class="s1">按照price过滤（表自有的字段直接过滤）
</span></span></span><span class="line"><span class="cl"><span class="s1">配置类：
</span></span></span><span class="line"><span class="cl"><span class="s1">    filter_backends=[SearchFilter]
</span></span></span><span class="line"><span class="cl"><span class="s1">配置字段：
</span></span></span><span class="line"><span class="cl"><span class="s1">    search_fields=[&#39;price&#39;]
</span></span></span><span class="line"><span class="cl"><span class="s1">    
</span></span></span><span class="line"><span class="cl"><span class="s1">扩展：django-filter
</span></span></span><span class="line"><span class="cl"><span class="s1">安装：
</span></span></span><span class="line"><span class="cl"><span class="s1">支持自由字段的过滤还支持外键字段的过滤
</span></span></span><span class="line"><span class="cl"><span class="s1">http://127.0.0.1:8000/course/free/?course_category=1   # 过滤分类为1 （python的所有课程）
</span></span></span><span class="line"><span class="cl"><span class="s1">配置类:
</span></span></span><span class="line"><span class="cl"><span class="s1">    filter_backends=[DjangoFilterBackend]
</span></span></span><span class="line"><span class="cl"><span class="s1">配置字段：
</span></span></span><span class="line"><span class="cl"><span class="s1">    filter_fields=[&#39;course_category&#39;]
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;&#39;&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="57-自定义过滤类看需求使用">5.7 自定义过滤类(看需求使用)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># filters.py</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 自定义过滤规则</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework.filters</span> <span class="kn">import</span> <span class="n">BaseFilterBackend</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">MyFilter</span><span class="p">(</span><span class="n">BaseFilterBackend</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">filter_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">queryset</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 真正的过滤规则</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># params=request.GET.get(&#39;teacher&#39;)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># queryset.filter(&#39;&#39;&#39;&#39;&#39;&#39;)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">queryset</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># 使用：在视图类中配置</span>
</span></span><span class="line"><span class="cl"><span class="n">filter_backends</span><span class="o">=</span><span class="p">[</span><span class="n">DjangoFilterBackend</span><span class="p">,</span><span class="n">OrderingFilter</span><span class="p">,</span><span class="n">MyFilter</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="58区间过滤项目使用">5.8区间过滤(项目使用)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#使用django-filter实现过滤</span>
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\course\filters.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">django_filters</span> <span class="kn">import</span> <span class="n">FilterSet</span><span class="p">,</span><span class="n">filters</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.filters</span> <span class="kn">import</span> <span class="n">BaseFilterBackend</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#区间过滤</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">CourseFilterSet</span><span class="p">(</span><span class="n">FilterSet</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">min_price</span> <span class="o">=</span> <span class="n">filters</span><span class="o">.</span><span class="n">NumberFilter</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;price&#39;</span><span class="p">,</span><span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;gt&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">max_price</span> <span class="o">=</span> <span class="n">filters</span><span class="o">.</span><span class="n">NumberFilter</span><span class="p">(</span><span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;price&#39;</span><span class="p">,</span><span class="n">lookup_expr</span><span class="o">=</span><span class="s1">&#39;lt&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Course</span>
</span></span><span class="line"><span class="cl">            <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;course_category&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">#自定义规则过滤</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">MyFilter</span><span class="p">(</span><span class="n">BaseFilterBackend</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">filter_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">queryset</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">queryset</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\course\views.py，视图中配置filter_backends=[DjangoFilterBackend]，filter_class = CourseFilterSet</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">#课程群查接口</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># from .paginations import PageNumberPagination</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">django_filters.rest_framework</span> <span class="kn">import</span> <span class="n">DjangoFilterBackend</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.filters</span> <span class="kn">import</span> <span class="n">OrderingFilter</span><span class="p">,</span><span class="n">SearchFilter</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.filters</span> <span class="kn">import</span> <span class="n">MyFilter</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#导入区间过滤</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.filters</span> <span class="kn">import</span> <span class="n">CourseFilterSet</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">CouresView</span><span class="p">(</span><span class="n">GenericViewSet</span><span class="p">,</span><span class="n">ListModelMixin</span><span class="p">,</span><span class="n">RetrieveModelMixin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">queryset</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Course</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_delete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">is_show</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;orders&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">CourseModelSerializer</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 内置分页</span>
</span></span><span class="line"><span class="cl">        <span class="n">pagination_class</span> <span class="o">=</span> <span class="n">PageNumberPagination</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">filter_backends</span><span class="o">=</span><span class="p">[</span><span class="n">DjangoFilterBackend</span><span class="p">,</span><span class="n">OrderingFilter</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">ordering_fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;students&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">filter_fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;course_category&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="c1"># 自定义分页PageNumberPagination</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework.pagination</span> <span class="kn">import</span> <span class="n">PageNumberPagination</span> <span class="k">as</span> <span class="n">DRFNumberPagination</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">PageNumberPagination</span><span class="p">(</span><span class="n">DRFNumberPagination</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">page_size</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="n">page_query_param</span> <span class="o">=</span> <span class="s1">&#39;page&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">max_page_size</span> <span class="o">=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl">    <span class="n">page_size_query_param</span> <span class="o">=</span> <span class="s1">&#39;page_size&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="59-前端主页详情页">5.9 前端主页详情页</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span><span class="lnt">331
</span><span class="lnt">332
</span><span class="lnt">333
</span><span class="lnt">334
</span><span class="lnt">335
</span><span class="lnt">336
</span><span class="lnt">337
</span><span class="lnt">338
</span><span class="lnt">339
</span><span class="lnt">340
</span><span class="lnt">341
</span><span class="lnt">342
</span><span class="lnt">343
</span><span class="lnt">344
</span><span class="lnt">345
</span><span class="lnt">346
</span><span class="lnt">347
</span><span class="lnt">348
</span><span class="lnt">349
</span><span class="lnt">350
</span><span class="lnt">351
</span><span class="lnt">352
</span><span class="lnt">353
</span><span class="lnt">354
</span><span class="lnt">355
</span><span class="lnt">356
</span><span class="lnt">357
</span><span class="lnt">358
</span><span class="lnt">359
</span><span class="lnt">360
</span><span class="lnt">361
</span><span class="lnt">362
</span><span class="lnt">363
</span><span class="lnt">364
</span><span class="lnt">365
</span><span class="lnt">366
</span><span class="lnt">367
</span><span class="lnt">368
</span><span class="lnt">369
</span><span class="lnt">370
</span><span class="lnt">371
</span><span class="lnt">372
</span><span class="lnt">373
</span><span class="lnt">374
</span><span class="lnt">375
</span><span class="lnt">376
</span><span class="lnt">377
</span><span class="lnt">378
</span><span class="lnt">379
</span><span class="lnt">380
</span><span class="lnt">381
</span><span class="lnt">382
</span><span class="lnt">383
</span><span class="lnt">384
</span><span class="lnt">385
</span><span class="lnt">386
</span><span class="lnt">387
</span><span class="lnt">388
</span><span class="lnt">389
</span><span class="lnt">390
</span><span class="lnt">391
</span><span class="lnt">392
</span><span class="lnt">393
</span><span class="lnt">394
</span><span class="lnt">395
</span><span class="lnt">396
</span><span class="lnt">397
</span><span class="lnt">398
</span><span class="lnt">399
</span><span class="lnt">400
</span><span class="lnt">401
</span><span class="lnt">402
</span><span class="lnt">403
</span><span class="lnt">404
</span><span class="lnt">405
</span><span class="lnt">406
</span><span class="lnt">407
</span><span class="lnt">408
</span><span class="lnt">409
</span><span class="lnt">410
</span><span class="lnt">411
</span><span class="lnt">412
</span><span class="lnt">413
</span><span class="lnt">414
</span><span class="lnt">415
</span><span class="lnt">416
</span><span class="lnt">417
</span><span class="lnt">418
</span><span class="lnt">419
</span><span class="lnt">420
</span><span class="lnt">421
</span><span class="lnt">422
</span><span class="lnt">423
</span><span class="lnt">424
</span><span class="lnt">425
</span><span class="lnt">426
</span><span class="lnt">427
</span><span class="lnt">428
</span><span class="lnt">429
</span><span class="lnt">430
</span><span class="lnt">431
</span><span class="lnt">432
</span><span class="lnt">433
</span><span class="lnt">434
</span><span class="lnt">435
</span><span class="lnt">436
</span><span class="lnt">437
</span><span class="lnt">438
</span><span class="lnt">439
</span><span class="lnt">440
</span><span class="lnt">441
</span><span class="lnt">442
</span><span class="lnt">443
</span><span class="lnt">444
</span><span class="lnt">445
</span><span class="lnt">446
</span><span class="lnt">447
</span><span class="lnt">448
</span><span class="lnt">449
</span><span class="lnt">450
</span><span class="lnt">451
</span><span class="lnt">452
</span><span class="lnt">453
</span><span class="lnt">454
</span><span class="lnt">455
</span><span class="lnt">456
</span><span class="lnt">457
</span><span class="lnt">458
</span><span class="lnt">459
</span><span class="lnt">460
</span><span class="lnt">461
</span><span class="lnt">462
</span><span class="lnt">463
</span><span class="lnt">464
</span><span class="lnt">465
</span><span class="lnt">466
</span><span class="lnt">467
</span><span class="lnt">468
</span><span class="lnt">469
</span><span class="lnt">470
</span><span class="lnt">471
</span><span class="lnt">472
</span><span class="lnt">473
</span><span class="lnt">474
</span><span class="lnt">475
</span><span class="lnt">476
</span><span class="lnt">477
</span><span class="lnt">478
</span><span class="lnt">479
</span><span class="lnt">480
</span><span class="lnt">481
</span><span class="lnt">482
</span><span class="lnt">483
</span><span class="lnt">484
</span><span class="lnt">485
</span><span class="lnt">486
</span><span class="lnt">487
</span><span class="lnt">488
</span><span class="lnt">489
</span><span class="lnt">490
</span><span class="lnt">491
</span><span class="lnt">492
</span><span class="lnt">493
</span><span class="lnt">494
</span><span class="lnt">495
</span><span class="lnt">496
</span><span class="lnt">497
</span><span class="lnt">498
</span><span class="lnt">499
</span><span class="lnt">500
</span><span class="lnt">501
</span><span class="lnt">502
</span><span class="lnt">503
</span><span class="lnt">504
</span><span class="lnt">505
</span><span class="lnt">506
</span><span class="lnt">507
</span><span class="lnt">508
</span><span class="lnt">509
</span><span class="lnt">510
</span><span class="lnt">511
</span><span class="lnt">512
</span><span class="lnt">513
</span><span class="lnt">514
</span><span class="lnt">515
</span><span class="lnt">516
</span><span class="lnt">517
</span><span class="lnt">518
</span><span class="lnt">519
</span><span class="lnt">520
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;course&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Header</span><span class="p">&gt;&lt;/</span><span class="nt">Header</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;main&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="c">&lt;!--</span> <span class="nx">筛选条件</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;condition&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;cate-list&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span><span class="nx">课程分类</span><span class="o">:</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">:class</span><span class="s">=&#34;filter.course_category==0?&#39;this&#39;:&#39;&#39;&#34;</span> <span class="nt">@click</span><span class="s">=&#34;filter.course_category=0&#34;</span><span class="p">&gt;</span><span class="na">全部</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">li</span> <span class="nt">:class</span><span class="s">=&#34;filter.course_category==category.id?&#39;this&#39;:&#39;&#39;&#34;</span> <span class="nt">v-for</span><span class="s">=&#34;category in category_list&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                        @click=&#34;filter.course_category=category.id&#34; :key=&#34;category.name&#34;&gt;{{category.name}}
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/li&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                &lt;/ul&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                &lt;div class=&#34;ordering&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;ul&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;li class=&#34;title&#34;&gt;筛&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;选:&lt;/li&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;li class=&#34;default&#34; :class=&#34;(filter.ordering==&#39;id&#39; || filter.ordering==&#39;-id&#39;)?&#39;this&#39;:&#39;&#39;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                            @click=&#34;filter.ordering=&#39;-id&#39;&#34;&gt;默认
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/li&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;li class=&#34;hot&#34; :class=&#34;(filter.ordering==&#39;students&#39; || filter.ordering==&#39;-students&#39;)?&#39;this&#39;:&#39;&#39;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                            @click=&#34;filter.ordering=(filter.ordering==&#39;-students&#39;?&#39;students&#39;:&#39;-students&#39;)&#34;&gt;人气
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/li&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;li class=&#34;price&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                            :class=&#34;filter.ordering==&#39;price&#39;?&#39;price_up this&#39;:(filter.ordering==&#39;-price&#39;?&#39;price_down this&#39;:&#39;&#39;)&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                            @click=&#34;filter.ordering=(filter.ordering==&#39;-price&#39;?&#39;price&#39;:&#39;-price&#39;)&#34;&gt;价格
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/li&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/ul&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;p class=&#34;condition-result&#34;&gt;共{{course_total}}个课程&lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">            &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">            &lt;!-- 课程列表 --&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">            &lt;div class=&#34;course-list&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                &lt;div class=&#34;course-item&#34; v-for=&#34;course in course_list&#34; :key=&#34;course.name&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;div class=&#34;course-image&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;img :src=&#34;course.course_img&#34; alt=&#34;&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;div class=&#34;course-info&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;h3&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;router-link :to=&#34;&#39;/free/detail/&#39;+course.id&#34;&gt;{{course.name}}&lt;/router-link&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;span&gt;&lt;img src=&#34;@/assets/img/avatar1.svg&#34; alt=&#34;&#34;&gt;{{course.students}}人已加入学习&lt;/span&gt;&lt;/h3&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;p class=&#34;teather-info&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            {{course.teacher.name}} {{course.teacher.title}} {{course.teacher.signature}}
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;span v-if=&#34;course.sections&gt;course.pub_sections&#34;&gt;共{{course.sections}}课时/已更新{{course.pub_sections}}课时&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;span v-else&gt;共{{course.sections}}课时/更新完成&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;ul class=&#34;section-list&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;li v-for=&#34;(section, key) in course.section_list&#34; :key=&#34;section.name&#34;&gt;&lt;span
</span></span></span><span class="line"><span class="cl"><span class="s">                                    class=&#34;section-title&#34;&gt;0{{key+1}}  |  {{section.name}}&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                                &lt;span class=&#34;free&#34; v-if=&#34;section.free_trail&#34;&gt;免费&lt;/span&gt;&lt;/li&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/ul&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;div class=&#34;pay-box&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;div v-if=&#34;course.discount_type&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                                &lt;span class=&#34;discount-type&#34;&gt;{{course.discount_type}}&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                                &lt;span class=&#34;discount-price&#34;&gt;￥{{course.real_price}}元&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                                &lt;span class=&#34;original-price&#34;&gt;原价：{{course.price}}元&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;span v-else class=&#34;discount-price&#34;&gt;￥{{course.price}}元&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                            &lt;span class=&#34;buy-now&#34;&gt;立即购买&lt;/span&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                        &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                    &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">            &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">            &lt;div class=&#34;course_pagination block&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">                &lt;el-pagination
</span></span></span><span class="line"><span class="cl"><span class="s">                        @size-change=&#34;handleSizeChange&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                        @current-change=&#34;handleCurrentChange&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                        :current-page.sync=&#34;filter.page&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                        :page-sizes=&#34;[2, 3, 5, 10]&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                        :page-size=&#34;filter.page_size&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                        layout=&#34;sizes, prev, pager, next&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">                        </span><span class="nt">:total</span><span class="s">=&#34;course_total&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="err">&lt;/</span><span class="na">el</span><span class="nt">-pagination</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Footer</span><span class="p">&gt;&lt;/</span><span class="nt">Footer</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">import</span> <span class="nx">Header</span> <span class="nx">from</span> <span class="s2">&#34;@/components/Head&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">import</span> <span class="nx">Footer</span> <span class="nx">from</span> <span class="s2">&#34;@/components/Footer&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Course&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">category_list</span><span class="o">:</span> <span class="p">[],</span> <span class="c1">// 课程分类列表
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">course_list</span><span class="o">:</span> <span class="p">[],</span>   <span class="c1">// 课程列表
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">course_total</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>   <span class="c1">// 当前课程的总数量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">filter</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">course_category</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// 当前用户选择的课程分类，刚进入页面默认为全部，值为0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="nx">ordering</span><span class="o">:</span> <span class="s2">&#34;-id&#34;</span><span class="p">,</span>    <span class="c1">// 数据的排序方式，默认值是-id，表示对于id进行降序排列
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="nx">page_size</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>       <span class="c1">// 单页数据量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="nx">page</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">this</span><span class="p">.</span><span class="nx">get_category</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">this</span><span class="p">.</span><span class="nx">get_course</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">Header</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">Footer</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">watch</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//当你监听的数据发生变化，就会执行函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="s2">&#34;filter.course_category&#34;</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">page</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">get_course</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;filter.ordering&#34;</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">get_course</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;filter.page_size&#34;</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">get_course</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;filter.page&#34;</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">get_course</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nx">handleSizeChange</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 每页数据量发生变化时执行的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">page</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">page_size</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">handleCurrentChange</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 页码发生变化时执行的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">page</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">get_category</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 获取课程分类信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">$axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">$settings</span><span class="p">.</span><span class="nx">base_url</span><span class="si">}</span><span class="sb">/course/categories/`</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">category_list</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}).</span><span class="k">catch</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">message</span><span class="o">:</span> <span class="s2">&#34;获取课程分类信息有误，请联系客服工作人员&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="p">})</span>
</span></span><span class="line"><span class="cl">                <span class="p">})</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">get_course</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 排序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="kd">let</span> <span class="nx">filters</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">ordering</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">ordering</span><span class="p">,</span> <span class="c1">// 排序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="p">};</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 判决是否进行分类课程的展示
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">course_category</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">filters</span><span class="p">.</span><span class="nx">course_category</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">course_category</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1">// 设置单页数据量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">page_size</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">filters</span><span class="p">.</span><span class="nx">page_size</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">page_size</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">filters</span><span class="p">.</span><span class="nx">page_size</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1">// 设置当前页码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">page</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">filters</span><span class="p">.</span><span class="nx">page</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">page</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">filters</span><span class="p">.</span><span class="nx">page</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1">// 获取课程列表信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">$axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">$settings</span><span class="p">.</span><span class="nx">base_url</span><span class="si">}</span><span class="sb">/course/free/`</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">params</span><span class="o">:</span> <span class="nx">filters</span>
</span></span><span class="line"><span class="cl">                <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// console.log(response.data);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">this</span><span class="p">.</span><span class="nx">course_list</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">results</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">course_total</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">count</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// console.log(this.course_list);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="p">}).</span><span class="k">catch</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">message</span><span class="o">:</span> <span class="s2">&#34;获取课程信息有误，请联系客服工作人员&#34;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">})</span>
</span></span><span class="line"><span class="cl">                <span class="p">})</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">background</span><span class="o">:</span> <span class="err">#</span><span class="nx">f6f6f6</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">main</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">width</span><span class="o">:</span> <span class="mi">1100</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">:</span> <span class="mi">35</span><span class="nx">px</span> <span class="nx">auto</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">condition</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">35</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">padding</span><span class="o">:</span> <span class="mi">25</span><span class="nx">px</span> <span class="mi">30</span><span class="nx">px</span> <span class="mi">25</span><span class="nx">px</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">background</span><span class="o">:</span> <span class="err">#</span><span class="nx">fff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">4</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">box</span><span class="o">-</span><span class="nx">shadow</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">2</span><span class="nx">px</span> <span class="mi">4</span><span class="nx">px</span> <span class="mi">0</span> <span class="err">#</span><span class="nx">f0f0f0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">cate</span><span class="o">-</span><span class="nx">list</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="mi">333</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">rgba</span><span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mf">.05</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">padding</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">18</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">17</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">cate</span><span class="o">-</span><span class="nx">list</span><span class="o">::</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">content</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">clear</span><span class="o">:</span> <span class="nx">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">cate</span><span class="o">-</span><span class="nx">list</span> <span class="nx">li</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">padding</span><span class="o">:</span> <span class="mi">6</span><span class="nx">px</span> <span class="mi">15</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">left</span><span class="o">:</span> <span class="mi">14</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">position</span><span class="o">:</span> <span class="nx">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">transition</span><span class="o">:</span> <span class="nx">all</span> <span class="mf">.3</span><span class="nx">s</span> <span class="nx">ease</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">4</span><span class="nx">a4a4a</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="nx">transparent</span><span class="p">;</span> <span class="cm">/* transparent 透明 */</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">cate</span><span class="o">-</span><span class="nx">list</span> <span class="p">.</span><span class="nx">title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">888</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">letter</span><span class="o">-</span><span class="nx">spacing</span><span class="o">:</span> <span class="mf">.36</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">padding</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">28</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">cate</span><span class="o">-</span><span class="nx">list</span> <span class="p">.</span><span class="k">this</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">ffc210</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="nx">ffc210</span> <span class="o">!</span><span class="nx">important</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">30</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">ordering</span><span class="o">::</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">content</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">clear</span><span class="o">:</span> <span class="nx">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">ordering</span> <span class="nx">ul</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">ordering</span> <span class="nx">ul</span><span class="o">::</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">content</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">clear</span><span class="o">:</span> <span class="nx">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">ordering</span> <span class="p">.</span><span class="nx">condition</span><span class="o">-</span><span class="nx">result</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">14</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">9</span><span class="nx">b9b9b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">28</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">ordering</span> <span class="nx">ul</span> <span class="nx">li</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">padding</span><span class="o">:</span> <span class="mi">6</span><span class="nx">px</span> <span class="mi">15</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">left</span><span class="o">:</span> <span class="mi">14</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">position</span><span class="o">:</span> <span class="nx">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">transition</span><span class="o">:</span> <span class="nx">all</span> <span class="mf">.3</span><span class="nx">s</span> <span class="nx">ease</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">4</span><span class="nx">a4a4a</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">ordering</span> <span class="p">.</span><span class="nx">title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">888</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">letter</span><span class="o">-</span><span class="nx">spacing</span><span class="o">:</span> <span class="mf">.36</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">padding</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">28</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">ordering</span> <span class="p">.</span><span class="k">this</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">ffc210</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">ordering</span> <span class="p">.</span><span class="nx">price</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">position</span><span class="o">:</span> <span class="nx">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">ordering</span> <span class="p">.</span><span class="nx">price</span><span class="o">::</span><span class="nx">before</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">ordering</span> <span class="p">.</span><span class="nx">price</span><span class="o">::</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">content</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">width</span><span class="o">:</span> <span class="mi">0</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">height</span><span class="o">:</span> <span class="mi">0</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">:</span> <span class="mi">5</span><span class="nx">px</span> <span class="nx">solid</span> <span class="nx">transparent</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">position</span><span class="o">:</span> <span class="nx">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">right</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">ordering</span> <span class="p">.</span><span class="nx">price</span><span class="o">::</span><span class="nx">before</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">5</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="nx">aaa</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">2</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">top</span><span class="o">:</span> <span class="mi">2</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">ordering</span> <span class="p">.</span><span class="nx">price</span><span class="o">::</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">top</span><span class="o">:</span> <span class="mi">5</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="nx">aaa</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">bottom</span><span class="o">:</span> <span class="mi">2</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">ordering</span> <span class="p">.</span><span class="nx">price_up</span><span class="o">::</span><span class="nx">before</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">ffc210</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">ordering</span> <span class="p">.</span><span class="nx">price_down</span><span class="o">::</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">top</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">ffc210</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span><span class="o">:</span><span class="nx">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">box</span><span class="o">-</span><span class="nx">shadow</span><span class="o">:</span> <span class="mi">4</span><span class="nx">px</span> <span class="mi">6</span><span class="nx">px</span> <span class="mi">16</span><span class="nx">px</span> <span class="nx">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">.5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">width</span><span class="o">:</span> <span class="mi">1100</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">background</span><span class="o">:</span> <span class="err">#</span><span class="nx">fff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">padding</span><span class="o">:</span> <span class="mi">20</span><span class="nx">px</span> <span class="mi">30</span><span class="nx">px</span> <span class="mi">20</span><span class="nx">px</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">35</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">2</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">box</span><span class="o">-</span><span class="nx">shadow</span><span class="o">:</span> <span class="mi">2</span><span class="nx">px</span> <span class="mi">3</span><span class="nx">px</span> <span class="mi">16</span><span class="nx">px</span> <span class="nx">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">.1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/* css3.0 过渡动画 hover 事件操作 */</span>
</span></span><span class="line"><span class="cl">        <span class="nx">transition</span><span class="o">:</span> <span class="nx">all</span> <span class="mf">.2</span><span class="nx">s</span> <span class="nx">ease</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span><span class="o">::</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">content</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">clear</span><span class="o">:</span> <span class="nx">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/* 顶级元素 父级元素  当前元素{} */</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">image</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">width</span><span class="o">:</span> <span class="mi">423</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">height</span><span class="o">:</span> <span class="mi">210</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">right</span><span class="o">:</span> <span class="mi">30</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">image</span> <span class="nx">img</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">max</span><span class="o">-</span><span class="nx">width</span><span class="o">:</span> <span class="mi">100</span><span class="o">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">max</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">210</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">info</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">width</span><span class="o">:</span> <span class="mi">596</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">info</span> <span class="nx">h3</span> <span class="nx">a</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">26</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">333</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">-</span><span class="nx">weight</span><span class="o">:</span> <span class="nx">normal</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">8</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">info</span> <span class="nx">h3</span> <span class="nx">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">14</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">9</span><span class="nx">b9b9b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">top</span><span class="o">:</span> <span class="mi">14</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">info</span> <span class="nx">h3</span> <span class="nx">span</span> <span class="nx">img</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">width</span><span class="o">:</span> <span class="mi">11</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">height</span><span class="o">:</span> <span class="nx">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">right</span><span class="o">:</span> <span class="mi">7</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">info</span> <span class="p">.</span><span class="nx">teather</span><span class="o">-</span><span class="nx">info</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">14</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">9</span><span class="nx">b9b9b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">14</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">padding</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">14</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="mi">333</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">rgba</span><span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mf">.05</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">info</span> <span class="p">.</span><span class="nx">teather</span><span class="o">-</span><span class="nx">info</span> <span class="nx">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">section</span><span class="o">-</span><span class="nx">list</span><span class="o">::</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">content</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">clear</span><span class="o">:</span> <span class="nx">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">section</span><span class="o">-</span><span class="nx">list</span> <span class="nx">li</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">width</span><span class="o">:</span> <span class="mi">44</span><span class="o">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">14</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">666</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">padding</span><span class="o">-</span><span class="nx">left</span><span class="o">:</span> <span class="mi">22</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/* background: url(&#34;路径&#34;) 是否平铺 x轴位置 y轴位置 */</span>
</span></span><span class="line"><span class="cl">        <span class="nx">background</span><span class="o">:</span> <span class="nx">url</span><span class="p">(</span><span class="s2">&#34;/src/assets/img/play-icon-gray.svg&#34;</span><span class="p">)</span> <span class="nx">no</span><span class="o">-</span><span class="nx">repeat</span> <span class="nx">left</span> <span class="mi">4</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">15</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">section</span><span class="o">-</span><span class="nx">list</span> <span class="nx">li</span> <span class="p">.</span><span class="nx">section</span><span class="o">-</span><span class="nx">title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/* 以下3句，文本内容过多，会自动隐藏，并显示省略符号 */</span>
</span></span><span class="line"><span class="cl">        <span class="nx">text</span><span class="o">-</span><span class="nx">overflow</span><span class="o">:</span> <span class="nx">ellipsis</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">overflow</span><span class="o">:</span> <span class="nx">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">white</span><span class="o">-</span><span class="nx">space</span><span class="o">:</span> <span class="nx">nowrap</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">display</span><span class="o">:</span> <span class="nx">inline</span><span class="o">-</span><span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">max</span><span class="o">-</span><span class="nx">width</span><span class="o">:</span> <span class="mi">200</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">section</span><span class="o">-</span><span class="nx">list</span> <span class="nx">li</span><span class="o">:</span><span class="nx">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">background</span><span class="o">-</span><span class="nx">image</span><span class="o">:</span> <span class="nx">url</span><span class="p">(</span><span class="s2">&#34;/src/assets/img/play-icon-yellow.svg&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">ffc210</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">section</span><span class="o">-</span><span class="nx">list</span> <span class="nx">li</span> <span class="p">.</span><span class="nx">free</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">width</span><span class="o">:</span> <span class="mi">34</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">height</span><span class="o">:</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">fd7b4d</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">vertical</span><span class="o">-</span><span class="nx">align</span><span class="o">:</span> <span class="kr">super</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">left</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="nx">fd7b4d</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">2</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">13</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">white</span><span class="o">-</span><span class="nx">space</span><span class="o">:</span> <span class="nx">nowrap</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">section</span><span class="o">-</span><span class="nx">list</span> <span class="nx">li</span><span class="o">:</span><span class="nx">hover</span> <span class="p">.</span><span class="nx">free</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">ffc210</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">ffc210</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">position</span><span class="o">:</span> <span class="nx">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">pay</span><span class="o">-</span><span class="nx">box</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">position</span><span class="o">:</span> <span class="nx">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">bottom</span><span class="o">:</span> <span class="mi">20</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">width</span><span class="o">:</span> <span class="mi">600</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">pay</span><span class="o">-</span><span class="nx">box</span><span class="o">::</span><span class="nx">after</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">content</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">clear</span><span class="o">:</span> <span class="nx">both</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">pay</span><span class="o">-</span><span class="nx">box</span> <span class="p">.</span><span class="nx">discount</span><span class="o">-</span><span class="nx">type</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">padding</span><span class="o">:</span> <span class="mi">6</span><span class="nx">px</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">fff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">right</span><span class="o">:</span> <span class="mi">8</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">background</span><span class="o">:</span> <span class="err">#</span><span class="nx">fa6240</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="nx">fa6240</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span> <span class="mi">0</span> <span class="mi">10</span><span class="nx">px</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">pay</span><span class="o">-</span><span class="nx">box</span> <span class="p">.</span><span class="nx">discount</span><span class="o">-</span><span class="nx">price</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">24</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">fa6240</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">pay</span><span class="o">-</span><span class="nx">box</span> <span class="p">.</span><span class="nx">original</span><span class="o">-</span><span class="nx">price</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">text</span><span class="o">-</span><span class="nx">decoration</span><span class="o">:</span> <span class="nx">line</span><span class="o">-</span><span class="nx">through</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">14</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">9</span><span class="nx">b9b9b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">left</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">top</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">pay</span><span class="o">-</span><span class="nx">box</span> <span class="p">.</span><span class="nx">buy</span><span class="o">-</span><span class="nx">now</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">width</span><span class="o">:</span> <span class="mi">120</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">height</span><span class="o">:</span> <span class="mi">38</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">background</span><span class="o">:</span> <span class="nx">transparent</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">fa6240</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="nx">fd7b4d</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">3</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">transition</span><span class="o">:</span> <span class="nx">all</span> <span class="mf">.2</span><span class="nx">s</span> <span class="nx">ease</span><span class="o">-</span><span class="k">in</span><span class="o">-</span><span class="nx">out</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">38</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">position</span><span class="o">:</span> <span class="nx">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">right</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">bottom</span><span class="o">:</span> <span class="mi">5</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span><span class="o">-</span><span class="nx">item</span> <span class="p">.</span><span class="nx">pay</span><span class="o">-</span><span class="nx">box</span> <span class="p">.</span><span class="nx">buy</span><span class="o">-</span><span class="nx">now</span><span class="o">:</span><span class="nx">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">fff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">background</span><span class="o">:</span> <span class="err">#</span><span class="nx">ffc210</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="nx">ffc210</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">course</span> <span class="p">.</span><span class="nx">course_pagination</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">60</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="510-前端课程详情页">5.10 前端课程详情页</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span><span class="lnt">331
</span><span class="lnt">332
</span><span class="lnt">333
</span><span class="lnt">334
</span><span class="lnt">335
</span><span class="lnt">336
</span><span class="lnt">337
</span><span class="lnt">338
</span><span class="lnt">339
</span><span class="lnt">340
</span><span class="lnt">341
</span><span class="lnt">342
</span><span class="lnt">343
</span><span class="lnt">344
</span><span class="lnt">345
</span><span class="lnt">346
</span><span class="lnt">347
</span><span class="lnt">348
</span><span class="lnt">349
</span><span class="lnt">350
</span><span class="lnt">351
</span><span class="lnt">352
</span><span class="lnt">353
</span><span class="lnt">354
</span><span class="lnt">355
</span><span class="lnt">356
</span><span class="lnt">357
</span><span class="lnt">358
</span><span class="lnt">359
</span><span class="lnt">360
</span><span class="lnt">361
</span><span class="lnt">362
</span><span class="lnt">363
</span><span class="lnt">364
</span><span class="lnt">365
</span><span class="lnt">366
</span><span class="lnt">367
</span><span class="lnt">368
</span><span class="lnt">369
</span><span class="lnt">370
</span><span class="lnt">371
</span><span class="lnt">372
</span><span class="lnt">373
</span><span class="lnt">374
</span><span class="lnt">375
</span><span class="lnt">376
</span><span class="lnt">377
</span><span class="lnt">378
</span><span class="lnt">379
</span><span class="lnt">380
</span><span class="lnt">381
</span><span class="lnt">382
</span><span class="lnt">383
</span><span class="lnt">384
</span><span class="lnt">385
</span><span class="lnt">386
</span><span class="lnt">387
</span><span class="lnt">388
</span><span class="lnt">389
</span><span class="lnt">390
</span><span class="lnt">391
</span><span class="lnt">392
</span><span class="lnt">393
</span><span class="lnt">394
</span><span class="lnt">395
</span><span class="lnt">396
</span><span class="lnt">397
</span><span class="lnt">398
</span><span class="lnt">399
</span><span class="lnt">400
</span><span class="lnt">401
</span><span class="lnt">402
</span><span class="lnt">403
</span><span class="lnt">404
</span><span class="lnt">405
</span><span class="lnt">406
</span><span class="lnt">407
</span><span class="lnt">408
</span><span class="lnt">409
</span><span class="lnt">410
</span><span class="lnt">411
</span><span class="lnt">412
</span><span class="lnt">413
</span><span class="lnt">414
</span><span class="lnt">415
</span><span class="lnt">416
</span><span class="lnt">417
</span><span class="lnt">418
</span><span class="lnt">419
</span><span class="lnt">420
</span><span class="lnt">421
</span><span class="lnt">422
</span><span class="lnt">423
</span><span class="lnt">424
</span><span class="lnt">425
</span><span class="lnt">426
</span><span class="lnt">427
</span><span class="lnt">428
</span><span class="lnt">429
</span><span class="lnt">430
</span><span class="lnt">431
</span><span class="lnt">432
</span><span class="lnt">433
</span><span class="lnt">434
</span><span class="lnt">435
</span><span class="lnt">436
</span><span class="lnt">437
</span><span class="lnt">438
</span><span class="lnt">439
</span><span class="lnt">440
</span><span class="lnt">441
</span><span class="lnt">442
</span><span class="lnt">443
</span><span class="lnt">444
</span><span class="lnt">445
</span><span class="lnt">446
</span><span class="lnt">447
</span><span class="lnt">448
</span><span class="lnt">449
</span><span class="lnt">450
</span><span class="lnt">451
</span><span class="lnt">452
</span><span class="lnt">453
</span><span class="lnt">454
</span><span class="lnt">455
</span><span class="lnt">456
</span><span class="lnt">457
</span><span class="lnt">458
</span><span class="lnt">459
</span><span class="lnt">460
</span><span class="lnt">461
</span><span class="lnt">462
</span><span class="lnt">463
</span><span class="lnt">464
</span><span class="lnt">465
</span><span class="lnt">466
</span><span class="lnt">467
</span><span class="lnt">468
</span><span class="lnt">469
</span><span class="lnt">470
</span><span class="lnt">471
</span><span class="lnt">472
</span><span class="lnt">473
</span><span class="lnt">474
</span><span class="lnt">475
</span><span class="lnt">476
</span><span class="lnt">477
</span><span class="lnt">478
</span><span class="lnt">479
</span><span class="lnt">480
</span><span class="lnt">481
</span><span class="lnt">482
</span><span class="lnt">483
</span><span class="lnt">484
</span><span class="lnt">485
</span><span class="lnt">486
</span><span class="lnt">487
</span><span class="lnt">488
</span><span class="lnt">489
</span><span class="lnt">490
</span><span class="lnt">491
</span><span class="lnt">492
</span><span class="lnt">493
</span><span class="lnt">494
</span><span class="lnt">495
</span><span class="lnt">496
</span><span class="lnt">497
</span><span class="lnt">498
</span><span class="lnt">499
</span><span class="lnt">500
</span><span class="lnt">501
</span><span class="lnt">502
</span><span class="lnt">503
</span><span class="lnt">504
</span><span class="lnt">505
</span><span class="lnt">506
</span><span class="lnt">507
</span><span class="lnt">508
</span><span class="lnt">509
</span><span class="lnt">510
</span><span class="lnt">511
</span><span class="lnt">512
</span><span class="lnt">513
</span><span class="lnt">514
</span><span class="lnt">515
</span><span class="lnt">516
</span><span class="lnt">517
</span><span class="lnt">518
</span><span class="lnt">519
</span><span class="lnt">520
</span><span class="lnt">521
</span><span class="lnt">522
</span><span class="lnt">523
</span><span class="lnt">524
</span><span class="lnt">525
</span><span class="lnt">526
</span><span class="lnt">527
</span><span class="lnt">528
</span><span class="lnt">529
</span><span class="lnt">530
</span><span class="lnt">531
</span><span class="lnt">532
</span><span class="lnt">533
</span><span class="lnt">534
</span><span class="lnt">535
</span><span class="lnt">536
</span><span class="lnt">537
</span><span class="lnt">538
</span><span class="lnt">539
</span><span class="lnt">540
</span><span class="lnt">541
</span><span class="lnt">542
</span><span class="lnt">543
</span><span class="lnt">544
</span><span class="lnt">545
</span><span class="lnt">546
</span><span class="lnt">547
</span><span class="lnt">548
</span><span class="lnt">549
</span><span class="lnt">550
</span><span class="lnt">551
</span><span class="lnt">552
</span><span class="lnt">553
</span><span class="lnt">554
</span><span class="lnt">555
</span><span class="lnt">556
</span><span class="lnt">557
</span><span class="lnt">558
</span><span class="lnt">559
</span><span class="lnt">560
</span><span class="lnt">561
</span><span class="lnt">562
</span><span class="lnt">563
</span><span class="lnt">564
</span><span class="lnt">565
</span><span class="lnt">566
</span><span class="lnt">567
</span><span class="lnt">568
</span><span class="lnt">569
</span><span class="lnt">570
</span><span class="lnt">571
</span><span class="lnt">572
</span><span class="lnt">573
</span><span class="lnt">574
</span><span class="lnt">575
</span><span class="lnt">576
</span><span class="lnt">577
</span><span class="lnt">578
</span><span class="lnt">579
</span><span class="lnt">580
</span><span class="lnt">581
</span><span class="lnt">582
</span><span class="lnt">583
</span><span class="lnt">584
</span><span class="lnt">585
</span><span class="lnt">586
</span><span class="lnt">587
</span><span class="lnt">588
</span><span class="lnt">589
</span><span class="lnt">590
</span><span class="lnt">591
</span><span class="lnt">592
</span><span class="lnt">593
</span><span class="lnt">594
</span><span class="lnt">595
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#新建vue,src\views\FreeCourseDetail.vue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#配置路由，src\router\index.js</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">path</span><span class="p">:</span> <span class="s1">&#39;/free/detail/:pk&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;FreeCourseDetail&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">component</span><span class="p">:</span> <span class="n">FreeCourseDetail</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#安装 vue-video播放器，cnpm install vue-video-player，在main.js配置#src\main.js</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	        <span class="o">//</span> <span class="n">vue</span><span class="o">-</span><span class="n">video播放器</span>
</span></span><span class="line"><span class="cl">            <span class="n">require</span><span class="p">(</span><span class="s1">&#39;video.js/dist/video-js.css&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">require</span><span class="p">(</span><span class="s1">&#39;vue-video-player/src/custom-theme.css&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="kn">import</span> <span class="nn">VideoPlayer</span> <span class="kn">from</span> <span class="s1">&#39;vue-video-player&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Vue</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">VideoPlayer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl"><span class="c1">#src\views\FreeCourseDetail.vue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">template</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;detail&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="n">Header</span><span class="o">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;main&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-info&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;wrap-left&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">videoPlayer</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;video-player vjs-custom-skin&#34;</span>
</span></span><span class="line"><span class="cl">                                 <span class="n">ref</span><span class="o">=</span><span class="s2">&#34;videoPlayer&#34;</span>
</span></span><span class="line"><span class="cl">                                 <span class="p">:</span><span class="n">playsinline</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>
</span></span><span class="line"><span class="cl">                                 <span class="p">:</span><span class="n">options</span><span class="o">=</span><span class="s2">&#34;playerOptions&#34;</span>
</span></span><span class="line"><span class="cl">                                 <span class="nd">@play</span><span class="o">=</span><span class="s2">&#34;onPlayerPlay($event)&#34;</span>
</span></span><span class="line"><span class="cl">                                 <span class="nd">@pause</span><span class="o">=</span><span class="s2">&#34;onPlayerPause($event)&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">videoPlayer</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;wrap-right&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">h3</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-name&#34;</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">course_info</span><span class="o">.</span><span class="n">name</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">h3</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;data&#34;</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">course_info</span><span class="o">.</span><span class="n">students</span><span class="p">}}</span><span class="n">人在学</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="n">课程总时长</span><span class="err">：</span><span class="p">{{</span><span class="n">course_info</span><span class="o">.</span><span class="n">sections</span><span class="p">}}</span><span class="n">课时</span><span class="o">/</span><span class="p">{{</span><span class="n">course_info</span><span class="o">.</span><span class="n">pub_sections</span><span class="p">}}</span><span class="n">小时</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="p">;</span><span class="n">难度</span><span class="err">：</span><span class="p">{{</span><span class="n">course_info</span><span class="o">.</span><span class="n">level_name</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;sale-time&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;sale-type&#34;</span><span class="o">&gt;</span><span class="n">价格</span> <span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;original_price&#34;</span><span class="o">&gt;</span><span class="err">¥</span><span class="p">{{</span><span class="n">course_info</span><span class="o">.</span><span class="n">price</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;expire&#34;</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;buy&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;buy-btn&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">button</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;buy-now&#34;</span><span class="o">&gt;</span><span class="n">立即购买</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">button</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;free&#34;</span><span class="o">&gt;</span><span class="n">免费试学</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="err">!</span><span class="o">--&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;add-cart&#34;</span> <span class="nd">@click</span><span class="o">=</span><span class="s2">&#34;add_cart(course_info.id)&#34;</span><span class="o">&gt;--&gt;</span>
</span></span><span class="line"><span class="cl">														<span class="o">&lt;</span><span class="err">!</span><span class="o">--&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&#34;@/assets/img/cart-yellow.svg&#34;</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="o">&gt;</span><span class="n">加入购物车</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="err">!</span><span class="o">--&lt;/</span><span class="n">div</span><span class="o">&gt;--&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-tab&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;</span><span class="n">ul</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;tab-list&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">li</span> <span class="p">:</span><span class="n">class</span><span class="o">=</span><span class="s2">&#34;tabIndex==1?&#39;active&#39;:&#39;&#39;&#34;</span> <span class="nd">@click</span><span class="o">=</span><span class="s2">&#34;tabIndex=1&#34;</span><span class="o">&gt;</span><span class="n">详情介绍</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">li</span> <span class="p">:</span><span class="n">class</span><span class="o">=</span><span class="s2">&#34;tabIndex==2?&#39;active&#39;:&#39;&#39;&#34;</span> <span class="nd">@click</span><span class="o">=</span><span class="s2">&#34;tabIndex=2&#34;</span><span class="o">&gt;</span><span class="n">课程章节</span> <span class="o">&lt;</span><span class="n">span</span> <span class="p">:</span><span class="n">class</span><span class="o">=</span><span class="s2">&#34;tabIndex!=2?&#39;free&#39;:&#39;&#39;&#34;</span><span class="o">&gt;</span><span class="p">(</span><span class="n">试学</span><span class="p">)</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">li</span> <span class="p">:</span><span class="n">class</span><span class="o">=</span><span class="s2">&#34;tabIndex==3?&#39;active&#39;:&#39;&#39;&#34;</span> <span class="nd">@click</span><span class="o">=</span><span class="s2">&#34;tabIndex=3&#34;</span><span class="o">&gt;</span><span class="n">用户评论</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">li</span> <span class="p">:</span><span class="n">class</span><span class="o">=</span><span class="s2">&#34;tabIndex==4?&#39;active&#39;:&#39;&#39;&#34;</span> <span class="nd">@click</span><span class="o">=</span><span class="s2">&#34;tabIndex=4&#34;</span><span class="o">&gt;</span><span class="n">常见问题</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-content&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-tab-list&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;tab-item&#34;</span> <span class="n">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">&#34;tabIndex==1&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-brief&#34;</span> <span class="n">v</span><span class="o">-</span><span class="n">html</span><span class="o">=</span><span class="s2">&#34;course_info.brief_text&#34;</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;tab-item&#34;</span> <span class="n">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">&#34;tabIndex==2&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;tab-item-title&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;chapter&#34;</span><span class="o">&gt;</span><span class="n">课程章节</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;chapter-length&#34;</span><span class="o">&gt;</span><span class="n">共</span><span class="p">{{</span><span class="n">course_chapters</span><span class="o">.</span><span class="n">length</span><span class="p">}}</span><span class="n">章</span> <span class="p">{{</span><span class="n">course_info</span><span class="o">.</span><span class="n">sections</span><span class="p">}}</span><span class="n">个课时</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;chapter-item&#34;</span> <span class="n">v</span><span class="o">-</span><span class="k">for</span><span class="o">=</span><span class="s2">&#34;chapter in course_chapters&#34;</span> <span class="p">:</span><span class="n">key</span><span class="o">=</span><span class="s2">&#34;chapter.name&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;chapter-title&#34;</span><span class="o">&gt;&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&#34;@/assets/img/enum.svg&#34;</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="o">&gt;</span><span class="n">第</span><span class="p">{{</span><span class="n">chapter</span><span class="o">.</span><span class="n">chapter</span><span class="p">}}</span><span class="n">章</span><span class="err">·</span><span class="p">{{</span><span class="n">chapter</span><span class="o">.</span><span class="n">name</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">ul</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;section-list&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                                <span class="o">&lt;</span><span class="n">li</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;section-item&#34;</span> <span class="n">v</span><span class="o">-</span><span class="k">for</span><span class="o">=</span><span class="s2">&#34;section in chapter.coursesections&#34;</span> <span class="p">:</span><span class="n">key</span><span class="o">=</span><span class="s2">&#34;section.name&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                                    <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;name&#34;</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;index&#34;</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">chapter</span><span class="o">.</span><span class="n">chapter</span><span class="p">}}</span><span class="o">-</span><span class="p">{{</span><span class="n">section</span><span class="o">.</span><span class="n">orders</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                                        <span class="p">{{</span><span class="n">section</span><span class="o">.</span><span class="n">name</span><span class="p">}}</span><span class="o">&lt;</span><span class="n">span</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;free&#34;</span> <span class="n">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">&#34;section.free_trail&#34;</span><span class="o">&gt;</span><span class="n">免费</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                                    <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;time&#34;</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">section</span><span class="o">.</span><span class="n">duration</span><span class="p">}}</span> <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&#34;@/assets/img/chapter-player.svg&#34;</span><span class="o">&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                                    <span class="o">&lt;</span><span class="n">button</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;try&#34;</span> <span class="n">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">&#34;section.free_trail&#34;</span><span class="o">&gt;</span><span class="n">立即试学</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                                    <span class="o">&lt;</span><span class="n">button</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;try&#34;</span> <span class="n">v</span><span class="o">-</span><span class="k">else</span><span class="o">&gt;</span><span class="n">立即购买</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                                <span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;tab-item&#34;</span> <span class="n">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">&#34;tabIndex==3&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="n">用户评论</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;tab-item&#34;</span> <span class="n">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">&#34;tabIndex==4&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="n">常见问题</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;course-side&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;teacher-info&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">h4</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;side-title&#34;</span><span class="o">&gt;&lt;</span><span class="n">span</span><span class="o">&gt;</span><span class="n">授课老师</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">h4</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;teacher-content&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;cont1&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                                <span class="o">&lt;</span><span class="n">img</span> <span class="p">:</span><span class="n">src</span><span class="o">=</span><span class="s2">&#34;course_info.teacher.image&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;name&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                                    <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;teacher-name&#34;</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">course_info</span><span class="o">.</span><span class="n">teacher</span><span class="o">.</span><span class="n">name</span><span class="p">}}</span>
</span></span><span class="line"><span class="cl">                                        <span class="p">{{</span><span class="n">course_info</span><span class="o">.</span><span class="n">teacher</span><span class="o">.</span><span class="n">title</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                                    <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;teacher-title&#34;</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">course_info</span><span class="o">.</span><span class="n">teacher</span><span class="o">.</span><span class="n">signature</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&#34;narrative&#34;</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">course_info</span><span class="o">.</span><span class="n">teacher</span><span class="o">.</span><span class="n">brief</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="n">Footer</span><span class="o">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">template</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">import</span> <span class="nn">Header</span> <span class="kn">from</span> <span class="s2">&#34;@/components/Header&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">import</span> <span class="nn">Footer</span> <span class="kn">from</span> <span class="s2">&#34;@/components/Footer&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="n">加载组件</span>
</span></span><span class="line"><span class="cl">    <span class="kn">import</span> <span class="p">{</span><span class="n">videoPlayer</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;vue-video-player&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">export</span> <span class="n">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">name</span><span class="p">:</span> <span class="s2">&#34;Detail&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">tabIndex</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>   <span class="o">//</span> <span class="n">当前选项卡显示的下标</span>
</span></span><span class="line"><span class="cl">                <span class="n">course_id</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="o">//</span> <span class="n">当前课程信息的ID</span>
</span></span><span class="line"><span class="cl">                <span class="n">course_info</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">teacher</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span> <span class="o">//</span> <span class="n">课程信息</span>
</span></span><span class="line"><span class="cl">                <span class="n">course_chapters</span><span class="p">:</span> <span class="p">[],</span> <span class="o">//</span> <span class="n">课程的章节课时列表</span>
</span></span><span class="line"><span class="cl">                <span class="n">playerOptions</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">aspectRatio</span><span class="p">:</span> <span class="s1">&#39;16:9&#39;</span><span class="p">,</span> <span class="o">//</span> <span class="n">将播放器置于流畅模式</span><span class="err">，</span><span class="n">并在计算播放器的动态大小时使用该值</span><span class="err">。</span><span class="n">值应该代表一个比例</span> <span class="o">-</span> <span class="n">用冒号分隔的两个数字</span><span class="err">（</span><span class="n">例如</span><span class="s2">&#34;16:9&#34;</span><span class="n">或</span><span class="s2">&#34;4:3&#34;</span><span class="err">）</span>
</span></span><span class="line"><span class="cl">                    <span class="n">sources</span><span class="p">:</span> <span class="p">[{</span> <span class="o">//</span> <span class="n">播放资源和资源格式</span>
</span></span><span class="line"><span class="cl">                        <span class="nb">type</span><span class="p">:</span> <span class="s2">&#34;video/mp4&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="n">src</span><span class="p">:</span> <span class="s2">&#34;https://upos-sz-mirrorkodo.bilivideo.com/upgcxcode/94/82/93878294/93878294-1-208.mp4?e=ig8euxZM2rNcNbKVhbdVhwdl7wdghwdVhoNvNC8BqJIzNbfq9rVEuxTEnE8L5F6VnEsSTx0vkX8fqJeYTj_lta53NCM=&amp;uipk=5&amp;nbs=1&amp;deadline=1647886319&amp;gen=playurlv2&amp;os=kodobv&amp;oi=1866715013&amp;trid=d702a3b7ff4f43459b2d105616322966T&amp;platform=html5&amp;upsig=8985c20bb8d5379e6eba062cf94de27c&amp;uparams=e,uipk,nbs,deadline,gen,os,oi,trid,platform&amp;mid=0&amp;bvc=vod&amp;nettype=0&amp;bw=404326&amp;orderid=0,1&amp;logo=80000000&#34;</span> <span class="o">//</span><span class="n">你的视频地址</span><span class="err">（</span><span class="n">必填</span><span class="err">）</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}],</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="n">created</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">this</span><span class="o">.</span><span class="n">get_course_id</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">this</span><span class="o">.</span><span class="n">get_course_data</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">this</span><span class="o">.</span><span class="n">get_chapter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="n">methods</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">onPlayerPlay</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="o">//</span> <span class="n">当视频播放时</span><span class="err">，</span><span class="n">执行的方法</span>
</span></span><span class="line"><span class="cl">                <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;视频开始播放&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="n">onPlayerPause</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="o">//</span> <span class="n">当视频暂停播放时</span><span class="err">，</span><span class="n">执行的方法</span>
</span></span><span class="line"><span class="cl">                <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;视频暂停，可以打开广告了&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="n">get_course_id</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="o">//</span> <span class="n">获取地址栏上面的课程ID</span>
</span></span><span class="line"><span class="cl">                <span class="n">this</span><span class="o">.</span><span class="n">course_id</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">route</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">pk</span> <span class="o">||</span> <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">route</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">pk</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">course_id</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">let</span> <span class="n">_this</span> <span class="o">=</span> <span class="n">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">_this</span><span class="o">.</span><span class="err">$</span><span class="n">alert</span><span class="p">(</span><span class="s2">&#34;对不起，当前视频不存在！&#34;</span><span class="p">,</span> <span class="s2">&#34;警告&#34;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">callback</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="n">_this</span><span class="o">.</span><span class="err">$</span><span class="n">router</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="p">});</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="n">get_course_data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="o">//</span> <span class="n">ajax请求课程信息</span>
</span></span><span class="line"><span class="cl">                <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">axios</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="err">`$</span><span class="p">{</span><span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">settings</span><span class="o">.</span><span class="n">base_url</span><span class="p">}</span><span class="o">/</span><span class="n">course</span><span class="o">/</span><span class="n">free</span><span class="o">/</span><span class="err">$</span><span class="p">{</span><span class="n">this</span><span class="o">.</span><span class="n">course_id</span><span class="p">}</span><span class="o">/</span><span class="err">`</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="o">//</span> <span class="n">window</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">this</span><span class="o">.</span><span class="n">course_info</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">course_info</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">})</span><span class="o">.</span><span class="n">catch</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                        <span class="n">message</span><span class="p">:</span> <span class="s2">&#34;对不起，访问页面出错！请联系客服工作人员！&#34;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">});</span>
</span></span><span class="line"><span class="cl">                <span class="p">})</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">get_chapter</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="o">//</span> <span class="n">获取当前课程对应的章节课时信息</span>
</span></span><span class="line"><span class="cl">                <span class="o">//</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">course</span><span class="o">/</span><span class="n">chapters</span><span class="o">/</span><span class="err">?</span><span class="n">course</span><span class="o">=</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">axios</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="err">`$</span><span class="p">{</span><span class="n">this</span><span class="o">.</span><span class="err">$</span><span class="n">settings</span><span class="o">.</span><span class="n">base_url</span><span class="p">}</span><span class="o">/</span><span class="n">course</span><span class="o">/</span><span class="n">chapters</span><span class="o">/</span><span class="err">`</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">params</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="s2">&#34;course&#34;</span><span class="p">:</span> <span class="n">this</span><span class="o">.</span><span class="n">course_id</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">})</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">this</span><span class="o">.</span><span class="n">course_chapters</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">})</span><span class="o">.</span><span class="n">catch</span><span class="p">(</span><span class="n">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">window</span><span class="o">.</span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">response</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">})</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="n">components</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Header</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">Footer</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">videoPlayer</span><span class="p">,</span> <span class="o">//</span> <span class="n">注册组件</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">style</span> <span class="n">scoped</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">main</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="o">-</span><span class="n">top</span><span class="p">:</span> <span class="mi">30</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">info</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">1200</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="n">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">overflow</span><span class="p">:</span> <span class="n">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">wrap</span><span class="o">-</span><span class="n">left</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">690</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="mi">388</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="o">-</span><span class="n">color</span><span class="p">:</span> <span class="c1">#000;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">wrap</span><span class="o">-</span><span class="n">right</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">position</span><span class="p">:</span> <span class="n">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="mi">388</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">name</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#333;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">10</span><span class="n">px</span> <span class="mi">23</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">letter</span><span class="o">-</span><span class="n">spacing</span><span class="p">:</span> <span class="mf">.45</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">data</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">23</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="o">-</span><span class="n">right</span><span class="p">:</span> <span class="mi">23</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">16</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#9b9b9b;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">sale</span><span class="o">-</span><span class="n">time</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">464</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#fa6240;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#4a4a4a;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">10</span><span class="n">px</span> <span class="mi">23</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">overflow</span><span class="p">:</span> <span class="n">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">sale</span><span class="o">-</span><span class="nb">type</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">16</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="n">letter</span><span class="o">-</span><span class="n">spacing</span><span class="p">:</span> <span class="mf">.36</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">sale</span><span class="o">-</span><span class="n">time</span> <span class="o">.</span><span class="n">expire</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">sale</span><span class="o">-</span><span class="n">time</span> <span class="o">.</span><span class="n">expire</span> <span class="o">.</span><span class="n">second</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">24</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">display</span><span class="p">:</span> <span class="n">inline</span><span class="o">-</span><span class="n">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#fafafa;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#5e5e5e;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">6</span><span class="n">px</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">text</span><span class="o">-</span><span class="n">align</span><span class="p">:</span> <span class="n">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">price</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#4a4a4a;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">5</span><span class="n">px</span> <span class="mi">23</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">discount</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">26</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#fa6240;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">10</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">display</span><span class="p">:</span> <span class="n">inline</span><span class="o">-</span><span class="n">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="o">-</span><span class="mi">5</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">original</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#9b9b9b;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">10</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">text</span><span class="o">-</span><span class="n">decoration</span><span class="p">:</span> <span class="n">line</span><span class="o">-</span><span class="n">through</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">buy</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">464</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">0</span><span class="n">px</span> <span class="mi">23</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">position</span><span class="p">:</span> <span class="n">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">bottom</span><span class="p">:</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">overflow</span><span class="p">:</span> <span class="n">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">buy</span> <span class="o">.</span><span class="n">buy</span><span class="o">-</span><span class="n">btn</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">buy</span> <span class="o">.</span><span class="n">buy</span><span class="o">-</span><span class="n">now</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">125</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="mi">40</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span> <span class="mi">4</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="n">cursor</span><span class="p">:</span> <span class="n">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">right</span><span class="p">:</span> <span class="mi">15</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">outline</span><span class="p">:</span> <span class="n">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">buy</span> <span class="o">.</span><span class="n">free</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">125</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="mi">40</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span> <span class="mi">4</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">cursor</span><span class="p">:</span> <span class="n">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">right</span><span class="p">:</span> <span class="mi">15</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="p">:</span> <span class="mi">1</span><span class="n">px</span> <span class="n">solid</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">add</span><span class="o">-</span><span class="n">cart</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">        <span class="n">text</span><span class="o">-</span><span class="n">align</span><span class="p">:</span> <span class="n">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">cursor</span><span class="p">:</span> <span class="n">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">top</span><span class="p">:</span> <span class="mi">10</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">add</span><span class="o">-</span><span class="n">cart</span> <span class="n">img</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="mi">18</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">right</span><span class="p">:</span> <span class="mi">7</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">vertical</span><span class="o">-</span><span class="n">align</span><span class="p">:</span> <span class="n">middle</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">tab</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">100</span><span class="o">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">30</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">2</span><span class="n">px</span> <span class="mi">4</span><span class="n">px</span> <span class="mi">0</span> <span class="c1">#f0f0f0;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">tab</span> <span class="o">.</span><span class="n">tab</span><span class="o">-</span><span class="nb">list</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">1200</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="p">:</span> <span class="n">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#4a4a4a;</span>
</span></span><span class="line"><span class="cl">        <span class="n">overflow</span><span class="p">:</span> <span class="n">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">tab</span><span class="o">-</span><span class="nb">list</span> <span class="n">li</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">right</span><span class="p">:</span> <span class="mi">15</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">26</span><span class="n">px</span> <span class="mi">20</span><span class="n">px</span> <span class="mi">16</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">17</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">cursor</span><span class="p">:</span> <span class="n">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">tab</span><span class="o">-</span><span class="nb">list</span> <span class="o">.</span><span class="n">active</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">2</span><span class="n">px</span> <span class="n">solid</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">tab</span><span class="o">-</span><span class="nb">list</span> <span class="o">.</span><span class="n">free</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#fb7c55;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">content</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">1200</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="n">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#FAFAFA;</span>
</span></span><span class="line"><span class="cl">        <span class="n">overflow</span><span class="p">:</span> <span class="n">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">40</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">tab</span><span class="o">-</span><span class="nb">list</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">880</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="n">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">box</span><span class="o">-</span><span class="n">sizing</span><span class="p">:</span> <span class="n">border</span><span class="o">-</span><span class="n">box</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">overflow</span><span class="p">:</span> <span class="n">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">position</span><span class="p">:</span> <span class="n">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">2</span><span class="n">px</span> <span class="mi">4</span><span class="n">px</span> <span class="mi">0</span> <span class="c1">#f0f0f0;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">tab</span><span class="o">-</span><span class="n">item</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">880</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">2</span><span class="n">px</span> <span class="mi">4</span><span class="n">px</span> <span class="mi">0</span> <span class="c1">#f0f0f0;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">tab</span><span class="o">-</span><span class="n">item</span><span class="o">-</span><span class="n">title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">justify</span><span class="o">-</span><span class="n">content</span><span class="p">:</span> <span class="n">space</span><span class="o">-</span><span class="n">between</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">25</span><span class="n">px</span> <span class="mi">20</span><span class="n">px</span> <span class="mi">11</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span> <span class="mi">4</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">1</span><span class="n">px</span> <span class="n">solid</span> <span class="c1">#333;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="o">-</span><span class="n">color</span><span class="p">:</span> <span class="n">rgba</span><span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mf">.05</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">overflow</span><span class="p">:</span> <span class="n">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">chapter</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">17</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#4a4a4a;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">chapter</span><span class="o">-</span><span class="n">length</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#9b9b9b;</span>
</span></span><span class="line"><span class="cl">        <span class="n">letter</span><span class="o">-</span><span class="n">spacing</span><span class="p">:</span> <span class="mf">.19</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">chapter</span><span class="o">-</span><span class="n">title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">16</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#4a4a4a;</span>
</span></span><span class="line"><span class="cl">        <span class="n">letter</span><span class="o">-</span><span class="n">spacing</span><span class="p">:</span> <span class="mf">.26</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">12</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#eee;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span> <span class="mi">2</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">display</span><span class="p">:</span> <span class="o">-</span><span class="n">ms</span><span class="o">-</span><span class="n">flexbox</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">-</span><span class="n">ms</span><span class="o">-</span><span class="n">flex</span><span class="o">-</span><span class="n">align</span><span class="p">:</span> <span class="n">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">align</span><span class="o">-</span><span class="n">items</span><span class="p">:</span> <span class="n">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">chapter</span><span class="o">-</span><span class="n">title</span> <span class="n">img</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">18</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="mi">18</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">right</span><span class="p">:</span> <span class="mi">7</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">vertical</span><span class="o">-</span><span class="n">align</span><span class="p">:</span> <span class="n">middle</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">section</span><span class="o">-</span><span class="nb">list</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">section</span><span class="o">-</span><span class="nb">list</span> <span class="o">.</span><span class="n">section</span><span class="o">-</span><span class="n">item</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">15</span><span class="n">px</span> <span class="mi">20</span><span class="n">px</span> <span class="mi">15</span><span class="n">px</span> <span class="mi">36</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">cursor</span><span class="p">:</span> <span class="n">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">justify</span><span class="o">-</span><span class="n">content</span><span class="p">:</span> <span class="n">space</span><span class="o">-</span><span class="n">between</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">position</span><span class="p">:</span> <span class="n">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">overflow</span><span class="p">:</span> <span class="n">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">section</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">name</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#666;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">section</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">index</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">right</span><span class="p">:</span> <span class="mi">5</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">section</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">free</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">12</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="n">letter</span><span class="o">-</span><span class="n">spacing</span><span class="p">:</span> <span class="mf">.19</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span> <span class="mi">100</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">1</span><span class="n">px</span> <span class="mi">9</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">10</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">section</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">time</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#666;</span>
</span></span><span class="line"><span class="cl">        <span class="n">letter</span><span class="o">-</span><span class="n">spacing</span><span class="p">:</span> <span class="mf">.23</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">opacity</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">transition</span><span class="p">:</span> <span class="nb">all</span> <span class="mf">.15</span><span class="n">s</span> <span class="n">ease</span><span class="o">-</span><span class="ow">in</span><span class="o">-</span><span class="n">out</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">section</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="n">time</span> <span class="n">img</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">18</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="mi">18</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">15</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">vertical</span><span class="o">-</span><span class="n">align</span><span class="p">:</span> <span class="n">text</span><span class="o">-</span><span class="n">bottom</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">section</span><span class="o">-</span><span class="n">item</span> <span class="o">.</span><span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">86</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="mi">28</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">radius</span><span class="p">:</span> <span class="mi">4</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="n">position</span><span class="p">:</span> <span class="n">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">right</span><span class="p">:</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">top</span><span class="p">:</span> <span class="mi">10</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">opacity</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">transition</span><span class="p">:</span> <span class="nb">all</span> <span class="mf">.2</span><span class="n">s</span> <span class="n">ease</span><span class="o">-</span><span class="ow">in</span><span class="o">-</span><span class="n">out</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">cursor</span><span class="p">:</span> <span class="n">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">outline</span><span class="p">:</span> <span class="n">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="p">:</span> <span class="n">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">section</span><span class="o">-</span><span class="n">item</span><span class="p">:</span><span class="n">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#fcf7ef;</span>
</span></span><span class="line"><span class="cl">        <span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="c1">#f3f3f3;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">section</span><span class="o">-</span><span class="n">item</span><span class="p">:</span><span class="n">hover</span> <span class="o">.</span><span class="n">name</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#333;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">section</span><span class="o">-</span><span class="n">item</span><span class="p">:</span><span class="n">hover</span> <span class="o">.</span><span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">opacity</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">course</span><span class="o">-</span><span class="n">side</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">300</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="n">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">teacher</span><span class="o">-</span><span class="n">info</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">background</span><span class="p">:</span> <span class="c1">#fff;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">box</span><span class="o">-</span><span class="n">shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">2</span><span class="n">px</span> <span class="mi">4</span><span class="n">px</span> <span class="mi">0</span> <span class="c1">#f0f0f0;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">side</span><span class="o">-</span><span class="n">title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">weight</span><span class="p">:</span> <span class="n">normal</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">17</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#4a4a4a;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">18</span><span class="n">px</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">1</span><span class="n">px</span> <span class="n">solid</span> <span class="c1">#333;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="o">-</span><span class="n">color</span><span class="p">:</span> <span class="n">rgba</span><span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mf">.05</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">side</span><span class="o">-</span><span class="n">title</span> <span class="n">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">display</span><span class="p">:</span> <span class="n">inline</span><span class="o">-</span><span class="n">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">border</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">2</span><span class="n">px</span> <span class="n">solid</span> <span class="c1">#ffc210;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="o">-</span><span class="n">left</span><span class="p">:</span> <span class="mi">12</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">teacher</span><span class="o">-</span><span class="n">content</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="p">:</span> <span class="mi">30</span><span class="n">px</span> <span class="mi">20</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">box</span><span class="o">-</span><span class="n">sizing</span><span class="p">:</span> <span class="n">border</span><span class="o">-</span><span class="n">box</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">teacher</span><span class="o">-</span><span class="n">content</span> <span class="o">.</span><span class="n">cont1</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">12</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">overflow</span><span class="p">:</span> <span class="n">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">teacher</span><span class="o">-</span><span class="n">content</span> <span class="o">.</span><span class="n">cont1</span> <span class="n">img</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">54</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">height</span><span class="p">:</span> <span class="mi">54</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">margin</span><span class="o">-</span><span class="n">right</span><span class="p">:</span> <span class="mi">12</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">teacher</span><span class="o">-</span><span class="n">content</span> <span class="o">.</span><span class="n">cont1</span> <span class="o">.</span><span class="n">name</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">float</span><span class="p">:</span> <span class="n">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">teacher</span><span class="o">-</span><span class="n">content</span> <span class="o">.</span><span class="n">cont1</span> <span class="o">.</span><span class="n">teacher</span><span class="o">-</span><span class="n">name</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">188</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">16</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#4a4a4a;</span>
</span></span><span class="line"><span class="cl">        <span class="n">padding</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="mi">4</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">teacher</span><span class="o">-</span><span class="n">content</span> <span class="o">.</span><span class="n">cont1</span> <span class="o">.</span><span class="n">teacher</span><span class="o">-</span><span class="n">title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">width</span><span class="p">:</span> <span class="mi">188</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">13</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#9b9b9b;</span>
</span></span><span class="line"><span class="cl">        <span class="n">white</span><span class="o">-</span><span class="n">space</span><span class="p">:</span> <span class="n">nowrap</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">.</span><span class="n">teacher</span><span class="o">-</span><span class="n">content</span> <span class="o">.</span><span class="n">narrative</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="mi">14</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="p">:</span> <span class="c1">#666;</span>
</span></span><span class="line"><span class="cl">        <span class="n">line</span><span class="o">-</span><span class="n">height</span><span class="p">:</span> <span class="mi">24</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">style</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="511-章节分类接口">5.11 章节分类接口</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\course\views.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">CourseChapterView</span><span class="p">(</span><span class="n">GenericViewSet</span><span class="p">,</span> <span class="n">ListModelMixin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">queryset</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CourseChapter</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_delete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_show</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">CourseChapterSerializer</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># 可以按照课程id来查</span>
</span></span><span class="line"><span class="cl">        <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">[</span><span class="n">DjangoFilterBackend</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">filter_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;course&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\course\serializer.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">CourseSectionSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CourseSection</span>
</span></span><span class="line"><span class="cl">            <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;orders&#39;</span><span class="p">,</span><span class="s1">&#39;duration&#39;</span><span class="p">,</span><span class="s1">&#39;free_trail&#39;</span><span class="p">,</span><span class="s1">&#39;section_link&#39;</span><span class="p">,</span><span class="s1">&#39;section_type_name&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">#课程章节序列化器</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">CourseChapterSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 子序列化的方式</span>
</span></span><span class="line"><span class="cl">        <span class="n">coursesections</span><span class="o">=</span><span class="n">CourseSectionSerializer</span><span class="p">(</span><span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">model</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CourseChapter</span>
</span></span><span class="line"><span class="cl">            <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;summary&#39;</span><span class="p">,</span><span class="s1">&#39;chapter&#39;</span><span class="p">,</span><span class="s1">&#39;coursesections&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">    <span class="c1"># models：</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">CourseSection</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nd">@property</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">section_type_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_section_type_display</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    	
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\course\urls.py</span>
</span></span><span class="line"><span class="cl">    <span class="n">router</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;chapters&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">CourseChapterView</span><span class="p">,</span> <span class="s1">&#39;coursechapter&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="512-七牛云视频托管">5.12 七牛云视频托管</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#进入位置注册，实名认证</span>
</span></span><span class="line"><span class="cl">	<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">qiniu</span><span class="o">.</span><span class="n">com</span><span class="o">/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#登录然后到管理控制台创建对象储存</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#新建空间，上传文件，获得文件链接http://qe6j0hynu.bkt.clouddn.com/99f0eeb961b8cfae9cf8b017666c9bec.mp4</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="7-搜索功能">7 搜索功能</h2>
<h3 id="71-后台搜索接口">7.1 后台搜索接口</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\course\views.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">CouresSearchView</span><span class="p">(</span><span class="n">GenericViewSet</span><span class="p">,</span><span class="n">ListModelMixin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">queryset</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Course</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_delete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">is_show</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">CourseModelSerializer</span>
</span></span><span class="line"><span class="cl">        <span class="n">pagination_class</span> <span class="o">=</span> <span class="n">PageNumberPagination</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">filter_backends</span><span class="o">=</span><span class="p">[</span><span class="n">SearchFilter</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">search_fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\course\urls.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">router</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;search&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">CouresSearchView</span><span class="p">,</span> <span class="s1">&#39;search&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="72-前台搜索导航栏">7.2 前台搜索导航栏</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="err">#</span> <span class="mi">0</span> <span class="nx">在Head</span><span class="p">.</span><span class="nx">vue中相应的配置</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">form</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;search&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tips&#34;</span> <span class="nt">v-if</span><span class="s">=&#34;is_search_tip&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">span</span> <span class="nt">@click</span><span class="s">=&#34;search_action(&#39;Python&#39;)&#34;</span><span class="p">&gt;</span><span class="na">Python</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">span</span> <span class="nt">@click</span><span class="s">=&#34;search_action(&#39;Linux&#39;)&#34;</span><span class="p">&gt;</span><span class="na">Linux</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="nt">:placeholder</span><span class="s">=&#34;search_placeholder&#34;</span> <span class="nt">@focus</span><span class="s">=&#34;on_search&#34;</span> <span class="nt">@blur</span><span class="s">=&#34;off_search&#34;</span> <span class="nt">v-model</span><span class="s">=&#34;search_word&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;glyphicon glyphicon-search&#34;</span> <span class="nt">@click</span><span class="s">=&#34;search_action(search_word)&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">is_search_tip</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">search_placeholder</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">search_word</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">search_action</span><span class="p">(</span><span class="nx">search_word</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">search_word</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">(</span><span class="s1">&#39;请输入要搜索的内容&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="nx">search_word</span> <span class="o">!==</span> <span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">word</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`/course/search?word=</span><span class="si">${</span><span class="nx">search_word</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">search_word</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">on_search</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">search_placeholder</span> <span class="o">=</span> <span class="s1">&#39;请输入想搜索的课程&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">is_search_tip</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">off_search</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">search_placeholder</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">is_search_tip</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">search</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">float</span><span class="o">:</span> <span class="nx">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">position</span><span class="o">:</span> <span class="nx">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">top</span><span class="o">:</span> <span class="mi">22</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">right</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">search</span> <span class="nx">input</span><span class="p">,</span> <span class="p">.</span><span class="nx">search</span> <span class="nx">button</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">:</span> <span class="nx">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">outline</span><span class="o">:</span> <span class="nx">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">white</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">search</span> <span class="nx">input</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="nx">eeeeee</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">search</span> <span class="nx">input</span><span class="o">:</span><span class="nx">focus</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">search</span> <span class="nx">input</span><span class="o">:</span><span class="nx">focus</span> <span class="o">+</span> <span class="nx">button</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">search</span> <span class="p">.</span><span class="nx">tips</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">position</span><span class="o">:</span> <span class="nx">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">bottom</span><span class="o">:</span> <span class="mi">3</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">search</span> <span class="p">.</span><span class="nx">tips</span> <span class="nx">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">11</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">background</span><span class="o">-</span><span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">eee</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">22</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">display</span><span class="o">:</span> <span class="nx">inline</span><span class="o">-</span><span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">padding</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">7</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">margin</span><span class="o">-</span><span class="nx">right</span><span class="o">:</span> <span class="mi">3</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">aaa</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">14</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">search</span> <span class="p">.</span><span class="nx">tips</span> <span class="nx">span</span><span class="o">:</span><span class="nx">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">color</span><span class="o">:</span> <span class="nx">orange</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="73搜索页面">7.3搜索页面</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span><span class="lnt">331
</span><span class="lnt">332
</span><span class="lnt">333
</span><span class="lnt">334
</span><span class="lnt">335
</span><span class="lnt">336
</span><span class="lnt">337
</span><span class="lnt">338
</span><span class="lnt">339
</span><span class="lnt">340
</span><span class="lnt">341
</span><span class="lnt">342
</span><span class="lnt">343
</span><span class="lnt">344
</span><span class="lnt">345
</span><span class="lnt">346
</span><span class="lnt">347
</span><span class="lnt">348
</span><span class="lnt">349
</span><span class="lnt">350
</span><span class="lnt">351
</span><span class="lnt">352
</span><span class="lnt">353
</span><span class="lnt">354
</span><span class="lnt">355
</span><span class="lnt">356
</span><span class="lnt">357
</span><span class="lnt">358
</span><span class="lnt">359
</span><span class="lnt">360
</span><span class="lnt">361
</span><span class="lnt">362
</span><span class="lnt">363
</span><span class="lnt">364
</span><span class="lnt">365
</span><span class="lnt">366
</span><span class="lnt">367
</span><span class="lnt">368
</span><span class="lnt">369
</span><span class="lnt">370
</span><span class="lnt">371
</span><span class="lnt">372
</span><span class="lnt">373
</span><span class="lnt">374
</span><span class="lnt">375
</span><span class="lnt">376
</span><span class="lnt">377
</span><span class="lnt">378
</span><span class="lnt">379
</span><span class="lnt">380
</span><span class="lnt">381
</span><span class="lnt">382
</span><span class="lnt">383
</span><span class="lnt">384
</span><span class="lnt">385
</span><span class="lnt">386
</span><span class="lnt">387
</span><span class="lnt">388
</span><span class="lnt">389
</span><span class="lnt">390
</span><span class="lnt">391
</span><span class="lnt">392
</span><span class="lnt">393
</span><span class="lnt">394
</span><span class="lnt">395
</span><span class="lnt">396
</span><span class="lnt">397
</span><span class="lnt">398
</span><span class="lnt">399
</span><span class="lnt">400
</span><span class="lnt">401
</span><span class="lnt">402
</span><span class="lnt">403
</span><span class="lnt">404
</span><span class="lnt">405
</span><span class="lnt">406
</span><span class="lnt">407
</span><span class="lnt">408
</span><span class="lnt">409
</span><span class="lnt">410
</span><span class="lnt">411
</span><span class="lnt">412
</span><span class="lnt">413
</span><span class="lnt">414
</span><span class="lnt">415
</span><span class="lnt">416
</span><span class="lnt">417
</span><span class="lnt">418
</span><span class="lnt">419
</span><span class="lnt">420
</span><span class="lnt">421
</span><span class="lnt">422
</span><span class="lnt">423
</span><span class="lnt">424
</span><span class="lnt">425
</span><span class="lnt">426
</span><span class="lnt">427
</span><span class="lnt">428
</span><span class="lnt">429
</span><span class="lnt">430
</span><span class="lnt">431
</span><span class="lnt">432
</span><span class="lnt">433
</span><span class="lnt">434
</span><span class="lnt">435
</span><span class="lnt">436
</span><span class="lnt">437
</span><span class="lnt">438
</span><span class="lnt">439
</span><span class="lnt">440
</span><span class="lnt">441
</span><span class="lnt">442
</span><span class="lnt">443
</span><span class="lnt">444
</span><span class="lnt">445
</span><span class="lnt">446
</span><span class="lnt">447
</span><span class="lnt">448
</span><span class="lnt">449
</span><span class="lnt">450
</span><span class="lnt">451
</span><span class="lnt">452
</span><span class="lnt">453
</span><span class="lnt">454
</span><span class="lnt">455
</span><span class="lnt">456
</span><span class="lnt">457
</span><span class="lnt">458
</span><span class="lnt">459
</span><span class="lnt">460
</span><span class="lnt">461
</span><span class="lnt">462
</span><span class="lnt">463
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">router/index
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import SearchCourse from &#39;../views/SearchCourse.vue&#39;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">const routes = [
</span></span><span class="line"><span class="cl">    // ...
</span></span><span class="line"><span class="cl">    {
</span></span><span class="line"><span class="cl">        path: &#39;/course/search&#39;,
</span></span><span class="line"><span class="cl">        name: &#39;search-course&#39;,
</span></span><span class="line"><span class="cl">        component: SearchCourse,
</span></span><span class="line"><span class="cl">    },
</span></span><span class="line"><span class="cl">];
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">/view/Search
</span></span><span class="line"><span class="cl">&lt;template&gt;
</span></span><span class="line"><span class="cl">    &lt;div class=&#34;search-course course&#34;&gt;
</span></span><span class="line"><span class="cl">        &lt;Header/&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        &lt;!-- 课程列表 --&gt;
</span></span><span class="line"><span class="cl">        &lt;div class=&#34;main&#34;&gt;
</span></span><span class="line"><span class="cl">            &lt;div v-if=&#34;course_list.length &gt; 0&#34; class=&#34;course-list&#34;&gt;
</span></span><span class="line"><span class="cl">                &lt;div class=&#34;course-item&#34; v-for=&#34;course in course_list&#34; :key=&#34;course.name&#34;&gt;
</span></span><span class="line"><span class="cl">                    &lt;div class=&#34;course-image&#34;&gt;
</span></span><span class="line"><span class="cl">                        &lt;img :src=&#34;course.course_img&#34; alt=&#34;&#34;&gt;
</span></span><span class="line"><span class="cl">                    &lt;/div&gt;
</span></span><span class="line"><span class="cl">                    &lt;div class=&#34;course-info&#34;&gt;
</span></span><span class="line"><span class="cl">                        &lt;h3&gt;
</span></span><span class="line"><span class="cl">                            &lt;router-link :to=&#34;&#39;/free/detail/&#39;+course.id&#34;&gt;{{course.name}}&lt;/router-link&gt;
</span></span><span class="line"><span class="cl">                            &lt;span&gt;&lt;img src=&#34;@/assets/img/avatar1.svg&#34; alt=&#34;&#34;&gt;{{course.students}}人已加入学习&lt;/span&gt;&lt;/h3&gt;
</span></span><span class="line"><span class="cl">                        &lt;p class=&#34;teather-info&#34;&gt;
</span></span><span class="line"><span class="cl">                            {{course.teacher.name}} {{course.teacher.title}} {{course.teacher.signature}}
</span></span><span class="line"><span class="cl">                            &lt;span v-if=&#34;course.sections&gt;course.pub_sections&#34;&gt;共{{course.sections}}课时/已更新{{course.pub_sections}}课时&lt;/span&gt;
</span></span><span class="line"><span class="cl">                            &lt;span v-else&gt;共{{course.sections}}课时/更新完成&lt;/span&gt;
</span></span><span class="line"><span class="cl">                        &lt;/p&gt;
</span></span><span class="line"><span class="cl">                        &lt;ul class=&#34;section-list&#34;&gt;
</span></span><span class="line"><span class="cl">                            &lt;li v-for=&#34;(section, key) in course.section_list&#34; :key=&#34;section.name&#34;&gt;&lt;span
</span></span><span class="line"><span class="cl">                                    class=&#34;section-title&#34;&gt;0{{key+1}}  |  {{section.name}}&lt;/span&gt;
</span></span><span class="line"><span class="cl">                                &lt;span class=&#34;free&#34; v-if=&#34;section.free_trail&#34;&gt;免费&lt;/span&gt;&lt;/li&gt;
</span></span><span class="line"><span class="cl">                        &lt;/ul&gt;
</span></span><span class="line"><span class="cl">                        &lt;div class=&#34;pay-box&#34;&gt;
</span></span><span class="line"><span class="cl">                            &lt;div v-if=&#34;course.discount_type&#34;&gt;
</span></span><span class="line"><span class="cl">                                &lt;span class=&#34;discount-type&#34;&gt;{{course.discount_type}}&lt;/span&gt;
</span></span><span class="line"><span class="cl">                                &lt;span class=&#34;discount-price&#34;&gt;￥{{course.real_price}}元&lt;/span&gt;
</span></span><span class="line"><span class="cl">                                &lt;span class=&#34;original-price&#34;&gt;原价：{{course.price}}元&lt;/span&gt;
</span></span><span class="line"><span class="cl">                            &lt;/div&gt;
</span></span><span class="line"><span class="cl">                            &lt;span v-else class=&#34;discount-price&#34;&gt;￥{{course.price}}元&lt;/span&gt;
</span></span><span class="line"><span class="cl">                            &lt;span class=&#34;buy-now&#34;&gt;立即购买&lt;/span&gt;
</span></span><span class="line"><span class="cl">                        &lt;/div&gt;
</span></span><span class="line"><span class="cl">                    &lt;/div&gt;
</span></span><span class="line"><span class="cl">                &lt;/div&gt;
</span></span><span class="line"><span class="cl">            &lt;/div&gt;
</span></span><span class="line"><span class="cl">            &lt;div v-else style=&#34;text-align: center; line-height: 60px&#34;&gt;
</span></span><span class="line"><span class="cl">                没有搜索结果
</span></span><span class="line"><span class="cl">            &lt;/div&gt;
</span></span><span class="line"><span class="cl">            &lt;div class=&#34;course_pagination block&#34;&gt;
</span></span><span class="line"><span class="cl">                &lt;el-pagination
</span></span><span class="line"><span class="cl">                        @size-change=&#34;handleSizeChange&#34;
</span></span><span class="line"><span class="cl">                        @current-change=&#34;handleCurrentChange&#34;
</span></span><span class="line"><span class="cl">                        :current-page.sync=&#34;filter.page&#34;
</span></span><span class="line"><span class="cl">                        :page-sizes=&#34;[2, 3, 5, 10]&#34;
</span></span><span class="line"><span class="cl">                        :page-size=&#34;filter.page_size&#34;
</span></span><span class="line"><span class="cl">                        layout=&#34;sizes, prev, pager, next&#34;
</span></span><span class="line"><span class="cl">                        :total=&#34;course_total&#34;&gt;
</span></span><span class="line"><span class="cl">                &lt;/el-pagination&gt;
</span></span><span class="line"><span class="cl">            &lt;/div&gt;
</span></span><span class="line"><span class="cl">        &lt;/div&gt;
</span></span><span class="line"><span class="cl">    &lt;/div&gt;
</span></span><span class="line"><span class="cl">&lt;/template&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;script&gt;
</span></span><span class="line"><span class="cl">    import Header from &#39;../components/Header&#39;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    export default {
</span></span><span class="line"><span class="cl">        name: &#34;SearchCourse&#34;,
</span></span><span class="line"><span class="cl">        components: {
</span></span><span class="line"><span class="cl">            Header,
</span></span><span class="line"><span class="cl">        },
</span></span><span class="line"><span class="cl">        data() {
</span></span><span class="line"><span class="cl">            return {
</span></span><span class="line"><span class="cl">                course_list: [],
</span></span><span class="line"><span class="cl">                course_total: 0,
</span></span><span class="line"><span class="cl">                filter: {
</span></span><span class="line"><span class="cl">                    page_size: 10,
</span></span><span class="line"><span class="cl">                    page: 1,
</span></span><span class="line"><span class="cl">                    search: &#39;&#39;,
</span></span><span class="line"><span class="cl">                }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        },
</span></span><span class="line"><span class="cl">        created() {
</span></span><span class="line"><span class="cl">            this.get_course()
</span></span><span class="line"><span class="cl">        },
</span></span><span class="line"><span class="cl">        watch: {
</span></span><span class="line"><span class="cl">            &#39;$route.query&#39; () {
</span></span><span class="line"><span class="cl">                this.get_course()
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        },
</span></span><span class="line"><span class="cl">        methods: {
</span></span><span class="line"><span class="cl">            handleSizeChange(val) {
</span></span><span class="line"><span class="cl">                // 每页数据量发生变化时执行的方法
</span></span><span class="line"><span class="cl">                this.filter.page = 1;
</span></span><span class="line"><span class="cl">                this.filter.page_size = val;
</span></span><span class="line"><span class="cl">            },
</span></span><span class="line"><span class="cl">            handleCurrentChange(val) {
</span></span><span class="line"><span class="cl">                // 页码发生变化时执行的方法
</span></span><span class="line"><span class="cl">                this.filter.page = val;
</span></span><span class="line"><span class="cl">            },
</span></span><span class="line"><span class="cl">            get_course() {
</span></span><span class="line"><span class="cl">                // 获取搜索的关键字
</span></span><span class="line"><span class="cl">                this.filter.search = this.$route.query.word || this.$route.query.wd;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                // 获取课程列表信息
</span></span><span class="line"><span class="cl">                this.$axios.get(`${this.$settings.base_url}/course/search/`, {
</span></span><span class="line"><span class="cl">                    params: this.filter
</span></span><span class="line"><span class="cl">                }).then(response =&gt; {
</span></span><span class="line"><span class="cl">                    // 如果后台不分页，数据在response.data中；如果后台分页，数据在response.data.results中
</span></span><span class="line"><span class="cl">                    this.course_list = response.data.results;
</span></span><span class="line"><span class="cl">                    this.course_total = response.data.count;
</span></span><span class="line"><span class="cl">                }).catch(() =&gt; {
</span></span><span class="line"><span class="cl">                    this.$message({
</span></span><span class="line"><span class="cl">                        message: &#34;获取课程信息有误，请联系客服工作人员&#34;
</span></span><span class="line"><span class="cl">                    })
</span></span><span class="line"><span class="cl">                })
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">&lt;/script&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;style scoped&gt;
</span></span><span class="line"><span class="cl">    .course {
</span></span><span class="line"><span class="cl">        background: #f6f6f6;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .main {
</span></span><span class="line"><span class="cl">        width: 1100px;
</span></span><span class="line"><span class="cl">        margin: 35px auto 0;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .condition {
</span></span><span class="line"><span class="cl">        margin-bottom: 35px;
</span></span><span class="line"><span class="cl">        padding: 25px 30px 25px 20px;
</span></span><span class="line"><span class="cl">        background: #fff;
</span></span><span class="line"><span class="cl">        border-radius: 4px;
</span></span><span class="line"><span class="cl">        box-shadow: 0 2px 4px 0 #f0f0f0;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .cate-list {
</span></span><span class="line"><span class="cl">        border-bottom: 1px solid #333;
</span></span><span class="line"><span class="cl">        border-bottom-color: rgba(51, 51, 51, .05);
</span></span><span class="line"><span class="cl">        padding-bottom: 18px;
</span></span><span class="line"><span class="cl">        margin-bottom: 17px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .cate-list::after {
</span></span><span class="line"><span class="cl">        content: &#34;&#34;;
</span></span><span class="line"><span class="cl">        display: block;
</span></span><span class="line"><span class="cl">        clear: both;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .cate-list li {
</span></span><span class="line"><span class="cl">        float: left;
</span></span><span class="line"><span class="cl">        font-size: 16px;
</span></span><span class="line"><span class="cl">        padding: 6px 15px;
</span></span><span class="line"><span class="cl">        line-height: 16px;
</span></span><span class="line"><span class="cl">        margin-left: 14px;
</span></span><span class="line"><span class="cl">        position: relative;
</span></span><span class="line"><span class="cl">        transition: all .3s ease;
</span></span><span class="line"><span class="cl">        cursor: pointer;
</span></span><span class="line"><span class="cl">        color: #4a4a4a;
</span></span><span class="line"><span class="cl">        border: 1px solid transparent; /* transparent 透明 */
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .cate-list .title {
</span></span><span class="line"><span class="cl">        color: #888;
</span></span><span class="line"><span class="cl">        margin-left: 0;
</span></span><span class="line"><span class="cl">        letter-spacing: .36px;
</span></span><span class="line"><span class="cl">        padding: 0;
</span></span><span class="line"><span class="cl">        line-height: 28px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .cate-list .this {
</span></span><span class="line"><span class="cl">        color: #ffc210;
</span></span><span class="line"><span class="cl">        border: 1px solid #ffc210 !important;
</span></span><span class="line"><span class="cl">        border-radius: 30px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .ordering::after {
</span></span><span class="line"><span class="cl">        content: &#34;&#34;;
</span></span><span class="line"><span class="cl">        display: block;
</span></span><span class="line"><span class="cl">        clear: both;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .ordering ul {
</span></span><span class="line"><span class="cl">        float: left;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .ordering ul::after {
</span></span><span class="line"><span class="cl">        content: &#34;&#34;;
</span></span><span class="line"><span class="cl">        display: block;
</span></span><span class="line"><span class="cl">        clear: both;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .ordering .condition-result {
</span></span><span class="line"><span class="cl">        float: right;
</span></span><span class="line"><span class="cl">        font-size: 14px;
</span></span><span class="line"><span class="cl">        color: #9b9b9b;
</span></span><span class="line"><span class="cl">        line-height: 28px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .ordering ul li {
</span></span><span class="line"><span class="cl">        float: left;
</span></span><span class="line"><span class="cl">        padding: 6px 15px;
</span></span><span class="line"><span class="cl">        line-height: 16px;
</span></span><span class="line"><span class="cl">        margin-left: 14px;
</span></span><span class="line"><span class="cl">        position: relative;
</span></span><span class="line"><span class="cl">        transition: all .3s ease;
</span></span><span class="line"><span class="cl">        cursor: pointer;
</span></span><span class="line"><span class="cl">        color: #4a4a4a;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .ordering .title {
</span></span><span class="line"><span class="cl">        font-size: 16px;
</span></span><span class="line"><span class="cl">        color: #888;
</span></span><span class="line"><span class="cl">        letter-spacing: .36px;
</span></span><span class="line"><span class="cl">        margin-left: 0;
</span></span><span class="line"><span class="cl">        padding: 0;
</span></span><span class="line"><span class="cl">        line-height: 28px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .ordering .this {
</span></span><span class="line"><span class="cl">        color: #ffc210;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .ordering .price {
</span></span><span class="line"><span class="cl">        position: relative;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .ordering .price::before,
</span></span><span class="line"><span class="cl">    .course .ordering .price::after {
</span></span><span class="line"><span class="cl">        cursor: pointer;
</span></span><span class="line"><span class="cl">        content: &#34;&#34;;
</span></span><span class="line"><span class="cl">        display: block;
</span></span><span class="line"><span class="cl">        width: 0px;
</span></span><span class="line"><span class="cl">        height: 0px;
</span></span><span class="line"><span class="cl">        border: 5px solid transparent;
</span></span><span class="line"><span class="cl">        position: absolute;
</span></span><span class="line"><span class="cl">        right: 0;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .ordering .price::before {
</span></span><span class="line"><span class="cl">        border-bottom: 5px solid #aaa;
</span></span><span class="line"><span class="cl">        margin-bottom: 2px;
</span></span><span class="line"><span class="cl">        top: 2px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .ordering .price::after {
</span></span><span class="line"><span class="cl">        border-top: 5px solid #aaa;
</span></span><span class="line"><span class="cl">        bottom: 2px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .ordering .price_up::before {
</span></span><span class="line"><span class="cl">        border-bottom-color: #ffc210;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .ordering .price_down::after {
</span></span><span class="line"><span class="cl">        border-top-color: #ffc210;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .course-item:hover {
</span></span><span class="line"><span class="cl">        box-shadow: 4px 6px 16px rgba(0, 0, 0, .5);
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .course-item {
</span></span><span class="line"><span class="cl">        width: 1100px;
</span></span><span class="line"><span class="cl">        background: #fff;
</span></span><span class="line"><span class="cl">        padding: 20px 30px 20px 20px;
</span></span><span class="line"><span class="cl">        margin-bottom: 35px;
</span></span><span class="line"><span class="cl">        border-radius: 2px;
</span></span><span class="line"><span class="cl">        cursor: pointer;
</span></span><span class="line"><span class="cl">        box-shadow: 2px 3px 16px rgba(0, 0, 0, .1);
</span></span><span class="line"><span class="cl">        /* css3.0 过渡动画 hover 事件操作 */
</span></span><span class="line"><span class="cl">        transition: all .2s ease;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .course-item::after {
</span></span><span class="line"><span class="cl">        content: &#34;&#34;;
</span></span><span class="line"><span class="cl">        display: block;
</span></span><span class="line"><span class="cl">        clear: both;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    /* 顶级元素 父级元素  当前元素{} */
</span></span><span class="line"><span class="cl">    .course .course-item .course-image {
</span></span><span class="line"><span class="cl">        float: left;
</span></span><span class="line"><span class="cl">        width: 423px;
</span></span><span class="line"><span class="cl">        height: 210px;
</span></span><span class="line"><span class="cl">        margin-right: 30px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .course-item .course-image img {
</span></span><span class="line"><span class="cl">        max-width: 100%;
</span></span><span class="line"><span class="cl">        max-height: 210px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .course-item .course-info {
</span></span><span class="line"><span class="cl">        float: left;
</span></span><span class="line"><span class="cl">        width: 596px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .course-info h3 a {
</span></span><span class="line"><span class="cl">        font-size: 26px;
</span></span><span class="line"><span class="cl">        color: #333;
</span></span><span class="line"><span class="cl">        font-weight: normal;
</span></span><span class="line"><span class="cl">        margin-bottom: 8px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .course-info h3 span {
</span></span><span class="line"><span class="cl">        font-size: 14px;
</span></span><span class="line"><span class="cl">        color: #9b9b9b;
</span></span><span class="line"><span class="cl">        float: right;
</span></span><span class="line"><span class="cl">        margin-top: 14px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .course-info h3 span img {
</span></span><span class="line"><span class="cl">        width: 11px;
</span></span><span class="line"><span class="cl">        height: auto;
</span></span><span class="line"><span class="cl">        margin-right: 7px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .course-info .teather-info {
</span></span><span class="line"><span class="cl">        font-size: 14px;
</span></span><span class="line"><span class="cl">        color: #9b9b9b;
</span></span><span class="line"><span class="cl">        margin-bottom: 14px;
</span></span><span class="line"><span class="cl">        padding-bottom: 14px;
</span></span><span class="line"><span class="cl">        border-bottom: 1px solid #333;
</span></span><span class="line"><span class="cl">        border-bottom-color: rgba(51, 51, 51, .05);
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .course-info .teather-info span {
</span></span><span class="line"><span class="cl">        float: right;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .section-list::after {
</span></span><span class="line"><span class="cl">        content: &#34;&#34;;
</span></span><span class="line"><span class="cl">        display: block;
</span></span><span class="line"><span class="cl">        clear: both;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .section-list li {
</span></span><span class="line"><span class="cl">        float: left;
</span></span><span class="line"><span class="cl">        width: 44%;
</span></span><span class="line"><span class="cl">        font-size: 14px;
</span></span><span class="line"><span class="cl">        color: #666;
</span></span><span class="line"><span class="cl">        padding-left: 22px;
</span></span><span class="line"><span class="cl">        /* background: url(&#34;路径&#34;) 是否平铺 x轴位置 y轴位置 */
</span></span><span class="line"><span class="cl">        background: url(&#34;/src/assets/img/play-icon-gray.svg&#34;) no-repeat left 4px;
</span></span><span class="line"><span class="cl">        margin-bottom: 15px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .section-list li .section-title {
</span></span><span class="line"><span class="cl">        /* 以下3句，文本内容过多，会自动隐藏，并显示省略符号 */
</span></span><span class="line"><span class="cl">        text-overflow: ellipsis;
</span></span><span class="line"><span class="cl">        overflow: hidden;
</span></span><span class="line"><span class="cl">        white-space: nowrap;
</span></span><span class="line"><span class="cl">        display: inline-block;
</span></span><span class="line"><span class="cl">        max-width: 200px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .section-list li:hover {
</span></span><span class="line"><span class="cl">        background-image: url(&#34;/src/assets/img/play-icon-yellow.svg&#34;);
</span></span><span class="line"><span class="cl">        color: #ffc210;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .section-list li .free {
</span></span><span class="line"><span class="cl">        width: 34px;
</span></span><span class="line"><span class="cl">        height: 20px;
</span></span><span class="line"><span class="cl">        color: #fd7b4d;
</span></span><span class="line"><span class="cl">        vertical-align: super;
</span></span><span class="line"><span class="cl">        margin-left: 10px;
</span></span><span class="line"><span class="cl">        border: 1px solid #fd7b4d;
</span></span><span class="line"><span class="cl">        border-radius: 2px;
</span></span><span class="line"><span class="cl">        text-align: center;
</span></span><span class="line"><span class="cl">        font-size: 13px;
</span></span><span class="line"><span class="cl">        white-space: nowrap;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .section-list li:hover .free {
</span></span><span class="line"><span class="cl">        color: #ffc210;
</span></span><span class="line"><span class="cl">        border-color: #ffc210;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item {
</span></span><span class="line"><span class="cl">        position: relative;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .pay-box {
</span></span><span class="line"><span class="cl">        position: absolute;
</span></span><span class="line"><span class="cl">        bottom: 20px;
</span></span><span class="line"><span class="cl">        width: 600px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .pay-box::after {
</span></span><span class="line"><span class="cl">        content: &#34;&#34;;
</span></span><span class="line"><span class="cl">        display: block;
</span></span><span class="line"><span class="cl">        clear: both;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .pay-box .discount-type {
</span></span><span class="line"><span class="cl">        padding: 6px 10px;
</span></span><span class="line"><span class="cl">        font-size: 16px;
</span></span><span class="line"><span class="cl">        color: #fff;
</span></span><span class="line"><span class="cl">        text-align: center;
</span></span><span class="line"><span class="cl">        margin-right: 8px;
</span></span><span class="line"><span class="cl">        background: #fa6240;
</span></span><span class="line"><span class="cl">        border: 1px solid #fa6240;
</span></span><span class="line"><span class="cl">        border-radius: 10px 0 10px 0;
</span></span><span class="line"><span class="cl">        float: left;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .pay-box .discount-price {
</span></span><span class="line"><span class="cl">        font-size: 24px;
</span></span><span class="line"><span class="cl">        color: #fa6240;
</span></span><span class="line"><span class="cl">        float: left;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .pay-box .original-price {
</span></span><span class="line"><span class="cl">        text-decoration: line-through;
</span></span><span class="line"><span class="cl">        font-size: 14px;
</span></span><span class="line"><span class="cl">        color: #9b9b9b;
</span></span><span class="line"><span class="cl">        margin-left: 10px;
</span></span><span class="line"><span class="cl">        float: left;
</span></span><span class="line"><span class="cl">        margin-top: 10px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .pay-box .buy-now {
</span></span><span class="line"><span class="cl">        width: 120px;
</span></span><span class="line"><span class="cl">        height: 38px;
</span></span><span class="line"><span class="cl">        background: transparent;
</span></span><span class="line"><span class="cl">        color: #fa6240;
</span></span><span class="line"><span class="cl">        font-size: 16px;
</span></span><span class="line"><span class="cl">        border: 1px solid #fd7b4d;
</span></span><span class="line"><span class="cl">        border-radius: 3px;
</span></span><span class="line"><span class="cl">        transition: all .2s ease-in-out;
</span></span><span class="line"><span class="cl">        float: right;
</span></span><span class="line"><span class="cl">        text-align: center;
</span></span><span class="line"><span class="cl">        line-height: 38px;
</span></span><span class="line"><span class="cl">        position: absolute;
</span></span><span class="line"><span class="cl">        right: 0;
</span></span><span class="line"><span class="cl">        bottom: 5px;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course-item .pay-box .buy-now:hover {
</span></span><span class="line"><span class="cl">        color: #fff;
</span></span><span class="line"><span class="cl">        background: #ffc210;
</span></span><span class="line"><span class="cl">        border: 1px solid #ffc210;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    .course .course_pagination {
</span></span><span class="line"><span class="cl">        margin-bottom: 60px;
</span></span><span class="line"><span class="cl">        text-align: center;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">&lt;/style&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="8-支付">8 支付</h2>
<h3 id="81-支付宝开放平台支付接口">8.1 支付宝开放平台(支付接口)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="c1">#进入沙箱环境，看图1，https://openhome.alipay.com/platform/appDaily.htm?tab=info</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#下载软件，生成公钥，秘钥，看图2，https://opendocs.alipay.com/open/291/106097/</span>
</span></span><span class="line"><span class="cl"><span class="c1">#生成的公钥，私钥文件在这C:\Users\Steady\Documents\支付宝开放平台开发助手\RSA密钥</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#取出公钥，配置到支付宝平台，他会生成一个支付宝公钥，看图3</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>图1</p>
<p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731190640903-1016346158.png" alt="img"></p>
<p>图2</p>
<p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731190651231-659511261.png" alt="img"></p>
<p>图3</p>
<p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731190702956-1381081850.png" alt="img"></p>
<h3 id="82-后端使用支付接口">8.2 后端使用支付接口</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#安装pip install python-alipay-sdk</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#新建一个包，本地测试用，scripts\alipay_test.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">alipay</span> <span class="kn">import</span> <span class="n">AliPay</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># app_private_key_string = open(&#34;/path/to/your/private/key.pem&#34;).read()</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># alipay_public_key_string = open(&#34;/path/to/alipay/public/key.pem&#34;).read()</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#自己的私钥</span>
</span></span><span class="line"><span class="cl">    <span class="n">app_private_key_string</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;-----BEGIN RSA PRIVATE KEY-----
</span></span></span><span class="line"><span class="cl"><span class="s2">    MIIEowIBAAKCAQEAzH4gLah2+9reKHo9s/edqgytBn9tPzHBDNBca2OeUzWRsR0rJTa/3oQICddGttdwjrA8lV3rK0ByDGYKM3WZRuqDwdkRU17aav21sTw42JmeVPMxFzNczoN6N0IL8WcLwRhOeUUoOkrKkmeJFdZAkP2UuoRqh9qXCjDBlZUayEVMH3gRWdlvCdQnEqkJJTi94yHUgvVATQnU3FVLYLgMqCJCFHVabvEBRjBBZ6VzqOZic2WevlC2pjlZt/u1TWsCRIV4xHwbAtcfIW66WMV9q4tyN/9WTG437n7iokMbRZkBTQWFdh9wvSNgl/fCSBsmJPrtuj924xfLu/dvwBml9wIDAQABAoIBAAbiH/cpeofTwDKgmr8aEKaOsqxLUcQUyqjBwrqiqcunO/Y4QyGHjEHTM+oQ4wJ4kgNbj05/0NCt5KjiLmm5BaXLcw/tXJXv1W5Qh/MlUcyIrzmwzfA3/GG/Lzf48yn3DAA97zZJy6baqaLv9T9U7Ot0fbMhjexwwTDIn1uHn1UqYJOGAuGCB/a0GpK1n3Bk4Uut5LxEAa3F/Jyyx0YZaBcKwbp3Q7oVhhrYqFluDLoLzRRDRVMWSjfAd+IRK8KnnnBtd7hUydh9+lmnZ0JIE2OhFTEqhoNnShP1AxQkjfJVNj8LFm5N/hzgk6Uxu4WjqUvn0Cdl4CoI2mzhTSc5ZgECgYEA6X90QHWINcAntgBA4fcOAn5HmA6wP6xCiag+kXBPBx8oAsuRYeBywnw/8cJQ/XH1fz3hah3hFmly+5ckeAEF7WpyUISCEmhJr1sc4IAwBMX8KDYQUluvx2PfA/ZWpS+r9Xb1hz+2WRUWs1gACOjkMuHA0POhEYU8hhP08YyXI4ECgYEA4DMYMX+28UDYn6Dj15HuMQA3uNaXZwHVLLg4nYWRYlIa4hKygzFHN40KoZCgkg4H92TSs4pui87qJw9Pt2Z2ISW/lg3JCotBNkIN+Tcfm0fptecLItEztRjFlLtI0w1vperL0X0mbtKswtx4r3b7qFiu2VP18kIehqxzhN72pXcCgYAL1CEXgty7nFhmp+yhhdp31d3aniPfleJpBtTkmUPnoHRub9GVm8E0iQbUQHvJ2xQMth3NOmZEtGLWy/lU+vhJ5rKT0aKlPBM/huYXmWbVVxJHFzYMdgiZmT2a/ce15oxXiwc1Ks0aBi94NmUKDoJA8Z7K9wyZzp4aTLiD5BNkAQKBgQCh70XCOuUATD4qziLDSXwpmGam8xhYJlK7AjSiUh84TOVt9ONLLwSpcw4CtFvGIqxOXFxzocFG6iTmIYEKjs80EffXgg17uClZ70v4fYAuwDpmUIMSmtgmLcZILx3ikwnZZUXiAesIkNKHzIa+9cm/Ro7EGojCek9iJp0pk4HC8QKBgB8bAb7xqL6zCJQxRyDjfNUNiNicvuMLHWPJT55/sVNJixuxzB/+fOfZk+uSXaeI9lcgtb29SPQkUUeU+3ch0jnrnmt0juLT37HNYipbpAP4WkXMjL9fl7hnGlsUHluYHGuk+B0sNU8OQRhTKSEejejeErfCsfYO+s43ViXrg8Fb
</span></span></span><span class="line"><span class="cl"><span class="s2">    -----END RSA PRIVATE KEY-----
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#支付宝公钥</span>
</span></span><span class="line"><span class="cl">    <span class="n">alipay_public_key_string</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;-----BEGIN PUBLIC KEY-----
</span></span></span><span class="line"><span class="cl"><span class="s2">    MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAghJr50XjmyFrDu7t9rJhafOSgq5y/RANJ1IqferzYpzn9RJkV02nqe2gxXiXD52Ec4CRxYrQ43ghEEGcQtbWVg5u2PNVR8PFi/HVCW8fqwSYYIXQbhVN2doWS/cO8d6FdCg7+ni/XN9LYCk1SBJGLNrz1Mxz8LjLRNt7F34qa+DezaqG0jXt7wtk6Vd6amqVSvIMB80dJhdItc2WIOR/ml4rObiF/VHDhbe5dpD8iN8aCMQocVWDJq1Oe4Ihy9nUoXRWCKW3RM2Jfv/FIAHImHRT8CY12XnwjPcN/jUuQw9qB3ZDY2xBh0wbIVT6SQ802l6JWExBcb7gzAzgK5uQDQIDAQAB
</span></span></span><span class="line"><span class="cl"><span class="s2">    -----END PUBLIC KEY-----
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">alipay</span> <span class="o">=</span> <span class="n">AliPay</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">appid</span><span class="o">=</span><span class="s2">&#34;2021000116660237&#34;</span><span class="p">,</span><span class="c1">#沙箱应用appid</span>
</span></span><span class="line"><span class="cl">        <span class="n">app_notify_url</span><span class="o">=</span><span class="s1">&#39;http://127.0.0.1:8000/home/&#39;</span><span class="p">,</span>  <span class="c1"># the default notify path</span>
</span></span><span class="line"><span class="cl">        <span class="n">app_private_key_string</span><span class="o">=</span><span class="n">app_private_key_string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># alipay public key, do not use your own public key!</span>
</span></span><span class="line"><span class="cl">        <span class="n">alipay_public_key_string</span><span class="o">=</span><span class="n">alipay_public_key_string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">sign_type</span><span class="o">=</span><span class="s2">&#34;RSA2&#34;</span><span class="p">,</span> <span class="c1"># RSA or RSA2</span>
</span></span><span class="line"><span class="cl">        <span class="n">debug</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># False by default</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">alipay_url</span><span class="o">=</span><span class="s1">&#39;https://openapi.alipaydev.com/gateway.do?&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">order_string</span> <span class="o">=</span> <span class="n">alipay</span><span class="o">.</span><span class="n">api_alipay_trade_page_pay</span>    <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">out_trade_no</span><span class="o">=</span><span class="s2">&#34;20161112www4334&#34;</span><span class="p">,</span><span class="c1">#交易订单号，每次不能一样</span>
</span></span><span class="line"><span class="cl">        <span class="n">total_amount</span><span class="o">=</span><span class="mi">9999</span><span class="p">,</span><span class="c1">#订单价格</span>
</span></span><span class="line"><span class="cl">        <span class="n">subject</span><span class="o">=</span><span class="s1">&#39;韩红版充气娃娃&#39;</span><span class="p">,</span><span class="c1">#商品名称</span>
</span></span><span class="line"><span class="cl">        <span class="n">return_url</span><span class="o">=</span><span class="s2">&#34;https://www.luffycity.com/free-course&#34;</span><span class="p">,</span><span class="c1">#支付成功返回商户的url</span>
</span></span><span class="line"><span class="cl">        <span class="n">notify_url</span><span class="o">=</span><span class="s2">&#34;https://www.luffycity.com/free-course&#34;</span><span class="p">,</span><span class="c1">#需要拿到返回结果的url</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">alipay_url</span><span class="o">+</span><span class="n">order_string</span><span class="p">)</span><span class="c1">#打印出支付的地址</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"> <span class="c1">#支付地址效果图，看图1   </span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>图1</p>
<p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731190717767-1438715563.png" alt="img"></p>
<h3 id="83-支付宝二次封装">8.3 支付宝二次封装</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="c1">#luffyapi\libs\ali_pay\settings.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#支付宝沙箱应用appid</span>
</span></span><span class="line"><span class="cl">    <span class="n">APPID</span> <span class="o">=</span> <span class="mi">2021000116660237</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#自己生成的私钥</span>
</span></span><span class="line"><span class="cl">    <span class="n">APP_PRIVATE_KEY_STRING</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span><span class="s1">&#39;pem&#39;</span><span class="p">,</span><span class="s1">&#39;private_key.pem&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#沙箱公钥</span>
</span></span><span class="line"><span class="cl">    <span class="n">ALIPAY_PUBLIC_KEY_STRING</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span><span class="s1">&#39;pem&#39;</span><span class="p">,</span><span class="s1">&#39;al_public_key.pem&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#秘钥长度</span>
</span></span><span class="line"><span class="cl">    <span class="n">SIGN_TYPE</span><span class="o">=</span><span class="s1">&#39;RSA2&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">DEBUG</span><span class="o">=</span><span class="kc">True</span>
</span></span><span class="line"><span class="cl">    <span class="n">GATEWAY</span><span class="o">=</span><span class="s1">&#39;https://openapi.alipaydev.com/gateway.do?&#39;</span> <span class="k">if</span> <span class="n">DEBUG</span> <span class="k">else</span> <span class="s1">&#39;https://openapi.alipay.com/gateway.do?&#39;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\libs\ali_pay\pay.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="kn">from</span> <span class="nn">alipay</span> <span class="kn">import</span> <span class="n">AliPay</span>
</span></span><span class="line"><span class="cl">	<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">settings</span>
</span></span><span class="line"><span class="cl">    <span class="n">alipay</span> <span class="o">=</span> <span class="n">AliPay</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">appid</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">APPID</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">app_notify_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1">#支付结果回调地址</span>
</span></span><span class="line"><span class="cl">        <span class="n">app_private_key_string</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">APP_PRIVATE_KEY_STRING</span><span class="p">,</span><span class="c1">#生成的私钥</span>
</span></span><span class="line"><span class="cl">        <span class="n">alipay_public_key_string</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">ALIPAY_PUBLIC_KEY_STRING</span><span class="p">,</span><span class="c1">#沙箱公钥</span>
</span></span><span class="line"><span class="cl">        <span class="n">sign_type</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">SIGN_TYPE</span><span class="p">,</span> <span class="c1"># RSA or RSA2#秘钥长度</span>
</span></span><span class="line"><span class="cl">        <span class="n">debug</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span>  <span class="c1"># False by default</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">gateway</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">GATEWAY</span><span class="c1">#网关</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\libs\ali_pay\__init__.py</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.pay</span> <span class="kn">import</span> <span class="n">alipay</span><span class="p">,</span><span class="n">gateway</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="84-订单模块表创建">8.4 订单模块表创建</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#新建一个app python ../../manage.py startapp order ，创建表</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">user.models</span> <span class="kn">import</span> <span class="n">User</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">course.models</span> <span class="kn">import</span> <span class="n">Course</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 订单表</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Order</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;订单模型&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">status_choices</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;未支付&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;已支付&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;已取消&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;超时取消&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">pay_choices</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;支付宝&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;微信支付&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">subject</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;订单标题&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">total_amount</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="n">max_digits</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;订单总价&#34;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">out_trade_no</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;订单号&#34;</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">trade_no</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;流水号&#34;</span><span class="p">)</span>  <span class="c1"># 支付宝生成回来的</span>
</span></span><span class="line"><span class="cl">    <span class="n">order_status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SmallIntegerField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">status_choices</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;订单状态&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">pay_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SmallIntegerField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">pay_choices</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;支付方式&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">pay_time</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;支付时间&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 一个用户可以下多个订单，一个订单只属于一个用户，一对多的关系，关联字段写在多个一方，写在order方</span>
</span></span><span class="line"><span class="cl">    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;order_user&#39;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">DO_NOTHING</span><span class="p">,</span> <span class="n">db_constraint</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;下单用户&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">created_time</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;创建时间&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">updated_time</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s1">&#39;最后更新时间&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">db_table</span> <span class="o">=</span> <span class="s2">&#34;luffy_order&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&#34;订单记录&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&#34;订单记录&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s2">&#34;</span><span class="si">%s</span><span class="s2"> - ￥</span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subject</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_amount</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@property</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">courses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">data_list</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">order_courses</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="n">data_list</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;id&#34;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;course_name&#34;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">course</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;real_price&#34;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">real_price</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">data_list</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 订单详情表</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 订单和详情是一对多，关联字段写在多个的一方，写在订单详情表中</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">OrderDetail</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;订单详情&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">order</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Order</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;order_courses&#39;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">db_constraint</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;订单&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">course</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Course</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;course_orders&#39;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span> <span class="n">db_constraint</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;课程&#34;</span><span class="p">,</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">price</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="n">max_digits</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;课程原价&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">real_price</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="n">max_digits</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;课程实价&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">db_table</span> <span class="o">=</span> <span class="s2">&#34;luffy_order_detail&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&#34;订单详情&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&#34;订单详情&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="s2">&#34;</span><span class="si">%s</span><span class="s2">的订单：</span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="o">.</span><span class="n">out_trade_no</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="c1"># 数据库迁移   </span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">makemigrations</span>  
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="85-支付接口">8.5 支付接口</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="c1">#支付接口分析</span>
</span></span><span class="line"><span class="cl">	<span class="mi">1</span> <span class="n">生成订单</span><span class="err">，</span><span class="n">生成支付连接</span><span class="err">，</span><span class="n">返回支付连接</span>
</span></span><span class="line"><span class="cl">    	<span class="n">order表和orderdetail表插入数据</span><span class="err">，</span><span class="n">重写create方法</span>
</span></span><span class="line"><span class="cl">        <span class="n">生成订单号uuid</span>
</span></span><span class="line"><span class="cl">        <span class="n">登录后才能做</span><span class="err">，</span><span class="n">使用jwt认证</span>
</span></span><span class="line"><span class="cl">        <span class="n">当前用户是下单用户</span><span class="err">，</span><span class="n">存到order表中</span>
</span></span><span class="line"><span class="cl">        <span class="n">效验价格</span>
</span></span><span class="line"><span class="cl">	<span class="mi">2</span> <span class="n">支付宝异步回调的post接口</span><span class="err">，</span><span class="n">用于验证签名</span><span class="err">，</span><span class="n">修改订单状态</span>
</span></span><span class="line"><span class="cl">    <span class="mi">3</span> <span class="n">支付宝get回调前端</span><span class="err">，</span><span class="n">vue组件收到</span><span class="err">，</span><span class="n">立马向后端发一个get请求</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#实际操作，规定前端数据格式</span>
</span></span><span class="line"><span class="cl">	<span class="o">-</span><span class="p">{</span><span class="n">course</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="n">total_amount</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span><span class="n">subject</span><span class="p">:</span><span class="n">xx商品</span><span class="p">,</span><span class="n">pay_type</span><span class="p">:</span><span class="mi">1</span><span class="p">,}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\order\views.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.viewsets</span> <span class="kn">import</span> <span class="n">GenericViewSet</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.mixins</span> <span class="kn">import</span> <span class="n">CreateModelMixin</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework_jwt.authentication</span> <span class="kn">import</span> <span class="n">JSONWebTokenAuthentication</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.permissions</span> <span class="kn">import</span> <span class="n">IsAuthenticated</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span><span class="p">,</span><span class="n">serializer</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.response</span> <span class="kn">import</span> <span class="n">Response</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">PayView</span><span class="p">(</span><span class="n">GenericViewSet</span><span class="p">,</span> <span class="n">CreateModelMixin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">authentication_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">JSONWebTokenAuthentication</span><span class="p">,</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">,</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">queryset</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Order</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">OrderSerializer</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># 重写create方法</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">serializer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_serializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">            <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">raise_exception</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">perform_create</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pay_url&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\order\serializer.py      </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">serializers</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">luffyapi01.apps.order</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">luffyapi01.apps.course.models</span> <span class="kn">import</span> <span class="n">Course</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">rest_framework.exceptions</span> <span class="kn">import</span> <span class="n">ValidationError</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">OrderSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 前端传什么数据过来{course:[1,2,3],total_amount:100,subject:xx商品,pay_type:1,}</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># user字段需要，但是不是传的，使用了jwt</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 需要把course:[1,2,3] 处理成 course:[obj1,obj2,obj3]</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 课时：[1,4,6,]===&gt;课时：[obj1,obj4,obj6,]</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># course=serializers.CharField()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 需要把course:[1,2,3] 处理成 course:[obj1,obj2,obj3],可以直接用下面的方法直接处理</span>
</span></span><span class="line"><span class="cl">    <span class="n">course</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">PrimaryKeyRelatedField</span><span class="p">(</span><span class="n">queryset</span><span class="o">=</span><span class="n">Course</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">(),</span> <span class="n">write_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Order</span>
</span></span><span class="line"><span class="cl">        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;total_amount&#39;</span> <span class="p">,</span><span class="s1">&#39;subject&#39;</span> <span class="p">,</span><span class="s1">&#39;pay_type&#39;</span> <span class="p">,</span><span class="s1">&#39;course&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">extra_kwargs</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;total_amount&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;required&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;pay_type&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;required&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">_check_total_amount</span><span class="p">(</span><span class="bp">self</span> <span class="p">,</span><span class="n">attrs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">total_amount</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;total_amount&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">course_list</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;course&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">total_price</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">course_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">total_price</span> <span class="o">+=</span> <span class="n">course</span><span class="o">.</span><span class="n">price</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">total_price</span> <span class="o">!=</span> <span class="n">total_amount</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s1">&#39;价格不合法&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">total_amount</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 生成订单号</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">_get_out_trade_no</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="kn">import</span> <span class="nn">uuid</span>
</span></span><span class="line"><span class="cl">        <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">code</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 获取支付人</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">_get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">user</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 获取支付链接</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">_get_pay_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out_trade_no</span><span class="p">,</span> <span class="n">total_amount</span><span class="p">,</span> <span class="n">subject</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="kn">from</span> <span class="nn">luffyapi01.libs.al_pay</span> <span class="kn">import</span> <span class="n">alipay</span><span class="p">,</span> <span class="n">gateway</span>
</span></span><span class="line"><span class="cl">        <span class="n">order_string</span> <span class="o">=</span> <span class="n">alipay</span><span class="o">.</span><span class="n">api_alipay_trade_page_pay</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">out_trade_no</span><span class="o">=</span><span class="n">out_trade_no</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">total_amount</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">total_amount</span><span class="p">),</span>  <span class="c1"># 只有生成支付宝链接时，不能用Decimal</span>
</span></span><span class="line"><span class="cl">            <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">return_url</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">RETURN_URL</span><span class="p">,</span>  <span class="c1"># get回调，前台地址</span>
</span></span><span class="line"><span class="cl">            <span class="n">notify_url</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">NOTIFY_URL</span><span class="p">,</span>  <span class="c1"># post回调，后台地址</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">pay_url</span> <span class="o">=</span> <span class="n">gateway</span> <span class="o">+</span> <span class="n">order_string</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 将支付链接存入，传递给views</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;pay_url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pay_url</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 入库(两个表)的信息准备</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">_before_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">attrs</span><span class="p">,</span><span class="n">user</span><span class="p">,</span><span class="n">out_trade_on</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user</span>
</span></span><span class="line"><span class="cl">        <span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;out_trade_on&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">out_trade_on</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 1）订单总校验</span>
</span></span><span class="line"><span class="cl">        <span class="n">total_amount</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_total_amount</span><span class="p">(</span><span class="n">attrs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 2)生成订单号</span>
</span></span><span class="line"><span class="cl">        <span class="n">out_trade_no</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_out_trade_no</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 3)支付用户：request.user</span>
</span></span><span class="line"><span class="cl">        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_user</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 4)支付链接生成</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">_get_pay_url</span><span class="p">(</span><span class="n">out_trade_no</span><span class="p">,</span> <span class="n">total_amount</span><span class="p">,</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;subject&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 5）入库(两个表)的信息准备</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">_before_create</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">out_trade_no</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 代表该校验方法通过，进入入库操作</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">attrs</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 重写入库方法的目的：完成订单与订单详情两个表入库操作</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">courses</span> <span class="o">=</span> <span class="n">validated_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;courses&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 订单表入库，不需要courses</span>
</span></span><span class="line"><span class="cl">        <span class="n">order</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Order</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">**</span><span class="n">validated_data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 订单详情表入库，只需要订单对象，课程对象(courses需要拆成一个一个course)</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">models</span><span class="o">.</span><span class="n">OrderDetail</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span> <span class="n">course</span><span class="o">=</span><span class="n">course</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="n">course</span><span class="o">.</span><span class="n">price</span><span class="p">,</span> <span class="n">real_price</span><span class="o">=</span><span class="n">course</span><span class="o">.</span><span class="n">price</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># 先循环制造数据列表[{}, ..., {}]，用群增完成入库 bulk_create()，效率高</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">order</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\order\urls.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">rom</span> <span class="n">django</span><span class="o">.</span><span class="n">urls</span> <span class="kn">import</span> <span class="nn">path</span><span class="o">,</span><span class="nn">re_path</span><span class="o">,</span><span class="nn">include</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.routers</span> <span class="kn">import</span>  <span class="n">SimpleRouter</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">router</span> <span class="o">=</span> <span class="n">SimpleRouter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">router</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;pay&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">PayView</span><span class="p">,</span> <span class="s1">&#39;pay&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="n">path</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">router</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="86-前后台回调端口配置">8.6 前后台回调端口配置</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="c1">#luffyapi\settings\dev.py</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 上线后要换成公网地址</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 后台基URL</span>
</span></span><span class="line"><span class="cl">    <span class="n">BASE_URL</span> <span class="o">=</span> <span class="s1">&#39;http://127.0.0.1:8000&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 前台基URL</span>
</span></span><span class="line"><span class="cl">    <span class="n">LUFFY_URL</span> <span class="o">=</span> <span class="s1">&#39;http://127.0.0.1:8080&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 支付宝同步异步回调接口配置</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 后台异步回调接口</span>
</span></span><span class="line"><span class="cl">    <span class="n">NOTIFY_URL</span> <span class="o">=</span> <span class="n">BASE_URL</span> <span class="o">+</span> <span class="s2">&#34;/order/success/&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 前台同步回调接口，没有 / 结尾</span>
</span></span><span class="line"><span class="cl">    <span class="n">RETURN_URL</span> <span class="o">=</span> <span class="n">LUFFY_URL</span> <span class="o">+</span> <span class="s2">&#34;/pay/success&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="87-前台生成订单并跳转">8.7 前台生成订单并跳转</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="err">#</span><span class="nx">src</span><span class="err">\</span><span class="nx">views</span><span class="err">\</span><span class="nx">FreeCourse</span><span class="p">.</span><span class="nx">vue</span><span class="err">，</span><span class="nx">template内修改下面这句</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;buy-now&#34;</span> <span class="nt">@click</span><span class="s">=&#34;buy_now(course)&#34;</span><span class="p">&gt;</span><span class="na">立即购买</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">#</span><span class="na">src</span><span class="err">\</span><span class="na">views</span><span class="err">\</span><span class="na">FreeCourse.vue</span><span class="err">，</span><span class="na">script的methods内添加buy_now方法</span>
</span></span><span class="line"><span class="cl">	                  <span class="na">buy_now</span><span class="err">(</span><span class="na">course</span><span class="err">)</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="na">let</span> <span class="na">token</span><span class="o">=</span> <span class="na">this.</span><span class="err">$</span><span class="na">cookies.get</span><span class="err">(&#39;</span><span class="na">token</span><span class="err">&#39;)</span>
</span></span><span class="line"><span class="cl">          <span class="na">if</span><span class="err">(!</span><span class="na">token</span><span class="err">)</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="na">this.</span><span class="err">$</span><span class="na">message</span><span class="err">(</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="na">message</span><span class="o">:</span> <span class="err">&#34;</span><span class="na">您还没有登录</span><span class="err">，</span><span class="na">请登录</span><span class="err">&#34;,</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span><span class="err">)</span>
</span></span><span class="line"><span class="cl">            <span class="na">return</span> <span class="na">false</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="na">this.</span><span class="err">$</span><span class="na">axios</span><span class="err">(</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="na">method</span><span class="o">:</span><span class="err">&#39;</span><span class="na">post</span><span class="err">&#39;,</span>
</span></span><span class="line"><span class="cl">                <span class="na">url</span><span class="o">:</span><span class="na">this.</span><span class="err">$</span><span class="na">settings.base_url</span><span class="err">+&#39;/</span><span class="na">order</span><span class="err">/</span><span class="na">pay</span><span class="err">/&#39;,</span>
</span></span><span class="line"><span class="cl">                <span class="na">data</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                  <span class="err">&#34;</span><span class="na">subject</span><span class="err">&#34;</span><span class="o">:</span> <span class="na">course.name</span><span class="err">,</span>
</span></span><span class="line"><span class="cl">                  <span class="err">&#34;</span><span class="na">total_amount</span><span class="err">&#34;</span><span class="o">:</span><span class="na">course.price</span><span class="err">,</span>
</span></span><span class="line"><span class="cl">                  <span class="err">&#34;</span><span class="na">pay_type</span><span class="err">&#34;</span><span class="o">:</span><span class="na">1</span><span class="err">,</span>
</span></span><span class="line"><span class="cl">                  <span class="err">&#34;</span><span class="na">courses</span><span class="err">&#34;</span><span class="o">:</span> <span class="err">[</span>
</span></span><span class="line"><span class="cl">                    <span class="na">course.id</span><span class="err">,</span>
</span></span><span class="line"><span class="cl">                  <span class="err">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span><span class="err">,</span>
</span></span><span class="line"><span class="cl">                <span class="err">//</span> <span class="na">headers</span><span class="o">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="o">:</span> <span class="err">&#39;</span><span class="na">jwt</span><span class="err">&#39;</span> <span class="err">+</span><span class="na">token</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="na">headers</span><span class="o">:</span> <span class="p">{</span><span class="na">Authorization</span><span class="o">:</span> <span class="err">&#39;</span><span class="na">jwt</span> <span class="err">&#39;</span> <span class="err">+</span><span class="na">token</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="err">)</span><span class="na">.then</span><span class="err">(</span><span class="na">response </span><span class="o">=</span><span class="p">&gt;{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="kd">let</span> <span class="nx">pay_url</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span>
</span></span><span class="line"><span class="cl">            <span class="nx">open</span><span class="p">(</span><span class="nx">pay_url</span><span class="p">,</span> <span class="s1">&#39;_self&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="p">=&gt;{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">          <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="88-前台支付成功页面">8.8 前台支付成功页面</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="err">#</span><span class="nx">src</span><span class="err">\</span><span class="nx">views</span><span class="err">\</span><span class="nx">PaySuccess</span><span class="p">.</span><span class="nx">vue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;pay-success&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="c">&lt;!--</span><span class="nx">如果是单独的页面</span><span class="err">，</span><span class="nx">就没必要展示导航栏</span><span class="p">(</span><span class="nx">带有登录的用户</span><span class="p">)</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">Header</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;main&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;success-tips&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tips&#34;</span><span class="p">&gt;</span><span class="nx">您已成功购买</span> <span class="mi">1</span> <span class="nx">门课程</span><span class="err">！</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;order-info&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;info&#34;</span><span class="p">&gt;&lt;</span><span class="nt">b</span><span class="p">&gt;</span><span class="nx">订单号</span><span class="err">：</span><span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;{{</span> <span class="nx">result</span><span class="p">.</span><span class="nx">out_trade_no</span> <span class="p">}}&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;info&#34;</span><span class="p">&gt;&lt;</span><span class="nt">b</span><span class="p">&gt;</span><span class="nx">交易号</span><span class="err">：</span><span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;{{</span> <span class="nx">result</span><span class="p">.</span><span class="nx">trade_no</span> <span class="p">}}&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;info&#34;</span><span class="p">&gt;&lt;</span><span class="nt">b</span><span class="p">&gt;</span><span class="nx">付款时间</span><span class="err">：</span><span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;&lt;</span><span class="nt">span</span><span class="p">&gt;{{</span> <span class="nx">result</span><span class="p">.</span><span class="nx">timestamp</span> <span class="p">}}&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;study&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="nx">立即学习</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="kr">import</span> <span class="nx">Header</span> <span class="nx">from</span> <span class="s2">&#34;@/components/Head&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;Success&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">result</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">                <span class="p">};</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// url后拼接的参数：?及后面的所有参数 =&gt; ?a=1&amp;b=2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="c1">// console.log(location.search);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 解析支付宝回调的url参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="kd">let</span> <span class="nx">params</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>  <span class="c1">// 去除? =&gt; a=1&amp;b=2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="kd">let</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">params</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">)</span> <span class="o">:</span> <span class="p">[];</span>  <span class="c1">// [&#39;a=1&#39;, &#39;b=2&#39;]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="c1">//逐个将每一项添加到args对象中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// 第一次循环a=1，第二次b=2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="kd">let</span> <span class="nx">k_v</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">);</span>  <span class="c1">// [&#39;a&#39;, &#39;1&#39;]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="c1">//解码操作，因为查询字符串经过编码的
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">if</span> <span class="p">(</span><span class="nx">k_v</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="c1">// url编码反解
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="kd">let</span> <span class="nx">k</span> <span class="o">=</span> <span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">k_v</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="p">.</span><span class="nx">result</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">k_v</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                        <span class="c1">// 没有url编码反解
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="c1">// this.result[k_v[0]] = k_v[1];
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 解析后的结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="c1">// console.log(this.result);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1">// 把地址栏上面的支付结果，再get请求转发给后端
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">$axios</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">url</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$settings</span><span class="p">.</span><span class="nx">base_url</span> <span class="o">+</span> <span class="s1">&#39;/order/success/&#39;</span> <span class="o">+</span> <span class="nx">location</span><span class="p">.</span><span class="nx">search</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;get&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}).</span><span class="k">catch</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;支付结果同步失败&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">})</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">Header</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">style</span> <span class="na">scoped</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">main</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">padding</span><span class="o">:</span> <span class="mi">60</span><span class="nx">px</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="nx">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">width</span><span class="o">:</span> <span class="mi">1200</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">background</span><span class="o">:</span> <span class="err">#</span><span class="nx">fff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">main</span> <span class="p">.</span><span class="nx">title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">display</span><span class="o">:</span> <span class="nx">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">-</span><span class="nx">ms</span><span class="o">-</span><span class="nx">flex</span><span class="o">-</span><span class="nx">align</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">align</span><span class="o">-</span><span class="nx">items</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">padding</span><span class="o">:</span> <span class="mi">25</span><span class="nx">px</span> <span class="mi">40</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="nx">f2f2f2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">main</span> <span class="p">.</span><span class="nx">title</span> <span class="p">.</span><span class="nx">success</span><span class="o">-</span><span class="nx">tips</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">box</span><span class="o">-</span><span class="nx">sizing</span><span class="o">:</span> <span class="nx">border</span><span class="o">-</span><span class="nx">box</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">title</span> <span class="nx">img</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">vertical</span><span class="o">-</span><span class="nx">align</span><span class="o">:</span> <span class="nx">middle</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">width</span><span class="o">:</span> <span class="mi">60</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">height</span><span class="o">:</span> <span class="mi">60</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">-</span><span class="nx">right</span><span class="o">:</span> <span class="mi">40</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">title</span> <span class="p">.</span><span class="nx">success</span><span class="o">-</span><span class="nx">tips</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">box</span><span class="o">-</span><span class="nx">sizing</span><span class="o">:</span> <span class="nx">border</span><span class="o">-</span><span class="nx">box</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">title</span> <span class="p">.</span><span class="nx">tips</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">26</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">info</span> <span class="nx">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">ec6730</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">order</span><span class="o">-</span><span class="nx">info</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">padding</span><span class="o">:</span> <span class="mi">25</span><span class="nx">px</span> <span class="mi">48</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">padding</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">15</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">border</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">1</span><span class="nx">px</span> <span class="nx">solid</span> <span class="err">#</span><span class="nx">f2f2f2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">order</span><span class="o">-</span><span class="nx">info</span> <span class="nx">p</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">display</span><span class="o">:</span> <span class="o">-</span><span class="nx">ms</span><span class="o">-</span><span class="nx">flexbox</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">display</span><span class="o">:</span> <span class="nx">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">margin</span><span class="o">-</span><span class="nx">bottom</span><span class="o">:</span> <span class="mi">10</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">order</span><span class="o">-</span><span class="nx">info</span> <span class="nx">p</span> <span class="nx">b</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">font</span><span class="o">-</span><span class="nx">weight</span><span class="o">:</span> <span class="mi">400</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="mi">9</span><span class="nx">d9d9d</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">white</span><span class="o">-</span><span class="nx">space</span><span class="o">:</span> <span class="nx">nowrap</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">study</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">padding</span><span class="o">:</span> <span class="mi">25</span><span class="nx">px</span> <span class="mi">40</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">.</span><span class="nx">study</span> <span class="nx">span</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">display</span><span class="o">:</span> <span class="nx">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">width</span><span class="o">:</span> <span class="mi">140</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">height</span><span class="o">:</span> <span class="mi">42</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">text</span><span class="o">-</span><span class="nx">align</span><span class="o">:</span> <span class="nx">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">line</span><span class="o">-</span><span class="nx">height</span><span class="o">:</span> <span class="mi">42</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">cursor</span><span class="o">:</span> <span class="nx">pointer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">background</span><span class="o">:</span> <span class="err">#</span><span class="nx">ffc210</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">border</span><span class="o">-</span><span class="nx">radius</span><span class="o">:</span> <span class="mi">6</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">font</span><span class="o">-</span><span class="nx">size</span><span class="o">:</span> <span class="mi">16</span><span class="nx">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">color</span><span class="o">:</span> <span class="err">#</span><span class="nx">fff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">#</span><span class="nx">src</span><span class="err">\</span><span class="nx">router</span><span class="err">\</span><span class="nx">index</span><span class="p">.</span><span class="nx">js</span><span class="p">,</span><span class="nx">配置路由</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	    <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/pay/success&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;PaySuccess&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nx">component</span><span class="o">:</span> <span class="nx">PaySuccess</span>
</span></span><span class="line"><span class="cl">    	<span class="p">},</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="89-支付宝回调到前端参数">8.9 支付宝回调到前端参数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">charset</span><span class="o">=</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="o">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="n">out_trade_no</span><span class="o">=</span><span class="mi">17</span><span class="n">fcf8cac17c442bbbc114df6004afff</span><span class="o">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="n">method</span><span class="o">=</span><span class="n">alipay</span><span class="o">.</span><span class="n">trade</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">pay</span><span class="o">.</span><span class="k">return</span><span class="o">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="n">total_amount</span><span class="o">=</span><span class="mf">99.00</span><span class="o">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="n">sign</span><span class="o">=</span><span class="n">WfK2beWFKvVaTHXpREi8HqZtFRH3JbeIvkliReYvfuhAsqaxHguARKtW6jUqUdZinm7ZSaYE1NrBRQa3</span><span class="o">%</span><span class="mi">2</span><span class="n">BLquMk6uMnxE0i</span><span class="o">%</span><span class="mi">2</span><span class="n">FTXIu4</span><span class="o">%</span><span class="mi">2</span><span class="n">FmNTCEqSUlG8fTRPwC2</span><span class="o">%</span><span class="mi">2</span><span class="n">BuU4nN1Ym0eM4puzAc2TUnEJnXCGKP9UxMifN3cjqR5BP</span><span class="o">%</span><span class="mi">2</span><span class="n">B3RRngZSS4IQeogjurpfdiIolLzed</span><span class="o">%</span><span class="mi">2</span><span class="n">FHTWbc4HqvWlWn9JuLmFGTtKHvRRKFr1hqq8Pj</span><span class="o">%</span><span class="mi">2</span><span class="n">Fe3Al8kieDN9Q7JhEdC6F5ROo9rLlmUJtevkjI22oRScrfJl5hb</span><span class="o">%</span><span class="mi">2</span><span class="n">BeYosxNg3WktmYKlF5vsKeZKKnLayAvKGoySLvaWk90x0LijHzzf2</span><span class="o">%</span><span class="mi">2</span><span class="n">F8a9s3w</span><span class="o">%</span><span class="mi">3</span><span class="n">D</span><span class="o">%</span><span class="mi">3</span><span class="n">D</span><span class="o">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="n">trade_no</span><span class="o">=</span><span class="mi">2020072922001480160500851368</span><span class="o">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="n">auth_app_id</span><span class="o">=</span><span class="mi">2016092000554611</span><span class="o">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="n">version</span><span class="o">=</span><span class="mf">1.0</span><span class="o">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="n">app_id</span><span class="o">=</span><span class="mi">2016092000554611</span><span class="o">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="n">sign_type</span><span class="o">=</span><span class="n">RSA2</span><span class="o">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="n">seller_id</span><span class="o">=</span><span class="mi">2088102176466324</span><span class="o">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="n">timestamp</span><span class="o">=</span><span class="mi">2020</span><span class="o">-</span><span class="mi">07</span><span class="o">-</span><span class="mi">29</span><span class="o">%</span><span class="mi">2015</span><span class="o">%</span><span class="mi">3</span><span class="n">A06</span><span class="o">%</span><span class="mi">3</span><span class="n">A44</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="810-同步异步回调接口">8.10 同步异步回调接口</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\order\views.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">#支付宝回调后端、前端get效验订单状态</span>
</span></span><span class="line"><span class="cl">    <span class="kn">from</span> <span class="nn">rest_framework.views</span> <span class="kn">import</span> <span class="n">APIView</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">SuccessView</span><span class="p">(</span><span class="n">APIView</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">request</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">out_trade_no</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;out_trade_no&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">order</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Order</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">out_trade_no</span><span class="o">=</span><span class="n">out_trade_no</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">order</span><span class="o">.</span><span class="n">order_status</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">request</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;&#39;&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">            支付宝回调接口
</span></span></span><span class="line"><span class="cl"><span class="s1">            &#39;&#39;&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="kn">from</span> <span class="nn">luffyapi.libs.ali_pay</span> <span class="kn">import</span> <span class="n">alipay</span>
</span></span><span class="line"><span class="cl">            <span class="kn">from</span> <span class="nn">luffyapi.utils.logger</span> <span class="kn">import</span> <span class="n">log</span>
</span></span><span class="line"><span class="cl">            <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span></span><span class="line"><span class="cl">            <span class="n">out_trade_no</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;out_trade_no&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">gmt_payment</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gmt_payment&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">signature</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&#34;sign&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># 验证签名</span>
</span></span><span class="line"><span class="cl">            <span class="n">success</span> <span class="o">=</span> <span class="n">alipay</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">signature</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">success</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s2">&#34;trade_status&#34;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&#34;TRADE_SUCCESS&#34;</span><span class="p">,</span> <span class="s2">&#34;TRADE_FINISHED&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">models</span><span class="o">.</span><span class="n">Order</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">out_trade_no</span><span class="o">=</span><span class="n">out_trade_no</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">order_status</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">pay_time</span><span class="o">=</span><span class="n">gmt_payment</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">订单支付成功&#39;</span><span class="o">%</span><span class="n">out_trade_no</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">订单有问题&#39;</span> <span class="o">%</span> <span class="n">out_trade_no</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#luffyapi\apps\order\urls.py,加上路由          </span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">        <span class="n">path</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">,</span><span class="n">views</span><span class="o">.</span><span class="n">SuccessView</span><span class="o">.</span><span class="n">as_view</span><span class="p">()),</span>
</span></span><span class="line"><span class="cl">            
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="9-项目上线">9 项目上线</h2>
<h3 id="91-安装软件前准备">9.1 安装软件前准备</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#更新系统软件包</span>
</span></span><span class="line"><span class="cl">	<span class="n">yum</span> <span class="n">update</span> <span class="o">-</span><span class="n">y</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#安装软件管理包和可能使用到的依赖</span>
</span></span><span class="line"><span class="cl">	<span class="n">yum</span> <span class="o">-</span><span class="n">y</span> <span class="n">groupinstall</span> <span class="s2">&#34;Development tools&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">yum</span> <span class="n">install</span> <span class="n">openssl</span><span class="o">-</span><span class="n">devel</span> <span class="n">bzip2</span><span class="o">-</span><span class="n">devel</span> <span class="n">expat</span><span class="o">-</span><span class="n">devel</span> <span class="n">gdbm</span><span class="o">-</span><span class="n">devel</span> <span class="n">readline</span><span class="o">-</span><span class="n">devel</span> <span class="n">sqlite</span><span class="o">-</span><span class="n">devel</span> <span class="n">psmisc</span> <span class="n">libffi</span><span class="o">-</span><span class="n">devel</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#检测是否安装成功，输入git测试有反应即可，看图1    </span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>图1</strong></p>
<p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731183030034-851258031.png" alt="img"></p>
<h3 id="92-安装redis">9.2 安装Redis</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#cd 进入家目录</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#安装redis-5.0.5</span>
</span></span><span class="line"><span class="cl">	<span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="o">.</span><span class="n">redis</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="n">redis</span><span class="o">-</span><span class="mf">5.0.5</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"><span class="c1">#解压安装包</span>
</span></span><span class="line"><span class="cl">	<span class="n">tar</span> <span class="o">-</span><span class="n">xf</span> <span class="n">redis</span><span class="o">-</span><span class="mf">5.0.5</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#进入解压文件</span>
</span></span><span class="line"><span class="cl">	<span class="n">cd</span> <span class="n">redis</span><span class="o">-</span><span class="mf">5.0.5</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#编译环境</span>
</span></span><span class="line"><span class="cl">	<span class="n">make</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#复制环境到指定路径完成安装</span>
</span></span><span class="line"><span class="cl">	<span class="n">cp</span> <span class="o">-</span><span class="n">r</span> <span class="o">~/</span><span class="n">redis</span><span class="o">-</span><span class="mf">5.0.5</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">redis</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#建立软连接（相当于windows快捷方式）</span>
</span></span><span class="line"><span class="cl">	<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">redis</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">redis</span><span class="o">-</span><span class="n">server</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">redis</span><span class="o">-</span><span class="n">server</span>
</span></span><span class="line"><span class="cl">    <span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">redis</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">redis</span><span class="o">-</span><span class="n">cli</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">redis</span><span class="o">-</span><span class="n">cli</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#后台运行redis</span>
</span></span><span class="line"><span class="cl">	<span class="n">cd</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">redis</span>
</span></span><span class="line"><span class="cl">    <span class="n">redis</span><span class="o">-</span><span class="n">server</span> <span class="o">&amp;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#测试redis环境</span>
</span></span><span class="line"><span class="cl">	<span class="n">redis</span><span class="o">-</span><span class="n">cli</span>
</span></span><span class="line"><span class="cl">    <span class="n">crtl</span> <span class="o">+</span> <span class="n">c可以停止</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#关闭redis服务</span>
</span></span><span class="line"><span class="cl">	<span class="n">pkill</span> <span class="o">-</span><span class="n">f</span> <span class="n">redis</span> <span class="o">-</span><span class="mi">9</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="93-安装mysql">9.3 安装MySql</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#cd 进入家目录</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#下载mysql 5.7版本</span>
</span></span><span class="line"><span class="cl">	<span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">dev</span><span class="o">.</span><span class="n">mysql</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">get</span><span class="o">/</span><span class="n">mysql57</span><span class="o">-</span><span class="n">community</span><span class="o">-</span><span class="n">release</span><span class="o">-</span><span class="n">el7</span><span class="o">-</span><span class="mf">10.</span><span class="n">noarch</span><span class="o">.</span><span class="n">rpm</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"><span class="c1">#安装</span>
</span></span><span class="line"><span class="cl">	<span class="n">yum</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">mysql57</span><span class="o">-</span><span class="n">community</span><span class="o">-</span><span class="n">release</span><span class="o">-</span><span class="n">el7</span><span class="o">-</span><span class="mf">10.</span><span class="n">noarch</span><span class="o">.</span><span class="n">rpm</span>
</span></span><span class="line"><span class="cl">    <span class="n">yum</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">mysql</span><span class="o">-</span><span class="n">community</span><span class="o">-</span><span class="n">server</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#启动mysql 5.7并查看启动状态</span>
</span></span><span class="line"><span class="cl">	<span class="n">systemctl</span> <span class="n">start</span> <span class="n">mysqld</span><span class="o">.</span><span class="n">service</span>
</span></span><span class="line"><span class="cl">    <span class="n">systemctl</span> <span class="n">status</span> <span class="n">mysqld</span><span class="o">.</span><span class="n">service</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#查看默认密码（默认密码不能操作数据库）</span>
</span></span><span class="line"><span class="cl">	<span class="n">grep</span> <span class="s2">&#34;password&#34;</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">mysqld</span><span class="o">.</span><span class="n">log</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="c1">#登录并修改密码，新密码需要符合密码策略，查看密码策略SHOW VARIABLES LIKE &#39;validate_password%&#39;;</span>
</span></span><span class="line"><span class="cl">	<span class="n">mysql</span> <span class="o">-</span><span class="n">uroot</span> <span class="o">-</span><span class="n">p默认密码</span>
</span></span><span class="line"><span class="cl">	<span class="n">ALTER</span> <span class="n">USER</span> <span class="s1">&#39;root&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span> <span class="n">IDENTIFIED</span> <span class="n">BY</span> <span class="s1">&#39;新密码&#39;</span><span class="p">;</span>	<span class="c1">#我的是ABC123456</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#上一步执行不了使用忘记密码把，看这里。。。    </span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="94-安装python">9.4 安装Python</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#cd 进入家目录</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#下载Python3.6.6</span>
</span></span><span class="line"><span class="cl">	<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">ftp</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="mf">3.6.6</span><span class="o">/</span><span class="n">Python</span><span class="o">-</span><span class="mf">3.6.6</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">xz</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="c1">#解压安装包</span>
</span></span><span class="line"><span class="cl">	<span class="n">tar</span> <span class="o">-</span><span class="n">xf</span> <span class="n">Python</span><span class="o">-</span><span class="mf">3.6.6</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">xz</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#进入解压包</span>
</span></span><span class="line"><span class="cl">	<span class="n">cd</span> <span class="n">Python</span><span class="o">-</span><span class="mf">3.6.6</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#配置安装路径到/usr/local/python3</span>
</span></span><span class="line"><span class="cl">	<span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">python3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#编译并安装</span>
</span></span><span class="line"><span class="cl">	<span class="n">make</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">##建立软连接（相当于windows快捷方式），终端下能用python3,pip3</span>
</span></span><span class="line"><span class="cl">	<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">python3</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python3</span><span class="mf">.6</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python3</span>
</span></span><span class="line"><span class="cl">    <span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">python3</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">pip3</span><span class="mf">.6</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">pip3</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#可以选择删除安装包与解压包</span>
</span></span><span class="line"><span class="cl">	<span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="n">Python</span><span class="o">-</span><span class="mf">3.6.7</span>
</span></span><span class="line"><span class="cl">    <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="n">Python</span><span class="o">-</span><span class="mf">3.6.7</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">xz</span>	
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="95安装nginx">9.5安装Nginx</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#cd 进入家目录</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#下载niginx 1.13.7</span>
</span></span><span class="line"><span class="cl">	<span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">nginx</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">download</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mf">1.13.7</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="c1">#解压安装包</span>
</span></span><span class="line"><span class="cl">	<span class="n">tar</span> <span class="o">-</span><span class="n">xf</span> <span class="n">nginx</span><span class="o">-</span><span class="mf">1.13.7</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#进入解压包</span>
</span></span><span class="line"><span class="cl">	<span class="n">cd</span> <span class="n">nginx</span><span class="o">-</span><span class="mf">1.13.7</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#配置安装路径到/usr/local/nginx</span>
</span></span><span class="line"><span class="cl">	<span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">nginx</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#编译并安装</span>
</span></span><span class="line"><span class="cl">	<span class="n">make</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#建立软连接（相当于windows快捷方式），终端下能用nginx</span>
</span></span><span class="line"><span class="cl">	<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">nginx</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">nginx</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#可以选择删除安装包与解压包</span>
</span></span><span class="line"><span class="cl">	<span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="n">nginx</span><span class="o">-</span><span class="mf">1.13.7</span>
</span></span><span class="line"><span class="cl">    <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="n">nginx</span><span class="o">-</span><span class="mf">1.13.7</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">xz</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#终端下输入nginx启动nginx，浏览器访问服务器公网ip(或绑定的域名)端口80</span>
</span></span><span class="line"><span class="cl">	<span class="n">nginx</span>
</span></span><span class="line"><span class="cl">    <span class="mf">39.97.209.187</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#nginx命令</span>
</span></span><span class="line"><span class="cl">	<span class="n">启动</span>  <span class="n">nginx</span>
</span></span><span class="line"><span class="cl">    <span class="n">关闭</span>	<span class="n">nginx</span> <span class="o">-</span><span class="n">s</span> <span class="n">stop</span>
</span></span><span class="line"><span class="cl">    <span class="n">重启</span>	<span class="n">nginx</span> <span class="o">-</span><span class="n">s</span> <span class="n">reload</span>
</span></span><span class="line"><span class="cl">    <span class="n">查看端口</span><span class="err">，</span><span class="n">强行关闭</span>
</span></span><span class="line"><span class="cl">    	<span class="n">ps</span> <span class="o">-</span><span class="n">aux</span><span class="o">|</span><span class="n">grep</span> <span class="n">nginx</span>
</span></span><span class="line"><span class="cl">        <span class="n">kill</span> <span class="o">&lt;</span><span class="n">pid</span><span class="p">:</span><span class="n">进程编号</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl"><span class="c1">#nginx介绍</span>
</span></span><span class="line"><span class="cl">    <span class="n">Nginx是一款轻量级的Web</span> <span class="n">服务器</span><span class="o">/</span><span class="n">反向代理服务器及电子邮件</span><span class="err">（</span><span class="n">IMAP</span><span class="o">/</span><span class="n">POP3</span><span class="err">）</span><span class="n">代理服务器</span><span class="err">，</span><span class="n">在BSD</span><span class="o">-</span><span class="n">like</span> <span class="n">协议下发行</span><span class="err">。</span><span class="n">其特点是占有内存少</span><span class="err">，</span><span class="n">并发能力强</span><span class="err">，</span><span class="n">事实上nginx的并发能力在同类型的网页服务器中表现较好</span><span class="err">，</span><span class="n">中国大陆使用nginx网站用户有</span><span class="err">：</span><span class="n">百度</span><span class="err">、</span><span class="n">京东</span><span class="err">、</span><span class="n">新浪</span><span class="err">、</span><span class="n">网易</span><span class="err">、</span><span class="n">腾讯</span><span class="err">、</span><span class="n">淘宝等</span><span class="err">。</span>
</span></span><span class="line"><span class="cl">   <span class="n">作用</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">       <span class="n">http请求转发</span>
</span></span><span class="line"><span class="cl">       <span class="n">反向代理服务器</span>
</span></span><span class="line"><span class="cl">       <span class="n">负载均衡</span>
</span></span><span class="line"><span class="cl">       <span class="n">动静分离</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="96-nginx转发前端项目静态文件">9.6 Nginx转发前端项目静态文件</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#上线前配置，src\assets\js\settings.js</span>
</span></span><span class="line"><span class="cl">	<span class="n">base_url</span><span class="p">:</span> <span class="s1">&#39;http://39.97.209.187:8000&#39;</span><span class="p">,</span>  <span class="o">//</span> <span class="n">改成自己阿里云服务器官网ip的8000端口</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="c1">#前端项目打包，pycharm终端下执行</span>
</span></span><span class="line"><span class="cl">	<span class="n">cnpm</span> <span class="n">run</span> <span class="n">build</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#利用finalshell上传到服务器家目录下</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#服务器操作，移动并重命名上传的dist文件</span>
</span></span><span class="line"><span class="cl">	<span class="n">mv</span> <span class="o">~/</span><span class="n">dist</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">html</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#到nginx配置目录，备份配置，替换下面内容</span>
</span></span><span class="line"><span class="cl">	<span class="n">cd</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span>
</span></span><span class="line"><span class="cl">    <span class="n">mv</span> <span class="n">nginx</span><span class="o">.</span><span class="n">conf</span> <span class="n">nginx</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">bak</span>
</span></span><span class="line"><span class="cl">	<span class="n">vim</span> <span class="n">nginx</span><span class="o">.</span><span class="n">conf</span>	<span class="c1">#按i或insert插入下面的内容，完成后按esc,:wq保存并退出</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">    <span class="n">替换的内容</span>
</span></span><span class="line"><span class="cl">        <span class="n">events</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">worker_connections</span>  <span class="mi">1024</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">http</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">include</span>       <span class="n">mime</span><span class="o">.</span><span class="n">types</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">default_type</span>  <span class="n">application</span><span class="o">/</span><span class="n">octet</span><span class="o">-</span><span class="n">stream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">sendfile</span>        <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">listen</span> <span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">server_name</span>  <span class="mf">127.0.0.1</span><span class="p">;</span> <span class="c1"># 改为自己的域名，没域名修改为127.0.0.1:80</span>
</span></span><span class="line"><span class="cl">            <span class="n">charset</span> <span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">root</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="p">;</span> <span class="c1"># html访问路径</span>
</span></span><span class="line"><span class="cl">                <span class="n">index</span> <span class="n">index</span><span class="o">.</span><span class="n">html</span><span class="p">;</span> <span class="c1"># html文件名称</span>
</span></span><span class="line"><span class="cl">                <span class="n">try_files</span> <span class="err">$</span><span class="n">uri</span> <span class="err">$</span><span class="n">uri</span><span class="o">/</span> <span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span><span class="p">;</span> <span class="c1"># 解决单页面应用刷新404问题</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#重启nginx</span>
</span></span><span class="line"><span class="cl">	<span class="n">nginx</span> <span class="o">-</span><span class="n">s</span> <span class="n">reload</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#http://39.97.209.187/就可以访问前端项目了，看图1    </span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>图1</strong></p>
<p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731183113271-1730663345.png" alt="img"></p>
<h3 id="97-安装uwsgi">9.7 安装uwsgi</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#原生环境下安装</span>
</span></span><span class="line"><span class="cl">	<span class="n">pip3</span> <span class="n">install</span> <span class="n">uwsgi</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1"># 建立软连接（相当于windows快捷方式）</span>
</span></span><span class="line"><span class="cl">	<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">uwsgi</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">uwsgi</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1"># 启动uwsgi</span>
</span></span><span class="line"><span class="cl"><span class="n">uwsgi</span> <span class="o">-</span><span class="n">x</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">luffyapi01</span><span class="o">/</span><span class="n">luffyapi</span><span class="o">.</span><span class="n">xml</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 停止uwsgi</span>
</span></span><span class="line"><span class="cl"><span class="n">pkill</span> <span class="o">-</span><span class="mi">9</span> <span class="n">uwsgi</span>
</span></span><span class="line"><span class="cl">    
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="98-创建虚拟环境">9.8 创建虚拟环境</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#安装依赖</span>
</span></span><span class="line"><span class="cl">	<span class="n">pip3</span> <span class="n">install</span> <span class="n">virtualenv</span>
</span></span><span class="line"><span class="cl">    <span class="n">pip3</span> <span class="n">install</span> <span class="n">virtualenvwrapper</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#建立软连接（相当于windows快捷方式）</span>
</span></span><span class="line"><span class="cl">	<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">python3</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">virtualenv</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">virtualenv</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#配置虚拟环境，填入下面内容，填入内容后按esc,:wq保存并退出，</span>
</span></span><span class="line"><span class="cl">	<span class="n">vim</span> <span class="o">~/.</span><span class="n">bash_profile</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">填入内容</span><span class="err">，</span><span class="n">看图1</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">VIRTUALENVWRAPPER_PYTHON</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python3</span>
</span></span><span class="line"><span class="cl"><span class="n">source</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">python3</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">virtualenvwrapper</span><span class="o">.</span><span class="n">sh</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#查看下修改好的neir</span>
</span></span><span class="line"><span class="cl">	<span class="n">cat</span> <span class="o">~/.</span><span class="n">bash_profile</span>
</span></span><span class="line"><span class="cl"><span class="c1">#更新配置文件内容</span>
</span></span><span class="line"><span class="cl">	<span class="n">source</span> <span class="o">~/.</span><span class="n">bash_profile</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#虚拟环境默认的根目录 </span>
</span></span><span class="line"><span class="cl">	<span class="n">cd</span> <span class="o">~/.</span><span class="n">virtualenvs</span>  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"><span class="c1">#创建虚拟环境</span>
</span></span><span class="line"><span class="cl">    <span class="mi">1</span> <span class="n">创建虚拟环境到配置的WORKON_HOME路径下</span>
</span></span><span class="line"><span class="cl">        <span class="n">mkvirtualenv</span> <span class="o">-</span><span class="n">p</span> <span class="n">python3</span> <span class="n">自定义的虚拟环境名称</span><span class="err">（</span><span class="n">比如</span><span class="err">：</span><span class="n">luffy</span><span class="err">）</span>	<span class="n">使用的是python3</span>
</span></span><span class="line"><span class="cl">        <span class="n">mkvirtualenv</span> <span class="o">-</span><span class="n">p</span> <span class="n">python2</span> <span class="n">自定义的虚拟环境名称</span><span class="err">（</span><span class="n">比如</span><span class="err">：</span><span class="n">luffy</span><span class="err">）</span>	<span class="n">使用的是python2</span>
</span></span><span class="line"><span class="cl">    <span class="mi">2</span> <span class="n">查看已有的虚拟环境</span>
</span></span><span class="line"><span class="cl">        <span class="n">workon</span>
</span></span><span class="line"><span class="cl">    <span class="mi">3</span> <span class="n">使用虚拟环境</span>
</span></span><span class="line"><span class="cl">        <span class="n">workon</span> <span class="n">已有的虚拟环境名称</span><span class="err">（</span><span class="n">比如</span><span class="err">：</span><span class="n">luffy</span><span class="err">）</span>
</span></span><span class="line"><span class="cl">    <span class="mi">4</span> <span class="n">进入</span><span class="err">、</span><span class="n">退出该虚拟环境的Python环境</span>
</span></span><span class="line"><span class="cl">        <span class="n">python</span><span class="err">、</span><span class="n">exit</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="mi">5</span> <span class="n">为虚拟环境安装模块</span>
</span></span><span class="line"><span class="cl">        <span class="n">pip</span> <span class="n">install</span> <span class="n">模块名称</span><span class="err">（</span><span class="n">比如</span><span class="err">：</span><span class="n">django</span><span class="o">==</span><span class="mf">2.2</span><span class="err">）</span>
</span></span><span class="line"><span class="cl">    <span class="mi">6</span> <span class="n">退出当前虚拟环境</span>
</span></span><span class="line"><span class="cl">        <span class="n">deactivate</span>
</span></span><span class="line"><span class="cl">    <span class="mi">7</span> <span class="n">删除虚拟环境</span><span class="err">（</span><span class="n">删除当前虚拟环境要先退出</span><span class="err">）</span>
</span></span><span class="line"><span class="cl">        <span class="n">rmvirtualenv</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="c1"># 1、每个python项目都应该有个requirement.txt --用于放项目依赖的模块</span>
</span></span><span class="line"><span class="cl">    <span class="n">pip</span> <span class="n">freeze</span>
</span></span><span class="line"><span class="cl">    <span class="n">pip</span> <span class="n">freeze</span> <span class="o">&gt;</span> <span class="n">requirement</span><span class="o">.</span><span class="n">txt</span>
</span></span><span class="line"><span class="cl">    <span class="n">如何安装requirement里的模块</span>
</span></span><span class="line"><span class="cl">    	<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirement</span><span class="o">.</span><span class="n">txt</span> <span class="o">-</span><span class="n">i</span> <span class="n">豆瓣源</span>
</span></span><span class="line"><span class="cl">    <span class="n">如果遇到有对应的模块装不上</span><span class="err">，</span><span class="n">到lfd</span><span class="o">.</span><span class="n">uci</span><span class="o">.</span><span class="n">edu</span><span class="o">/~</span><span class="n">gohlke</span><span class="o">/</span><span class="n">pythonlibs</span><span class="o">/</span><span class="c1">#mysqlclient 里面下载</span>
</span></span><span class="line"><span class="cl">    <span class="n">cmd下</span><span class="err">：</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">文件路径</span>   
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>图1</strong></p>
<p><img src="https://img2020.cnblogs.com/blog/1911580/202007/1911580-20200731183136965-1387009655.png" alt="img"></p>
<h3 id="99-转发动态请求django项目使用nginxuwsgi">9.9 转发动态请求、django项目（使用nginx、uwsgi）</h3>
<h3 id="910-aliyun-ecs-服务器操作">9.10 AliYun Ecs 服务器操作</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#mkdir /home/project</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#cd /home/project</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#git clone https://gitee.com/liuqingzheng/luffyapi.git	#换成自己git仓库的地址，clone后端代码</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#进入虚拟环境,项目根目录下安装项目需要的依赖包，</span>
</span></span><span class="line"><span class="cl">	<span class="n">workon</span> <span class="n">luffy</span>
</span></span><span class="line"><span class="cl">    <span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">luffyapi</span>
</span></span><span class="line"><span class="cl">	<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="n">celery</span><span class="o">==</span><span class="mf">4.4.6</span>
</span></span><span class="line"><span class="cl"><span class="n">Django</span><span class="o">==</span><span class="mf">2.0.7</span>
</span></span><span class="line"><span class="cl"><span class="n">django</span><span class="o">-</span><span class="n">cors</span><span class="o">-</span><span class="n">headers</span><span class="o">==</span><span class="mf">3.4.0</span>
</span></span><span class="line"><span class="cl"><span class="n">django</span><span class="o">-</span><span class="nb">filter</span>
</span></span><span class="line"><span class="cl"><span class="n">django</span><span class="o">-</span><span class="n">redis</span>
</span></span><span class="line"><span class="cl"><span class="n">djangorestframework</span><span class="o">==</span><span class="mf">3.11.0</span>
</span></span><span class="line"><span class="cl"><span class="n">djangorestframework</span><span class="o">-</span><span class="n">jwt</span><span class="o">==</span><span class="mf">1.11.0</span>
</span></span><span class="line"><span class="cl"><span class="n">Pillow</span><span class="o">==</span><span class="mf">7.2.0</span>
</span></span><span class="line"><span class="cl"><span class="n">PyMySQL</span><span class="o">==</span><span class="mf">0.9.3</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span><span class="o">-</span><span class="n">alipay</span><span class="o">-</span><span class="n">sdk</span><span class="o">==</span><span class="mf">1.8.0</span>
</span></span><span class="line"><span class="cl"><span class="n">redis</span><span class="o">==</span><span class="mf">3.5.3</span>
</span></span><span class="line"><span class="cl"><span class="n">xadmin</span> <span class="o">@</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">codeload</span><span class="o">.</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">sshwsfc</span><span class="o">/</span><span class="n">xadmin</span><span class="o">/</span><span class="nb">zip</span><span class="o">/</span><span class="n">django2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#pip install uwsgi	#workon环境和原生环境都需要安装，退出虚拟环境命令deactivate</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#uwsgi服务配置，内容日下</span>
</span></span><span class="line"><span class="cl">	<span class="n">vim</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">luffyapi</span><span class="o">/</span><span class="n">luffyapi</span><span class="o">.</span><span class="n">xml</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">内容</span>
</span></span><span class="line"><span class="cl">    	<span class="o">&lt;</span><span class="n">uwsgi</span><span class="o">&gt;</span>    
</span></span><span class="line"><span class="cl">       <span class="o">&lt;</span><span class="n">socket</span><span class="o">&gt;</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8808</span><span class="o">&lt;/</span><span class="n">socket</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">内部端口</span><span class="err">，</span><span class="n">自定义</span> <span class="o">--&gt;</span> 
</span></span><span class="line"><span class="cl">       <span class="o">&lt;</span><span class="n">chdir</span><span class="o">&gt;/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">luffyapi</span><span class="o">/&lt;/</span><span class="n">chdir</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">项目路径</span> <span class="o">--&gt;</span>            
</span></span><span class="line"><span class="cl">       <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span><span class="n">luffyapi</span><span class="o">.</span><span class="n">wsgi</span><span class="o">&lt;/</span><span class="n">module</span><span class="o">&gt;</span>  <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">luffyapi为wsgi</span><span class="o">.</span><span class="n">py所在目录名</span><span class="o">--&gt;</span> 
</span></span><span class="line"><span class="cl">       <span class="o">&lt;</span><span class="n">processes</span><span class="o">&gt;</span><span class="mi">4</span><span class="o">&lt;/</span><span class="n">processes</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">进程数</span> <span class="o">--&gt;</span>     
</span></span><span class="line"><span class="cl">       <span class="o">&lt;</span><span class="n">daemonize</span><span class="o">&gt;</span><span class="n">uwsgi</span><span class="o">.</span><span class="n">log</span><span class="o">&lt;/</span><span class="n">daemonize</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">日志文件</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    	<span class="o">&lt;/</span><span class="n">uwsgi</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="c1">#nginx配置目录，备份配置，完全更新配置，改成下面内容</span>
</span></span><span class="line"><span class="cl">	<span class="n">vim</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">/</span><span class="n">nginx</span><span class="o">.</span><span class="n">conf</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">更改内容</span>
</span></span><span class="line"><span class="cl"><span class="n">events</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">worker_connections</span>  <span class="mi">1024</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">http</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">include</span>       <span class="n">mime</span><span class="o">.</span><span class="n">types</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">default_type</span>  <span class="n">application</span><span class="o">/</span><span class="n">octet</span><span class="o">-</span><span class="n">stream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">sendfile</span>        <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">listen</span> <span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">server_name</span>  <span class="mf">127.0.0.1</span><span class="p">;</span> <span class="c1"># 改为自己的域名，没域名修改为127.0.0.1:80</span>
</span></span><span class="line"><span class="cl">        <span class="n">charset</span> <span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">root</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">html</span><span class="p">;</span> <span class="c1"># html访问路径</span>
</span></span><span class="line"><span class="cl">            <span class="n">index</span> <span class="n">index</span><span class="o">.</span><span class="n">html</span><span class="p">;</span> <span class="c1"># html文件名称</span>
</span></span><span class="line"><span class="cl">            <span class="n">try_files</span> <span class="err">$</span><span class="n">uri</span> <span class="err">$</span><span class="n">uri</span><span class="o">/</span> <span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span><span class="p">;</span> <span class="c1"># 解决单页面应用刷新404问题</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 新增的server</span>
</span></span><span class="line"><span class="cl">    <span class="n">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">listen</span> <span class="mi">8000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">server_name</span>  <span class="mf">127.0.0.1</span><span class="p">;</span> <span class="c1"># 改为自己的域名，没域名修改为127.0.0.1:80</span>
</span></span><span class="line"><span class="cl">        <span class="n">charset</span> <span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">           <span class="n">include</span> <span class="n">uwsgi_params</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">           <span class="n">uwsgi_pass</span> <span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8808</span><span class="p">;</span>  <span class="c1"># 端口要和uwsgi里配置的一样</span>
</span></span><span class="line"><span class="cl">           <span class="n">uwsgi_param</span> <span class="n">UWSGI_SCRIPT</span> <span class="n">luffyapi01</span><span class="o">.</span><span class="n">wsgi</span><span class="p">;</span>  <span class="c1">#wsgi.py所在的目录名+.wsgi</span>
</span></span><span class="line"><span class="cl">           <span class="n">uwsgi_param</span> <span class="n">UWSGI_CHDIR</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">luffyapi01</span><span class="o">/</span><span class="p">;</span> <span class="c1"># 项目路径</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> 	
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#mysql数据库root用户登录，创建库luffyapi,创建用户，授权该用户</span>
</span></span><span class="line"><span class="cl">	<span class="n">mysql</span> <span class="o">-</span><span class="n">uroot</span> <span class="o">-</span><span class="n">p你的密码</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">#创建库</span>
</span></span><span class="line"><span class="cl">    <span class="n">create</span> <span class="n">database</span> <span class="n">luffyapi</span> <span class="n">default</span> <span class="n">charset</span><span class="o">=</span><span class="n">utf8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">#设置权限账号密码：账号密码要与项目中配置的一致</span>
</span></span><span class="line"><span class="cl">    <span class="n">grant</span> <span class="nb">all</span> <span class="n">privileges</span> <span class="n">on</span> <span class="n">luffyapi</span><span class="o">.*</span> <span class="n">to</span> <span class="s1">&#39;luffyapi&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span> <span class="n">identified</span> <span class="n">by</span> <span class="s1">&#39;Luffy123?&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">grant</span> <span class="nb">all</span> <span class="n">privileges</span> <span class="n">on</span> <span class="n">luffyapi</span><span class="o">.*</span> <span class="n">to</span> <span class="s1">&#39;luffyapi&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span> <span class="n">identified</span> <span class="n">by</span> <span class="s1">&#39;Luffy123?&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">flush</span> <span class="n">privileges</span><span class="p">;</span>	<span class="c1">#更新权限</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">#退出mysql </span>
</span></span><span class="line"><span class="cl">    	<span class="n">exit</span><span class="o">/</span><span class="n">quit</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="c1">#到项目下执行数据迁移命令，并创建超级用户</span>
</span></span><span class="line"><span class="cl">	<span class="n">python3</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">makemigrations</span>
</span></span><span class="line"><span class="cl">    <span class="n">python3</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span>
</span></span><span class="line"><span class="cl">    <span class="n">python3</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">createsuperuser</span>	<span class="c1">#我的joab 1@qq.com lqb666666</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#启动uwsgi、nginx，后端项目就起来了</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 停止uwsgi</span>
</span></span><span class="line"><span class="cl">	<span class="n">pkill</span> <span class="o">-</span><span class="mi">9</span> <span class="n">uwsgi</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#启动uwsgi</span>
</span></span><span class="line"><span class="cl">	<span class="n">uwsgi</span> <span class="o">-</span><span class="n">x</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">luffyapi01</span><span class="o">/</span><span class="n">luffyapi</span><span class="o">.</span><span class="n">xml</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#重启nginx</span>
</span></span><span class="line"><span class="cl">    <span class="n">nginx</span> <span class="o">-</span><span class="n">s</span> <span class="n">reload</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">ps</span><span class="err">：</span><span class="n">如遇报错</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">import_export.admin</span> <span class="kn">import</span> <span class="n">DEFAULT_FORMATS</span><span class="p">,</span> <span class="n">SKIP_ADMIN_LOG</span><span class="p">,</span> <span class="n">TMP_STORAGE_CLASS</span>
</span></span><span class="line"><span class="cl"><span class="ne">ImportError</span><span class="p">:</span> <span class="n">cannot</span> <span class="kn">import</span> <span class="nn">name</span> <span class="s1">&#39;DEFAULT_FORMATS&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">则需要</span>
</span></span><span class="line"><span class="cl"><span class="n">注释报错行</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="c1"># from import_export.admin import DEFAULT_FORMATS, SKIP_ADMIN_LOG, TMP_STORAGE_CLASS</span>
</span></span><span class="line"><span class="cl"><span class="n">并添加如下代码</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">import_export.formats.base_formats</span> <span class="kn">import</span> <span class="n">DEFAULT_FORMATS</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">import_export.admin</span> <span class="kn">import</span> <span class="n">ImportMixin</span><span class="p">,</span> <span class="n">ImportExportMixinBase</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="911-数据库插入数据">9.11 数据库插入数据</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">--</span> <span class="n">老师表</span>
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_teacher</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">brief</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:44:19.661327&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:46:54.246271&#39;</span><span class="p">,</span> <span class="s1">&#39;Alex&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;老男孩Python教学总监&#39;</span><span class="p">,</span> <span class="s1">&#39;金角大王&#39;</span><span class="p">,</span> <span class="s1">&#39;teacher/alex_icon.png&#39;</span><span class="p">,</span> <span class="s1">&#39;老男孩教育CTO &amp; CO-FOUNDER 国内知名PYTHON语言推广者 51CTO学院2016</span><span class="se">\201</span><span class="s1">7年度最受学员喜爱10大讲师之一 多款开源软件作者 曾任职公安部、飞信、中金公司、NOKIA中国研究院、华尔街英语、ADVENT、汽车之家等公司&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_teacher</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">brief</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:45:25.092902&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:45:25.092936&#39;</span><span class="p">,</span> <span class="s1">&#39;Mjj&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;前美团前端项目组架构师&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;teacher/mjj_icon.png&#39;</span><span class="p">,</span> <span class="s1">&#39;是马JJ老师, 一个集美貌与才华于一身的男人，搞过几年IOS，又转了前端开发几年，曾就职于美团网任高级前端开发，后来因为不同意王兴(美团老板)的战略布局而出家做老师去了，有丰富的教学经验，开起车来也毫不含糊。一直专注在前端的前沿技术领域。同时，爱好抽烟、喝酒、烫头(锡纸烫)。 我的最爱是前端，因为前端妹子多。&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_teacher</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">brief</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:46:21.997846&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:46:21.997880&#39;</span><span class="p">,</span> <span class="s1">&#39;Lyy&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;老男孩Linux学科带头人&#39;</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;teacher/lyy_icon.png&#39;</span><span class="p">,</span> <span class="s1">&#39;Linux运维技术专家，老男孩Linux金牌讲师，讲课风趣幽默、深入浅出、声音洪亮到爆炸&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">课程分类表</span>
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_category</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:40:58.690413&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:40:58.690477&#39;</span><span class="p">,</span> <span class="s1">&#39;Python&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_category</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:41:08.249735&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:41:08.249817&#39;</span><span class="p">,</span> <span class="s1">&#39;Linux&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">课程表数据</span>
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">course_img</span><span class="p">,</span> <span class="n">course_type</span><span class="p">,</span> <span class="n">brief</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="n">attachment_path</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">students</span><span class="p">,</span> <span class="n">sections</span><span class="p">,</span> <span class="n">pub_sections</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">course_category_id</span><span class="p">,</span> <span class="n">teacher_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:54:33.095201&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:54:33.095238&#39;</span><span class="p">,</span> <span class="s1">&#39;Python开发21天入门&#39;</span><span class="p">,</span> <span class="s1">&#39;courses/alex_python.png&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&amp;&amp;&amp;Python从入门到入土&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14&#39;</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">231</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mf">0.00</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">course_img</span><span class="p">,</span> <span class="n">course_type</span><span class="p">,</span> <span class="n">brief</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="n">attachment_path</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">students</span><span class="p">,</span> <span class="n">sections</span><span class="p">,</span> <span class="n">pub_sections</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">course_category_id</span><span class="p">,</span> <span class="n">teacher_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:56:05.051103&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:56:05.051142&#39;</span><span class="p">,</span> <span class="s1">&#39;Python项目实战&#39;</span><span class="p">,</span> <span class="s1">&#39;courses/mjj_python.png&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;2019-07-14&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">340</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mf">99.00</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">course_img</span><span class="p">,</span> <span class="n">course_type</span><span class="p">,</span> <span class="n">brief</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="n">attachment_path</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">students</span><span class="p">,</span> <span class="n">sections</span><span class="p">,</span> <span class="n">pub_sections</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">course_category_id</span><span class="p">,</span> <span class="n">teacher_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:57:21.190053&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:57:21.190095&#39;</span><span class="p">,</span> <span class="s1">&#39;Linux系统基础5周入门精讲&#39;</span><span class="p">,</span> <span class="s1">&#39;courses/lyy_linux.png&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">219</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mf">39.00</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">章节表数据</span>
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_chapter</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">chapter</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">course_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:58:34.867005&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:00:58.276541&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;计算机原理&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_chapter</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">chapter</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">course_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:58:48.051543&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:01:22.024206&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;环境搭建&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_chapter</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">chapter</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">course_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:59:09.878183&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:01:40.048608&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;项目创建&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_chapter</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">chapter</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">course_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 13:59:37.448626&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:01:58.709652&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Linux环境创建&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">课时表数据</span>
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_Section</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">section_type</span><span class="p">,</span> <span class="n">section_link</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">free_trail</span><span class="p">,</span> <span class="n">chapter_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:02:33.779098&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:02:33.779135&#39;</span><span class="p">,</span> <span class="s1">&#39;计算机原理上&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:02:33.779193&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_Section</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">section_type</span><span class="p">,</span> <span class="n">section_link</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">free_trail</span><span class="p">,</span> <span class="n">chapter_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:02:56.657134&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:02:56.657173&#39;</span><span class="p">,</span> <span class="s1">&#39;计算机原理下&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:02:56.657227&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_Section</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">section_type</span><span class="p">,</span> <span class="n">section_link</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">free_trail</span><span class="p">,</span> <span class="n">chapter_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:03:20.493324&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:03:52.329394&#39;</span><span class="p">,</span> <span class="s1">&#39;环境搭建上&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:03:20.493420&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_Section</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">section_type</span><span class="p">,</span> <span class="n">section_link</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">free_trail</span><span class="p">,</span> <span class="n">chapter_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:03:36.472742&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:03:36.472779&#39;</span><span class="p">,</span> <span class="s1">&#39;环境搭建下&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:03:36.472831&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_Section</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">section_type</span><span class="p">,</span> <span class="n">section_link</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">free_trail</span><span class="p">,</span> <span class="n">chapter_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:04:19.338153&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:04:19.338192&#39;</span><span class="p">,</span> <span class="s1">&#39;web项目的创建&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:04:19.338252&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">luffy_course_Section</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">is_show</span><span class="p">,</span> <span class="n">is_delete</span><span class="p">,</span> <span class="n">created_time</span><span class="p">,</span> <span class="n">updated_time</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="n">section_type</span><span class="p">,</span> <span class="n">section_link</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">pub_date</span><span class="p">,</span> <span class="n">free_trail</span><span class="p">,</span> <span class="n">chapter_id</span><span class="p">)</span> <span class="n">VALUES</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:04:52.895855&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:04:52.895890&#39;</span><span class="p">,</span> <span class="s1">&#39;Linux的环境搭建&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="s1">&#39;2019-07-14 14:04:52.895942&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="912-后台样式">9.12 后台样式</h3>
<h4 id="9121-修改线上配置">9.12.1 修改线上配置</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#编辑线上配置文件</span>
</span></span><span class="line"><span class="cl">	<span class="n">vim</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">luffyapi</span><span class="o">/</span><span class="n">luffyapi</span><span class="o">/</span><span class="n">settings</span><span class="o">/</span><span class="n">pro</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#修改static配置，新增STATIC_ROOT</span>
</span></span><span class="line"><span class="cl">    <span class="n">STATIC_URL</span> <span class="o">=</span> <span class="s1">&#39;/static/&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">STATIC_ROOT</span> <span class="o">=</span> <span class="s1">&#39;/home/project/luffyapi01/luffyapi01/static&#39;</span>  
</span></span><span class="line"><span class="cl">    <span class="n">STATICFILES_DIRS</span> <span class="o">=</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s2">&#34;static&#34;</span><span class="p">),)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#退出保存即可</span>
</span></span><span class="line"><span class="cl">	<span class="n">esc</span>
</span></span><span class="line"><span class="cl">    <span class="p">:</span><span class="n">wq</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="9122-迁移静态样式">9.12.2 迁移静态样式</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#后端项目目录下创建static</span>
</span></span><span class="line"><span class="cl">	<span class="n">mkdir</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">luffyapi</span><span class="o">/</span><span class="n">luffyapi01</span><span class="o">/</span><span class="n">static</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#完成静态文件迁移</span>
</span></span><span class="line"><span class="cl">	<span class="n">python</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">luffyapi01</span><span class="o">/</span><span class="n">manage_pro</span><span class="o">.</span><span class="n">py</span> <span class="n">collectstatic</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="913-nginx配置静态文件路径">9.13 Nginx配置静态文件路径</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#全部修改nginx配置为下面内容</span>
</span></span><span class="line"><span class="cl">	<span class="n">vim</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">/</span><span class="n">nginx</span><span class="o">.</span><span class="n">conf</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">events</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">worker_connections</span>  <span class="mi">1024</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">http</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">include</span>       <span class="n">mime</span><span class="o">.</span><span class="n">types</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">default_type</span>  <span class="n">application</span><span class="o">/</span><span class="n">octet</span><span class="o">-</span><span class="n">stream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">sendfile</span>        <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">listen</span> <span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">server_name</span>  <span class="mf">127.0.0.1</span><span class="p">;</span> <span class="c1"># 改为自己的域名，没域名修改为127.0.0.1:80</span>
</span></span><span class="line"><span class="cl">        <span class="n">charset</span> <span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">root</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">dist</span><span class="p">;</span> <span class="c1"># html访问路径</span>
</span></span><span class="line"><span class="cl">            <span class="n">index</span> <span class="n">index</span><span class="o">.</span><span class="n">html</span><span class="p">;</span> <span class="c1"># html文件名称</span>
</span></span><span class="line"><span class="cl">            <span class="n">try_files</span> <span class="err">$</span><span class="n">uri</span> <span class="err">$</span><span class="n">uri</span><span class="o">/</span> <span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span><span class="p">;</span> <span class="c1"># 解决单页面应用刷新404问题</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">listen</span> <span class="mi">8000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">server_name</span>  <span class="mf">127.0.0.1</span><span class="p">;</span> <span class="c1"># 改为自己的域名，没域名修改为127.0.0.1:80</span>
</span></span><span class="line"><span class="cl">        <span class="n">charset</span> <span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">           <span class="n">include</span> <span class="n">uwsgi_params</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">           <span class="n">uwsgi_pass</span> <span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">8808</span><span class="p">;</span>  <span class="c1"># 端口要和uwsgi里配置的一样</span>
</span></span><span class="line"><span class="cl">           <span class="n">uwsgi_param</span> <span class="n">UWSGI_SCRIPT</span> <span class="n">luffyapi</span><span class="o">.</span><span class="n">wsgi</span><span class="p">;</span>  <span class="c1">#wsgi.py所在的目录名+.wsgi</span>
</span></span><span class="line"><span class="cl">           <span class="n">uwsgi_param</span> <span class="n">UWSGI_CHDIR</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">luffyapi</span><span class="o">/</span><span class="p">;</span> <span class="c1"># 项目路径</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 新增的配置静态文件</span>
</span></span><span class="line"><span class="cl">        <span class="n">location</span> <span class="o">/</span><span class="n">static</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">alias</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">luffyapi</span><span class="o">/</span><span class="n">luffyapi</span><span class="o">/</span><span class="n">static</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#退出保存即可</span>
</span></span><span class="line"><span class="cl">	<span class="n">esc</span>
</span></span><span class="line"><span class="cl">    <span class="p">:</span><span class="n">wq</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="914-启动服务">9.14 启动服务</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#关闭uwsgi服务，重启uwsgi</span>
</span></span><span class="line"><span class="cl">	<span class="n">pkill</span> <span class="o">-</span><span class="n">f</span> <span class="n">uwsgi</span> <span class="o">-</span><span class="mi">9</span>
</span></span><span class="line"><span class="cl">    <span class="n">uwsgi</span> <span class="o">-</span><span class="n">x</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">luffyapi</span><span class="o">/</span><span class="n">luffyapi</span><span class="o">.</span><span class="n">xml</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#关闭nginx，重启nginx</span>
</span></span><span class="line"><span class="cl">	<span class="n">nginx</span> <span class="o">-</span><span class="n">s</span> <span class="n">stop</span>
</span></span><span class="line"><span class="cl">    <span class="n">nginx</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="915-向上项目测试">9.15 向上项目测试</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1">#本地浏览器访问xadmin后台</span>
</span></span><span class="line"><span class="cl"><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">39.99.192.127</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">xadmin</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#登录，录入测试数据</span>
</span></span><span class="line"><span class="cl">	<span class="n">账号密码</span><span class="err">：</span><span class="n">joab</span><span class="o">|</span><span class="n">lqb666666</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#或是导出本地数据库为sql，再在线上导入sql</span>
</span></span><span class="line"><span class="cl">    <span class="o">&gt;</span><span class="p">:</span> <span class="n">mysql</span> <span class="o">-</span><span class="n">h</span> <span class="mf">39.99.192.127</span> <span class="o">-</span><span class="n">P</span> <span class="mi">3306</span> <span class="o">-</span><span class="n">u</span> <span class="n">luffy</span> <span class="o">-</span><span class="n">p</span>
</span></span><span class="line"><span class="cl">    <span class="o">&gt;</span><span class="p">:</span> <span class="n">Luffy123</span><span class="err">?</span>
</span></span><span class="line"><span class="cl">    <span class="o">&gt;</span><span class="p">:</span> <span class="n">use</span> <span class="n">luffy</span>
</span></span><span class="line"><span class="cl">    <span class="o">&gt;</span><span class="p">:</span> <span class="n">复制之前的数据备份</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="10-上线总结">10 上线总结</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">mysql，redis，nginx，uwsgi，python
</span></span><span class="line"><span class="cl">lnmp：linux，nginx，mysql，php/python
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">uwsgi:c语言写的，符合wsgi协议的web服务器，吧http请求转成python语言能识别的字典
</span></span><span class="line"><span class="cl">tomcat(免费)，jboss(收费):等同于uwsgi，符合javaweb的协议
</span></span><span class="line"><span class="cl">php(服务器)：等同于uwsgi，符合php协议
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">django上线+uwsgi(虚拟环境和真实环境都装，运行在虚拟环境)
</span></span><span class="line"><span class="cl">	-吧依赖的模块装上(坑多)
</span></span><span class="line"><span class="cl">	# 到了上线阶段，需要修改文件比较麻烦，直接把静态文件拿到外面，用nginx转发
</span></span><span class="line"><span class="cl">	-收集静态文件(前后端混合开发，里面有drf，xadmin)
</span></span><span class="line"><span class="cl">	-uwsgi配置xml，ini
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">首先上线前准备 wsgi没配置好
</span></span><span class="line"><span class="cl">然后就是在虚拟环境装包的时候要装对版本
</span></span><span class="line"><span class="cl">启动django服务的时候需要将地址设为0.0.0.0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">在这个接口里需要将data转为字典
</span></span><span class="line"><span class="cl">class SuccessView(APIView):
</span></span><span class="line"><span class="cl">	def post(self,request,*args,**kwargs):
</span></span><span class="line"><span class="cl">        # 注意这个小细节，把他转为字典
</span></span><span class="line"><span class="cl">        data = request.data.dict()
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">支付宝回调的端口应该设置为80
</span></span><span class="line"><span class="cl">LUFFY_URL = &#34;http://47.96.177.8:8080&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">总的来说踩了很多的坑，花了很长时间，终于是吧项目上线了。
</span></span></code></pre></td></tr></table>
</div>
</div>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">khw</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2022-03-25
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/python/">python</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/pythonday13cmdb/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">python,day13,cmdb</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/pythonday11django/">
            <span class="next-text nav-default">python,day11,django</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://gitee.com/khwcloud" class="iconfont icon-github" title="github"></a>
  <a href="http://localhost:1313/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2022
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">khw</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>



<script type="text/javascript" src="/js/main.min.9e3db4166f5901c11faec00349b7b03ae36c12a6e820a208cf498f1aee812258.js"></script>








</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>python,day9,数据库 - blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="khw" /><meta name="description" content="数据库的常用操作。
" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.100.1 with theme even" />


<link rel="canonical" href="http://localhost:1313/post/pythonday9%E6%95%B0%E6%8D%AE%E5%BA%93/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.8c3cbcb0324c2bb4875ceccba4007cbad4b4ac8377f33af9953c3e7684534a50.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="python,day9,数据库" />
<meta property="og:description" content="数据库的常用操作。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/pythonday9%E6%95%B0%E6%8D%AE%E5%BA%93/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-10-30T11:06:25+08:00" />
<meta property="article:modified_time" content="2021-10-30T11:06:25+08:00" />

<meta itemprop="name" content="python,day9,数据库">
<meta itemprop="description" content="数据库的常用操作。"><meta itemprop="datePublished" content="2021-10-30T11:06:25+08:00" />
<meta itemprop="dateModified" content="2021-10-30T11:06:25+08:00" />
<meta itemprop="wordCount" content="10945">
<meta itemprop="keywords" content="python,数据库," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="python,day9,数据库"/>
<meta name="twitter:description" content="数据库的常用操作。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">主页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">类别</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">blog</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">主页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">类别</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">python,day9,数据库</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-10-30 </span>
        <div class="post-category">
            <a href="/categories/python/"> python </a>
            </div>
          <span class="more-meta"> 10945 words </span>
          <span class="more-meta"> 22 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#数据库基本操作">数据库基本操作</a></li>
        <li><a href="#heading"></a></li>
        <li><a href="#库的增删改">库的增删改</a></li>
        <li><a href="#表的增删改">表的增删改</a></li>
        <li><a href="#操作表中的内容">操作表中的内容</a></li>
        <li><a href="#创建表的完整语法">创建表的完整语法</a></li>
        <li><a href="#修改表">修改表</a></li>
        <li><a href="#复制表了解">复制表(了解)</a></li>
        <li><a href="#mysql主要存储引擎">Mysql主要存储引擎</a></li>
        <li><a href="#基本数据类型">基本数据类型</a>
          <ul>
            <li></li>
          </ul>
        </li>
        <li><a href="#约束条件">约束条件</a>
          <ul>
            <li><a href="#default-默认值">default 默认值</a></li>
            <li><a href="#unique唯一">unique唯一</a></li>
            <li><a href="#primary-key主键">primary key主键</a></li>
            <li><a href="#auto_increment自增">auto_increment自增</a></li>
          </ul>
        </li>
        <li><a href="#表与表之间建关系">表与表之间建关系</a>
          <ul>
            <li><a href="#外键">外键</a></li>
            <li><a href="#一对多关系">一对多关系</a></li>
            <li><a href="#多对多关系">多对多关系</a></li>
            <li><a href="#一对一">一对一</a></li>
            <li><a href="#总结">总结</a></li>
          </ul>
        </li>
        <li><a href="#查询表">查询表</a>
          <ul>
            <li><a href="#前期表准备">前期表准备</a></li>
            <li><a href="#几个重要关键字的执行顺序">几个重要关键字的执行顺序</a></li>
            <li><a href="#where筛选条件">where筛选条件</a></li>
            <li><a href="#group-by-分组">group by 分组</a></li>
            <li><a href="#分组注意事项">分组注意事项</a></li>
            <li><a href="#having-分组之后的筛选">having 分组之后的筛选</a></li>
            <li><a href="#distinct去重">distinct去重</a></li>
            <li><a href="#order-by-排序">order by 排序</a></li>
            <li><a href="#limit限制展示条数">limit限制展示条数</a></li>
            <li><a href="#正则">正则</a></li>
            <li><a href="#多表查询">多表查询</a></li>
            <li><a href="#子查询">子查询</a></li>
            <li><a href="#总结-1">总结</a></li>
          </ul>
        </li>
        <li><a href="#navicat软件">Navicat软件</a></li>
        <li><a href="#pymysql模块">pymysql模块</a></li>
        <li><a href="#sql注入问题">sql注入问题</a></li>
        <li><a href="#pymysql模块增删改查数据操作">pymysql模块增删改查数据操作</a></li>
        <li><a href="#视图了解">视图(了解)</a></li>
        <li><a href="#触发器了解">触发器(了解)</a></li>
        <li><a href="#事务需要掌握">事务(需要掌握)</a></li>
        <li><a href="#存储过程了解">存储过程(了解)</a></li>
        <li><a href="#在pymysql中调用存储过程">在pymysql中调用存储过程</a></li>
        <li><a href="#内置函数了解">内置函数(了解)</a></li>
        <li><a href="#流程控制了解">流程控制(了解)</a></li>
        <li><a href="#索引理论了解">索引理论(了解)</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>数据库的常用操作。</p>
<h2 id="数据库基本操作">数据库基本操作</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">创建用户：
</span></span><span class="line"><span class="cl">       create user &#39;khw&#39;@&#39;192.168.1.1&#39; identified by &#39;123123&#39;
</span></span><span class="line"><span class="cl">       create user &#39;khw&#39;@&#39;%&#39; identified by &#39;123123&#39;;
</span></span><span class="line"><span class="cl">       # %号匹配所有
</span></span><span class="line"><span class="cl">授权：
</span></span><span class="line"><span class="cl">       创建权限
</span></span><span class="line"><span class="cl">       grant select,insert,update   on db1.* to &#39;khw&#39;@&#39;%&#39;
</span></span><span class="line"><span class="cl">       grant all privileges on mysql.* to &#39;khw&#39;@&#39;%&#39;
</span></span><span class="line"><span class="cl">       privileges:(表示拥有所有权限) 
</span></span><span class="line"><span class="cl">       db1.*:(表示这个数据库里面的所有表)
</span></span><span class="line"><span class="cl">       to &#39;khw&#39;@&#39;%&#39;:表示把这个权限给khw这个用户
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">查看：
</span></span><span class="line"><span class="cl">       use mysql;
</span></span><span class="line"><span class="cl">       select user,host from user #查看user这个表里的user,host两列
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">设置密码：
</span></span><span class="line"><span class="cl">       mysqladmin -uroot -p 原密码 password 新密码
</span></span><span class="line"><span class="cl">       该命令在终端输入即可，无须进入客户端
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">破解密码：
</span></span><span class="line"><span class="cl">       可以将mysql获取用户名和密码校验的功能看出一个装饰器
</span></span><span class="line"><span class="cl">       装饰在了客户端请求访问的功能上，将装饰器溢出就可以不校验用户名密码了
</span></span><span class="line"><span class="cl">       mysqld --initialize --user=mysql --console
</span></span><span class="line"><span class="cl">       mysqld -install
</span></span><span class="line"><span class="cl">       sc delete mysql
</span></span><span class="line"><span class="cl">        第一步：进入mysql安装目录中的bin目录中
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        第二步：以管理员身份运行cmd窗口
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        停止mysql：
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        net stop mysql
</span></span><span class="line"><span class="cl">        开启mysql安全模式
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        mysqld --console --skip-grant-tables --shared-memory
</span></span><span class="line"><span class="cl">        之后这个窗口别关，再新开另一个窗口，直接输入mysql就可以进入了
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        mysql
</span></span><span class="line"><span class="cl">        在新窗口中使用数据库
</span></span><span class="line"><span class="cl">        use mysql;
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        更新权限
</span></span><span class="line"><span class="cl">        flush privileges
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        更新root用户的密码
</span></span><span class="line"><span class="cl">        alter user &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;新密码&#39;;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        最后重启mysql
</span></span><span class="line"><span class="cl">        net start mysql
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="heading"></h2>
<h2 id="库的增删改">库的增删改</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">增:
</span></span><span class="line"><span class="cl">    create database db2 default charset=utf8; 创建数据库
</span></span><span class="line"><span class="cl">查:
</span></span><span class="line"><span class="cl">    show databases; 查看数据库
</span></span><span class="line"><span class="cl">    show create database db1;  查看单个
</span></span><span class="line"><span class="cl">删:
</span></span><span class="line"><span class="cl">    drop database db2; 删除数据库
</span></span><span class="line"><span class="cl">改:
</span></span><span class="line"><span class="cl">    alter database db2 charset=&#39;utf-8&#39;; 修改
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="表的增删改">表的增删改</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">查看当前所在库的名字
</span></span><span class="line"><span class="cl">    select database();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">进入数据库：
</span></span><span class="line"><span class="cl">    use db2;    
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">增：
</span></span><span class="line"><span class="cl">    create table t1(id int,name char(10)) default charset=utf8;  
</span></span><span class="line"><span class="cl">        # 创建表第一列名称为id int类型,第二列名称为name char类型，最多存10个字符
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">查：
</span></span><span class="line"><span class="cl">    show tables;        # 查看当前库下面的所有表名
</span></span><span class="line"><span class="cl">    show create table t1;  # 查看单一表
</span></span><span class="line"><span class="cl">    describe t1;        # 支持简写 desc t1;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">改：
</span></span><span class="line"><span class="cl">    alter table t1 modify name char(16); # 将char的最大字符改为16
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">删：
</span></span><span class="line"><span class="cl">    drop table t1;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="操作表中的内容">操作表中的内容</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">查：
</span></span><span class="line"><span class="cl">    select * from t1;   
</span></span><span class="line"><span class="cl">    select name from t1;    # 查name这一列的数据
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">增：
</span></span><span class="line"><span class="cl">    insert into t1 values(1,&#39;jason&#39;);
</span></span><span class="line"><span class="cl">    insert into t1 values(1,&#39;jason&#39;),(2,&#39;egon&#39;),(3,&#39;tank&#39;);
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">改：
</span></span><span class="line"><span class="cl">    update t1 set age=18    # set表示设置，将age这一列都改为18
</span></span><span class="line"><span class="cl">    update t1 set age=18 where age=17  # 将age这一列里17改为18，where为限制条件
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">删
</span></span><span class="line"><span class="cl">    delete from t1 where id&gt;6   # 将t1这张表里id大于6的都删掉
</span></span><span class="line"><span class="cl">    delete from t1 where name=&#39;json&#39;
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">将表所有的数据清空：
</span></span><span class="line"><span class="cl">    delete from t1;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="创建表的完整语法">创建表的完整语法</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 语法
</span></span><span class="line"><span class="cl">create table 表名(
</span></span><span class="line"><span class="cl">    字段名1 类型(宽度) 约束条件,
</span></span><span class="line"><span class="cl">    字段名2 类型(宽度) 约束条件,
</span></span><span class="line"><span class="cl">    字段名3 类型(宽度) 约束条件,
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 注意
</span></span><span class="line"><span class="cl">1、在同一张表中字段名不能重复
</span></span><span class="line"><span class="cl">2、宽度和约束条件是可选的，而字段名和类型是必选的
</span></span><span class="line"><span class="cl">3、约束条件可以支持写多个
</span></span><span class="line"><span class="cl">    create table t1(
</span></span><span class="line"><span class="cl">        字段名1 类型(宽度) 约束条件1 约束条件2 ....
</span></span><span class="line"><span class="cl">    )
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">4、最后一行不能有逗号
</span></span><span class="line"><span class="cl">    create table t1(
</span></span><span class="line"><span class="cl">        id int,
</span></span><span class="line"><span class="cl">        name char, # 报错
</span></span><span class="line"><span class="cl">    );  
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;补充&#34;&#34;&#34;
</span></span><span class="line"><span class="cl"># 宽度
</span></span><span class="line"><span class="cl">    一半情况下指的是对存储数据的限制
</span></span><span class="line"><span class="cl">    create table t1(name char); 默认宽度是1
</span></span><span class="line"><span class="cl">    insert into t1 values(&#39;jason&#39;)  # 应为宽度唯一，所以这次插入只能插进j
</span></span><span class="line"><span class="cl">    insert into t1 values(null);  # 关键字NULL，插入关键字null
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"># 约束条件 null ， not null
</span></span><span class="line"><span class="cl">create table t1(id int, name char not null)  #不能插入null
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"># 宽度和约束条件的关系
</span></span><span class="line"><span class="cl">    宽度是来限制数据的存储
</span></span><span class="line"><span class="cl">    约束条件是在宽度的基础之上增加额外的约束
</span></span><span class="line"><span class="cl">    
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="修改表">修改表</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># MySQL 对大小写是不敏感的
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">1、修改表名
</span></span><span class="line"><span class="cl">    alter table 表名 rename 新表明;
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">2、增加字段
</span></span><span class="line"><span class="cl">    alter table 表明 add 字段名 字段类型(宽度) 约束条件;  默认是在尾部
</span></span><span class="line"><span class="cl">    alter table 表明 add 字段名 字段类型(宽度) 约束条件 first; 将字段添加到表的最前面
</span></span><span class="line"><span class="cl">    alter table 表明 add 字段名 字段类型(宽度) 约束条件 after 字段名;  更在谁的后面
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">3、删除字段
</span></span><span class="line"><span class="cl">    alter table 表名 drop 字段名;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">4、修改字段
</span></span><span class="line"><span class="cl">    alter table 表名 modify 字段名 字段类型(宽度) 约束条件;
</span></span><span class="line"><span class="cl">    alter table 表名 change 旧字段名 新字段名(宽度) 约束条件;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="复制表了解">复制表(了解)</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># sql语句的结果其实也是一张虚拟表
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">create table 新表名 select * from 旧表;  不能复制主键 外键
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="mysql主要存储引擎">Mysql主要存储引擎</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">日常生活中文件格式有很多，并且针对不同的文件格式有对应不同存储方式和处理机制
</span></span><span class="line"><span class="cl">针对不同的数据应该有对应不同的处理机制来存储
</span></span><span class="line"><span class="cl">存储引擎就是不同的处理机制
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">innodb:
</span></span><span class="line"><span class="cl">    是Mysql5.5版本之后默认的存储引擎
</span></span><span class="line"><span class="cl">    存储数据更加的安全
</span></span><span class="line"><span class="cl">    # 文件个数两个，frm 表结构，ibd 表数据
</span></span><span class="line"><span class="cl">myisam：
</span></span><span class="line"><span class="cl">    是Mysql5.5版本之前默认存储引擎
</span></span><span class="line"><span class="cl">    速度要比innodb更快 但我们更加注重的是数据的安全
</span></span><span class="line"><span class="cl">    # 文件个数三个，frm 表结构，myd 表数据， Myl 索引
</span></span><span class="line"><span class="cl">memory：
</span></span><span class="line"><span class="cl">    内存引擎，数据放在内存中，断电丢失
</span></span><span class="line"><span class="cl">    # 文件个数一个，frm 表结构，数据都在内存追踪
</span></span><span class="line"><span class="cl">blackhole：
</span></span><span class="line"><span class="cl">    无论存什么，都立刻消失
</span></span><span class="line"><span class="cl">    # 文件个数一个，frm 表结构
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl"># 查看所有的存储引擎
</span></span><span class="line"><span class="cl">show engines;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="基本数据类型">基本数据类型</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">详细参考以下连接：https://www.w3school.com.cn/sql/sql_datatypes.asp
</span></span><span class="line"><span class="cl">整形
</span></span><span class="line"><span class="cl">	1、分类：
</span></span><span class="line"><span class="cl">    	tinyint smallint meduimint int gifint
</span></span><span class="line"><span class="cl">    2、作用：
</span></span><span class="line"><span class="cl">    	存储年龄、等级、id、号码等等
</span></span><span class="line"><span class="cl">	3、详细介绍： 图片链接
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl"># 针对整型 括号内的宽度有啥用
</span></span><span class="line"><span class="cl">只有整型括号里的数字不是表示限制位数
</span></span><span class="line"><span class="cl">id int(8)
</span></span><span class="line"><span class="cl">	如果数字没有超出8魏，默认用空格填充至8位
</span></span><span class="line"><span class="cl">	如果数字超出了8位，有几位存几位（但还是要遵守最大范围）
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">总结：
</span></span><span class="line"><span class="cl"> 针对整型字段 括号内无须指定宽度，应为他的默认宽度足够存常见数据了
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">浮点型
</span></span><span class="line"><span class="cl">	1、分类
</span></span><span class="line"><span class="cl">    	FLOAT、DOUBLE、DECIMAL
</span></span><span class="line"><span class="cl">    2、作用
</span></span><span class="line"><span class="cl">    	身高、体重、薪资
</span></span><span class="line"><span class="cl">	3、存储限制
</span></span><span class="line"><span class="cl">    	float(255,30)	# 总共255位，小数部分30位
</span></span><span class="line"><span class="cl">        double(255,30)	# 总共255位，小数部分30位
</span></span><span class="line"><span class="cl">        decimal(65,30)	# 总共65位，小数部分30位
</span></span><span class="line"><span class="cl">	4、精确度
</span></span><span class="line"><span class="cl">    	float &lt; double &lt; decimal
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">事件类型
</span></span><span class="line"><span class="cl">	1、分类
</span></span><span class="line"><span class="cl">    	date 年月日
</span></span><span class="line"><span class="cl">        datetime 年月日 时分秒
</span></span><span class="line"><span class="cl">        time	时分秒
</span></span><span class="line"><span class="cl">        year	年份
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">枚举与集合类型
</span></span><span class="line"><span class="cl">	1、分类
</span></span><span class="line"><span class="cl">    	枚举(enum)	多选一
</span></span><span class="line"><span class="cl">        集合(set)		多选多
</span></span><span class="line"><span class="cl">    2、作用：
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        create table user(
</span></span><span class="line"><span class="cl">            id int,
</span></span><span class="line"><span class="cl">            name char(16),
</span></span><span class="line"><span class="cl">            gender enum(&#39;male&#39;,&#39;female&#39;)
</span></span><span class="line"><span class="cl">        );
</span></span><span class="line"><span class="cl">        insert into user values(1,&#39;jason&#39;,&#39;male&#39;); 正常
</span></span><span class="line"><span class="cl">        insert into user values(2,&#39;egon&#39;,&#39;xo&#39;); 报错
</span></span><span class="line"><span class="cl">        # 枚举字段 后期在存储数据的时候只能从枚举里面选择一个存储
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        create table user(
</span></span><span class="line"><span class="cl">            id int,
</span></span><span class="line"><span class="cl">            name char(16),
</span></span><span class="line"><span class="cl">            gender enum(&#39;male&#39;,&#39;female&#39;)
</span></span><span class="line"><span class="cl">            hobby set(&#39;read&#39;,&#39;dbj&#39;,&#39;hecha&#39;)
</span></span><span class="line"><span class="cl">        );
</span></span><span class="line"><span class="cl">        insert into teacher values(1,&#39;jason&#39;,&#39;read&#39;);	正常
</span></span><span class="line"><span class="cl">        insert into teacher values(2,&#39;egon&#39;,&#39;female&#39;,&#39;dbj,hecha&#39;);	正常
</span></span><span class="line"><span class="cl">        insert into teacher values(3,&#39;tank&#39;,&#39;others&#39;,&#39;生蚝&#39;);  报错
</span></span><span class="line"><span class="cl">        # 结合可以只写一个或多个，但是不能写没有列举的
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="严格模式">严格模式</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 如何查看严格模式
</span></span><span class="line"><span class="cl">show variabels like &#34;%mode&#34;
</span></span><span class="line"><span class="cl">模糊匹配/查询
</span></span><span class="line"><span class="cl">	关键字 like
</span></span><span class="line"><span class="cl">    	%：匹配任意多个字符
</span></span><span class="line"><span class="cl">        -：匹配任意单个字符
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"># 修改严格模式
</span></span><span class="line"><span class="cl">	set session 只在当前窗口有效
</span></span><span class="line"><span class="cl">    set global	全局有效
</span></span><span class="line"><span class="cl">    set global sql_mode = &#34;STRICT_TRANS_TABLES&#34;;
</span></span><span class="line"><span class="cl">    修改完之后重新进入服务端即可
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="约束条件">约束条件</h2>
<h3 id="default-默认值">default 默认值</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">default 默认值
</span></span><span class="line"><span class="cl">        # 补充知识点 插入数据的时候可以指定字段
</span></span><span class="line"><span class="cl">        create table t1(
</span></span><span class="line"><span class="cl">            id int,
</span></span><span class="line"><span class="cl">            name char(16)
</span></span><span class="line"><span class="cl">        );
</span></span><span class="line"><span class="cl">        insert into t1(name,id) values(&#39;jason&#39;,1);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        create table t2(
</span></span><span class="line"><span class="cl">            id int,
</span></span><span class="line"><span class="cl">            name char(16),
</span></span><span class="line"><span class="cl">            gender enum(&#39;male&#39;,&#39;female&#39;,&#39;others&#39;) default &#39;male&#39;
</span></span><span class="line"><span class="cl">        );
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        # default 表示不填默认位male
</span></span><span class="line"><span class="cl">        insert into t2(id,name) values(1,&#39;jason&#39;);
</span></span><span class="line"><span class="cl">        insert into t2 values(2,&#39;egon&#39;,&#39;female&#39;);
</span></span><span class="line"><span class="cl">   
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="unique唯一">unique唯一</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">unique唯一
</span></span><span class="line"><span class="cl">        # 单列唯一,一般位于id这一列
</span></span><span class="line"><span class="cl">        create table t3(
</span></span><span class="line"><span class="cl">            id int unique,
</span></span><span class="line"><span class="cl">            name char(16)
</span></span><span class="line"><span class="cl">        );
</span></span><span class="line"><span class="cl">        insert into t3 values(1,&#39;jason&#39;),(1,&#39;egon&#39;);
</span></span><span class="line"><span class="cl">        insert into t3 values(1,&#39;jason&#39;),(2,&#39;egon&#39;)
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        # 联合唯一，例如ip和端口，单个可以重复，但是加载一起必须是唯一的
</span></span><span class="line"><span class="cl">        create table t4(
</span></span><span class="line"><span class="cl">            id int unique,
</span></span><span class="line"><span class="cl">            ip char(16)
</span></span><span class="line"><span class="cl">            port int,
</span></span><span class="line"><span class="cl">            unique(ip,port)
</span></span><span class="line"><span class="cl">        );
</span></span><span class="line"><span class="cl">        insert into t4 values(1,&#39;127.0.0.1&#39;,8080);
</span></span><span class="line"><span class="cl">        insert into t4 values(2,&#39;127.0.0.1&#39;,8080);
</span></span><span class="line"><span class="cl">        insert into t4 values(2,&#39;127.0.0.1&#39;,8080); #这条报错
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="primary-key主键">primary key主键</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">primary key主键
</span></span><span class="line"><span class="cl"># 1、从约束效果上看 primary key 等价于not null+unique，非空且唯一
</span></span><span class="line"><span class="cl">        create table t5(id int primary key);
</span></span><span class="line"><span class="cl">        intsert into t5 values(null);   报错
</span></span><span class="line"><span class="cl">        intsert into t5 values(1),(1);  报错
</span></span><span class="line"><span class="cl">        intsert into t5 values(1),(2);
</span></span><span class="line"><span class="cl"># 2、他除了有约束效果之外，他还是innodb存储引擎组织数据的依据，innodb存储引擎在创建表的时候必须要有primary key，应为他类似与书的目录 能够帮助提示查询效率 并且也是建表的依据
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        1、一张表中有且只有一个主键 如果没有设置主键，会从上往下搜索，知道遇到一个非空且唯一的字段 将他自动升级为主键
</span></span><span class="line"><span class="cl">        create table t6(
</span></span><span class="line"><span class="cl">            id int ,
</span></span><span class="line"><span class="cl">            name char(16),
</span></span><span class="line"><span class="cl">            age int not null unique,
</span></span><span class="line"><span class="cl">            addr char(32) not null unique
</span></span><span class="line"><span class="cl">        );
</span></span><span class="line"><span class="cl">        2、如果表中没有主键也没有其他非空唯一字段 南无innodb会采用自己内部提供的一个隐藏字段为主键，隐藏意味着你无法使用，无法提升查询速度
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        3、一张表中通常由一个主键字段，并且通常将id/uid/sid字段作为主键
</span></span><span class="line"><span class="cl">        单个字段主键
</span></span><span class="line"><span class="cl">        create table t5(
</span></span><span class="line"><span class="cl">            id int primary key,
</span></span><span class="line"><span class="cl">            name char(16)
</span></span><span class="line"><span class="cl">        );
</span></span><span class="line"><span class="cl">        联合主键(多个字段联合起来作为表的主键，本质还是一个主键)
</span></span><span class="line"><span class="cl">        create table t4(
</span></span><span class="line"><span class="cl">            id int unique,
</span></span><span class="line"><span class="cl">            ip char(16)
</span></span><span class="line"><span class="cl">            port int,
</span></span><span class="line"><span class="cl">            primary key(ip,port)
</span></span><span class="line"><span class="cl">        );
</span></span><span class="line"><span class="cl">        &#34;&#34;&#34;
</span></span><span class="line"><span class="cl">所以我们在创建表的时候id字段一定要加primary key
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="auto_increment自增">auto_increment自增</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 当编号太多，人为维护麻烦，可以使用此主键
</span></span><span class="line"><span class="cl">create table t8(
</span></span><span class="line"><span class="cl">	id int primary key auto_increment,	#id字段可以自增，并且非空且唯一
</span></span><span class="line"><span class="cl">    name char(16)
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">insert into t8(name) values(&#39;json&#39;),(&#39;egon&#39;),(&#39;kevin&#39;);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">总结：
</span></span><span class="line"><span class="cl">	以后再创建表的id(数据的唯一标识id、uid、sid)字段的时候
</span></span><span class="line"><span class="cl">    id int primary key auto_increment
</span></span><span class="line"><span class="cl">补充：
</span></span><span class="line"><span class="cl">	delete from 再删除表中数据的时候，主键的自增不会停止
</span></span><span class="line"><span class="cl">    truncate t1 清空表数据并重置主键
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="表与表之间建关系">表与表之间建关系</h2>
<h3 id="外键">外键</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">外键是用来帮助我们建立表与表之间的关系
</span></span><span class="line"><span class="cl">外键放在哪一方，哪一方就用来存另一张表的主键值，然后通过外键找到另一张表的数据
</span></span><span class="line"><span class="cl">foreign key
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="一对多关系">一对多关系</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">员工表与部门表为例
</span></span><span class="line"><span class="cl">	一个员工能否对应多个部门
</span></span><span class="line"><span class="cl">		不能
</span></span><span class="line"><span class="cl">	一个部门能否对应多个员工
</span></span><span class="line"><span class="cl">		能
</span></span><span class="line"><span class="cl">	得出结论
</span></span><span class="line"><span class="cl">		员工表与部门表 是单向的一对多
</span></span><span class="line"><span class="cl">		所以表关系就是一对多
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">foreign key
</span></span><span class="line"><span class="cl">	1、一对多表关系，外键字段写在多的一方
</span></span><span class="line"><span class="cl">    2、再创建表的时候，一定要先建被关联表
</span></span><span class="line"><span class="cl">    3、再录入数据的时候，也必须先录入被关联表
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 部门表
</span></span><span class="line"><span class="cl">create table dep(
</span></span><span class="line"><span class="cl">	id int primary key auto_increment,
</span></span><span class="line"><span class="cl">    dep_name char(16),
</span></span><span class="line"><span class="cl">    dep_desc char(32)
</span></span><span class="line"><span class="cl">);
</span></span><span class="line"><span class="cl"># 员工表
</span></span><span class="line"><span class="cl">create table emp(
</span></span><span class="line"><span class="cl">	id int primary key auto_increment,
</span></span><span class="line"><span class="cl">    name char(16),
</span></span><span class="line"><span class="cl">    gender enum(&#39;male&#39;,&#39;female&#39;,&#39;oyhers&#39;) default &#39;male&#39;,
</span></span><span class="line"><span class="cl">    dep_id int,
</span></span><span class="line"><span class="cl">    foreign key(dep_id) references dep(id)
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">insert into dep(dep_name,dep_desc) values(&#39;sb教学部&#39;,&#39;教书育人&#39;)，values(&#39;外交部&#39;,&#39;人多外交&#39;);
</span></span><span class="line"><span class="cl">insert into emp(name,dep_id) values(&#39;jason&#39;,2),values(&#39;egon&#39;,1);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 级联操作：
</span></span><span class="line"><span class="cl">    # 1、修改dep表里面的id字段
</span></span><span class="line"><span class="cl">    update dep set id=200 where id=2；  不行
</span></span><span class="line"><span class="cl">    # 2、删除dep表里面的数据
</span></span><span class="line"><span class="cl">    delete from dep; 不行 
</span></span><span class="line"><span class="cl">    # 3、删除教学部门对应的员工数据，之后再删除部门
</span></span><span class="line"><span class="cl">        操作繁琐
</span></span><span class="line"><span class="cl">    # 4、真正做到数据之间的关系
</span></span><span class="line"><span class="cl">        更新就同步跟新，级联更新
</span></span><span class="line"><span class="cl">        删除就同步删除，级联删除
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">create table emp(
</span></span><span class="line"><span class="cl">	id int primary key auto_increment,
</span></span><span class="line"><span class="cl">    name char(16),
</span></span><span class="line"><span class="cl">    gender enum(&#39;male&#39;,&#39;female&#39;,&#39;oyhers&#39;) default &#39;male&#39;,
</span></span><span class="line"><span class="cl">    dep_id int,
</span></span><span class="line"><span class="cl">    foreign key(dep_id) references dep(id),
</span></span><span class="line"><span class="cl">    on update cascade,	# 同步更新
</span></span><span class="line"><span class="cl">    on delete cascade	# 同步删除
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">insert into dep(dep_name,dep_desc) values(&#39;sb教学部&#39;,&#39;教书育人&#39;)，values(&#39;外交部&#39;,&#39;人多外交&#39;);
</span></span><span class="line"><span class="cl">insert into emp(name,dep_id) values(&#39;jason&#39;,2),values(&#39;egon&#39;,1);
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="多对多关系">多对多关系</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">图书表和作者表为例
</span></span><span class="line"><span class="cl">	一本书可以对应多个作者
</span></span><span class="line"><span class="cl">		可以
</span></span><span class="line"><span class="cl">	一个作者对应多本书
</span></span><span class="line"><span class="cl">		可以
</span></span><span class="line"><span class="cl">	所以推出为多对多关系
</span></span><span class="line"><span class="cl">	两张表都有外键字段
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">create table book(
</span></span><span class="line"><span class="cl">	id int primary key auto_increment,
</span></span><span class="line"><span class="cl">    title varchar(32),
</span></span><span class="line"><span class="cl">    price int,
</span></span><span class="line"><span class="cl">    author_id int,
</span></span><span class="line"><span class="cl">    foreign key(author_id) references author(id),
</span></span><span class="line"><span class="cl">    on update cascade,	# 同步更新
</span></span><span class="line"><span class="cl">    on delete cascade	# 同步删除
</span></span><span class="line"><span class="cl">);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">create table author(
</span></span><span class="line"><span class="cl">	id int primary key auto_increment,
</span></span><span class="line"><span class="cl">    name varchar(32),
</span></span><span class="line"><span class="cl">    age int,
</span></span><span class="line"><span class="cl">    book_id int,
</span></span><span class="line"><span class="cl">    foreign key(book_id) references book(id),
</span></span><span class="line"><span class="cl">    on update cascade,	# 同步更新
</span></span><span class="line"><span class="cl">    on delete cascade	# 同步删除
</span></span><span class="line"><span class="cl">);
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">foreign key
</span></span><span class="line"><span class="cl">	1、一对多表关系，外键字段写在多的一方
</span></span><span class="line"><span class="cl">    2、再创建表的时候，一定要先建被关联表
</span></span><span class="line"><span class="cl">    3、再录入数据的时候，也必须先录入被关联表
</span></span><span class="line"><span class="cl">按照上述的方式创建一个都别想成功
</span></span><span class="line"><span class="cl">其实我们只是想记录书籍和作者的关系
</span></span><span class="line"><span class="cl">针对多对多字段表关系，不能在两张表原有的表中创建外键
</span></span><span class="line"><span class="cl">需专门建立一张表，来存放外键
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">create table book(
</span></span><span class="line"><span class="cl">	id int primary key auto_increment,
</span></span><span class="line"><span class="cl">    title varchar(32),
</span></span><span class="line"><span class="cl">    price int
</span></span><span class="line"><span class="cl">);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">create table author(
</span></span><span class="line"><span class="cl">	id int primary key auto_increment,
</span></span><span class="line"><span class="cl">    name varchar(32),
</span></span><span class="line"><span class="cl">    age int
</span></span><span class="line"><span class="cl">);
</span></span><span class="line"><span class="cl">create table book2author(
</span></span><span class="line"><span class="cl">	id int primary key auto_increment,
</span></span><span class="line"><span class="cl">    author_id int,
</span></span><span class="line"><span class="cl">    book_id int,
</span></span><span class="line"><span class="cl">    foreign key(author_id) references author(id),
</span></span><span class="line"><span class="cl">    on update cascade,	# 同步更新
</span></span><span class="line"><span class="cl">    on delete cascade,	# 同步删除
</span></span><span class="line"><span class="cl">    foreign key(book_id) references book(id),
</span></span><span class="line"><span class="cl">    on update cascade,	# 同步更新
</span></span><span class="line"><span class="cl">    on delete cascade	# 同步删除
</span></span><span class="line"><span class="cl">);
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="一对一">一对一</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">id name age addr phone hobby .....
</span></span><span class="line"><span class="cl">如果一个表的字段特别多，每次查询又不是所有字段都能用得到
</span></span><span class="line"><span class="cl">将表一分为二
</span></span><span class="line"><span class="cl">	用户表
</span></span><span class="line"><span class="cl">		id name age
</span></span><span class="line"><span class="cl">	用户详情表
</span></span><span class="line"><span class="cl">		id addr phone bobby email...
</span></span><span class="line"><span class="cl">        站在用户表
</span></span><span class="line"><span class="cl">            一个用户能否对应多个用户详情 不能
</span></span><span class="line"><span class="cl">        站在详情表
</span></span><span class="line"><span class="cl">            一个详情能否属于多个用户 不能
</span></span><span class="line"><span class="cl">        结论：这种就属于一对一或者没有关系
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">一对一外键字段建在任意一方都可以，但建议建在查询频率较高的表中
</span></span><span class="line"><span class="cl">create table authordetail(
</span></span><span class="line"><span class="cl">	id int primary key auth_increment,
</span></span><span class="line"><span class="cl">    phone int,
</span></span><span class="line"><span class="cl">    addr varchar()
</span></span><span class="line"><span class="cl">);
</span></span><span class="line"><span class="cl">create table author(
</span></span><span class="line"><span class="cl">	id int primary key auth_increment,
</span></span><span class="line"><span class="cl">    name varchar(32)
</span></span><span class="line"><span class="cl">    age int,
</span></span><span class="line"><span class="cl">    authordetail_id int unique,
</span></span><span class="line"><span class="cl">    foreign key(authordetail_id) referemces aithordetail(id),
</span></span><span class="line"><span class="cl">    on update cascade,	# 同步更新
</span></span><span class="line"><span class="cl">    on delete cascade	# 同步删除
</span></span><span class="line"><span class="cl">);
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="总结">总结</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">表关系建立需要用到 foreign key
</span></span><span class="line"><span class="cl">	一对多
</span></span><span class="line"><span class="cl">		外键字段建在多的一方
</span></span><span class="line"><span class="cl">	多对多
</span></span><span class="line"><span class="cl">		自己开设第三方存储
</span></span><span class="line"><span class="cl">	一对一
</span></span><span class="line"><span class="cl">		建在任意一方都可以 但是推荐建在查询频率较高的表中
</span></span><span class="line"><span class="cl">判断表之间关系的方式
</span></span><span class="line"><span class="cl">	换位思考！
</span></span><span class="line"><span class="cl">		员工与部门
</span></span><span class="line"><span class="cl">		图书与作者
</span></span><span class="line"><span class="cl">		作者与作者详情
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="查询表">查询表</h2>
<h3 id="前期表准备">前期表准备</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">create table emp(
</span></span><span class="line"><span class="cl">	id int not null unique auto_increment,
</span></span><span class="line"><span class="cl">	name varchar(20) not null,
</span></span><span class="line"><span class="cl">	sex enum(&#39;male&#39;,&#39;female&#39;) not null default &#39;male&#39;	#大部分是男的
</span></span><span class="line"><span class="cl">	age int(3) unsigned not null default 28,
</span></span><span class="line"><span class="cl">	hire_date date not null,
</span></span><span class="line"><span class="cl">	post varchar(50),
</span></span><span class="line"><span class="cl">	post_comment varchar(100),
</span></span><span class="line"><span class="cl">	salary double(15,2),
</span></span><span class="line"><span class="cl">	office int,	#一个部门一个屋子
</span></span><span class="line"><span class="cl">	depart_id int
</span></span><span class="line"><span class="cl">);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 插入记录
</span></span><span class="line"><span class="cl"># 三个部门 教学，销售，运营
</span></span><span class="line"><span class="cl">insert into 
</span></span><span class="line"><span class="cl">emp(name,sex,age,hire_Date,post,salary,office,depart_id) values
</span></span><span class="line"><span class="cl">(&#39;jason&#39;,&#39;male&#39;,78,&#39;20150302&#39;,&#39;张江第一帅形象代言&#39;,7300,22,421,1), #以下是教学部
</span></span><span class="line"><span class="cl">(&#39;top&#39;,&#39;male&#39;,28,&#39;20150302&#39;,&#39;teacher&#39;,100000,33,421,1),
</span></span><span class="line"><span class="cl">(&#39;owem&#39;,&#39;male&#39;,38,&#39;20050302&#39;,&#39;teacher&#39;,8300,13,421,1),
</span></span><span class="line"><span class="cl">(&#39;top&#39;,&#39;male&#39;,48,&#39;20150302&#39;,&#39;teacher&#39;,9500,63,421,1),	
</span></span><span class="line"><span class="cl">(&#39;哈哈&#39;,&#39;male&#39;,58,&#39;20150302&#39;,&#39;sale&#39;,6500,53,421,1),	#以下是销售部
</span></span><span class="line"><span class="cl">(&#39;呵呵&#39;,&#39;male&#39;,68,&#39;20150302&#39;,&#39;sale&#39;,5500,63,421,1),
</span></span><span class="line"><span class="cl">(&#39;憎龙&#39;,&#39;male&#39;,78,&#39;20150302&#39;,&#39;sale&#39;,4500,73,421,1),	#以下是运营部
</span></span><span class="line"><span class="cl">(&#39;程咬铁&#39;,&#39;male&#39;,88,&#39;20150302&#39;,&#39;sale&#39;,3500,93,421,1);
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="几个重要关键字的执行顺序">几个重要关键字的执行顺序</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 书写顺序
</span></span><span class="line"><span class="cl">select id,name from emp where id &gt; 3;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#执行顺序
</span></span><span class="line"><span class="cl">from
</span></span><span class="line"><span class="cl">where
</span></span><span class="line"><span class="cl">select
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">可以按照书写顺序的方式写sql
</span></span><span class="line"><span class="cl">	select * 先用*占位
</span></span><span class="line"><span class="cl">	之后补全后面的sql语句
</span></span><span class="line"><span class="cl">	最后将*号替换成想要的字段
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="where筛选条件">where筛选条件</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 作用：是对整体数据的一个筛选操作
</span></span><span class="line"><span class="cl">1、查询id大于等于3小于等于6的数据
</span></span><span class="line"><span class="cl">select id,name,age from emp where id&gt;=3 and id&lt;=6;
</span></span><span class="line"><span class="cl">select id,nam,age from emp where id betwenn 3 and 6; 两者等价
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2、查询薪资是20000或者18000或者17000的数据
</span></span><span class="line"><span class="cl">slect * from emp where salary=2000 or salary=18000 or salary=17000;
</span></span><span class="line"><span class="cl">select * from emp where salary in (2000,18000,17000);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">3、查询员工姓名中包含字母o的员工姓名和薪资
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">模糊查询
</span></span><span class="line"><span class="cl">	like 
</span></span><span class="line"><span class="cl">		%匹配任意多个字符
</span></span><span class="line"><span class="cl">		_匹配任意单个字符
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">select name,salary from emp where name like &#39;%o%&#39;;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">4、查询员工姓名是由四个字符组成的姓名和薪资
</span></span><span class="line"><span class="cl">select name,salary from emp where name like &#39;____&#39;;
</span></span><span class="line"><span class="cl">select name,salary from emp where char_length(name) = 4;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">5、查询id小于3或者大于5的
</span></span><span class="line"><span class="cl">select * from emp where id not between 3 and 6
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">6、查询薪资不在20000，18000，17000范围的数据
</span></span><span class="line"><span class="cl">select * from emp where salary not int (20000,18000,17000);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">7、查询岗位描述为空的员工和岗位名，针对null 不用等号用is
</span></span><span class="line"><span class="cl">select name,post from emp where post_comment = NULL;
</span></span><span class="line"><span class="cl">select name,post from emp where post_comment is NULL;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="group-by-分组">group by 分组</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">场景：
</span></span><span class="line"><span class="cl">	男女比例
</span></span><span class="line"><span class="cl">	部门平均薪资
</span></span><span class="line"><span class="cl">	部门秃头率
</span></span><span class="line"><span class="cl">	国家之间数据统计
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">分组语法：
</span></span><span class="line"><span class="cl">	select * from emp group by post;
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">聚合函数：
</span></span><span class="line"><span class="cl">	max
</span></span><span class="line"><span class="cl">    avg
</span></span><span class="line"><span class="cl">    sum
</span></span><span class="line"><span class="cl">    count
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">ps: 分组之后，最小可操作单位是组，而不是单个数据，上述命令在非严格模式下可以执行，返回的是分组之后每个组的第一条数据 ，但这个不符合分组规范，分组之后不应该考虑单个数据，而应该以组为操作单位(分组之后 没办法直接获取组内的单个数据)
</span></span><span class="line"><span class="cl">严格模式：	set global sql_mode = &#39;strict_trans_tables,only_full_group_by&#39;;
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">1、获取每个部门的最高薪资
</span></span><span class="line"><span class="cl">    select post,max(salary) from emp group by post;
</span></span><span class="line"><span class="cl">    select post as &#39;部门&#39;,max(salary) as &#39;最高薪资&#39; from emp group by post;
</span></span><span class="line"><span class="cl">    ps: as可以给字段起别名
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2、获取每个部门的最低薪资
</span></span><span class="line"><span class="cl">	select post,min(salary) from emp group by post;
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">3、获取每个部门的最高薪资
</span></span><span class="line"><span class="cl">	select post,avg(salary) from emp group by post;
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">4、获取每个部门的薪资综合
</span></span><span class="line"><span class="cl">	select post,sum(salary) from emp group by post;
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">5、获取每个部门的人数
</span></span><span class="line"><span class="cl">	select post,count(id) from emp group by post;	# 常用
</span></span><span class="line"><span class="cl">    select post,count(salary) from emp group by post;
</span></span><span class="line"><span class="cl">    select post,count(age) from emp group by post;
</span></span><span class="line"><span class="cl">	select post,count(post_comment) from emp group by post;	 # null不行
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">6、查询分组之后的部门名称和每个部门下所有的员工姓名
</span></span><span class="line"><span class="cl">	# group_concat 不单单可以支持你获取分组之后的其他字段，还支持拼接操作
</span></span><span class="line"><span class="cl">	select  post,group_concat(name) from emp group by post;
</span></span><span class="line"><span class="cl">    select  post,group_concat(name,&#39;_DSB&#39;) from emp group by post;
</span></span><span class="line"><span class="cl">    select  post,group_concat(name,&#39;:&#39;,salary) from emp group by post;
</span></span><span class="line"><span class="cl">    # concat 不分组的时候使用
</span></span><span class="line"><span class="cl">    select concat(&#39;NAME:&#39;,name),concat(&#39;SAL:&#39;,salary) from emp;
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">7、查询每个人的年薪 12薪
</span></span><span class="line"><span class="cl">	select name,salary*12 from emp;
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">补充： as语法不仅能给字段起别名，还可以给表零时起别名
</span></span><span class="line"><span class="cl">    select emp.id,emp.id from emp ;
</span></span><span class="line"><span class="cl">    select emp.id,emp.id from emp as t1; 报错
</span></span><span class="line"><span class="cl">    select t1.id,t1.id from emp as t1;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="分组注意事项">分组注意事项</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1、关键字where和group by同时出现的时候group by必须在where的后面
</span></span><span class="line"><span class="cl">	where先对整体数据进行过滤之后再分组操作
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">2、where 筛选条件不能使用筛选条件
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">3、聚合函数只能在分组之后使用
</span></span><span class="line"><span class="cl">	select id,name,age from emp where max(salary) &gt; 3000;	报错
</span></span><span class="line"><span class="cl">    select max(salary) from emp;	# 不分组默认整体就是一组
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"># 题目： 统计各部门年龄在30岁以上的员工平均薪资
</span></span><span class="line"><span class="cl">	1、先求所有年龄大于30岁的员工
</span></span><span class="line"><span class="cl">    	select * from emp where age&gt;30;
</span></span><span class="line"><span class="cl">    2、在对结果进行分组
</span></span><span class="line"><span class="cl">    	select * from emp where age&gt;30 group by post;
</span></span><span class="line"><span class="cl">    3、最终结果
</span></span><span class="line"><span class="cl">    	select post,avg(salary) from emp where age&gt;30 group by post;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="having-分组之后的筛选">having 分组之后的筛选</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">having的语法和where是一致的，只不过having是在分组之后进行的过滤操作
</span></span><span class="line"><span class="cl">即having是可以直接使用聚合函数的
</span></span><span class="line"><span class="cl">聚合函数：max，avg，sum，count
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 题目： 统计各部门年龄在30岁以上的员工工资，并且保留平均工资大于10000的部门
</span></span><span class="line"><span class="cl">select post,avg(salary) from emp 
</span></span><span class="line"><span class="cl">		where age&gt;30 
</span></span><span class="line"><span class="cl">    	group by post 
</span></span><span class="line"><span class="cl">        having avg(salary) &gt;10000
</span></span><span class="line"><span class="cl">        ;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="distinct去重">distinct去重</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">一定注意 必须是完全一样的数据才可以去重
</span></span><span class="line"><span class="cl">一定不要将主键忽视，有主键存在的情况下是不能去重，因为主键都是不同的
</span></span><span class="line"><span class="cl">[
</span></span><span class="line"><span class="cl">{&#39;id&#39;:1,&#39;name&#39;:&#39;jason&#39;,&#39;age&#39;:18},
</span></span><span class="line"><span class="cl">{&#39;id&#39;:2,&#39;name&#39;:&#39;jason&#39;,&#39;age&#39;:18},
</span></span><span class="line"><span class="cl">{&#39;id&#39;:3,&#39;name&#39;:&#39;egon&#39;,&#39;age&#39;:18}
</span></span><span class="line"><span class="cl">]
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 这一行有主键，无法去重
</span></span><span class="line"><span class="cl">select distinct id,age from emp;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 这一行无主键，可以去重
</span></span><span class="line"><span class="cl">select distinct age from emp;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="order-by-排序">order by 排序</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">select * from emp order by salary;
</span></span><span class="line"><span class="cl">select * from emp order by salary asc;
</span></span><span class="line"><span class="cl">select * from emp order by salary dasc;
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">order by 默认是升序 asc 该asc可以省略不写
</span></span><span class="line"><span class="cl">也可以修改为降序	desc
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">select * from emp order by age desc,salary asc;
</span></span><span class="line"><span class="cl"># 先按照age降序排  如果碰到age相同,则按照salary升序排，后面还可以再跟
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 题目： 统计各部门年龄再10岁以上的员工平均工资，并且保留平均工资大于1000的部门，然后对平均工资降序排序
</span></span><span class="line"><span class="cl">	select post,avg(salary) from emp 
</span></span><span class="line"><span class="cl">		where age&gt;30 
</span></span><span class="line"><span class="cl">    	group by post 
</span></span><span class="line"><span class="cl">        having avg(salary) &gt;10000
</span></span><span class="line"><span class="cl">        order by avg(salary) desc
</span></span><span class="line"><span class="cl">        ;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="limit限制展示条数">limit限制展示条数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">select * from emp;	
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;当数据量多的时候容易造成卡死现象&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">select * from emp limit 3	# 只展示三条数据
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">select * from emp limit 0,5;	#从0的位置往后取5条
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">select * from emp limit 5,5;	#从5的位置往后取5条
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">1、第一个参数是起始位置
</span></span><span class="line"><span class="cl">2、第二个参数是条数
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="正则">正则</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">select * from emp where name regexp &#39;^j.*(n|y)$&#39;;
</span></span><span class="line"><span class="cl">j开头，n或者y结尾，*代表所有
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="多表查询">多表查询</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">select * from dep,emp;	# 结果 笛卡尔积
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">select * from emp,dep where emp.dep_id = dep.id;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">Mysql正对拼表操作专门开设了对应的方法
</span></span><span class="line"><span class="cl">    inner join 	内连接
</span></span><span class="line"><span class="cl">    left join 	左连接
</span></span><span class="line"><span class="cl">    right join 	右连接
</span></span><span class="line"><span class="cl">    union 		全连接
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># inner join 内连接
</span></span><span class="line"><span class="cl"># 只拼接两张表中共有的数据
</span></span><span class="line"><span class="cl">select * from emp inner join dep on emp.dep_id = dep.id;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># left join 左连接
</span></span><span class="line"><span class="cl"># 左表所有的数据都展示出来，没有对应的项就用NULL
</span></span><span class="line"><span class="cl">select * from emp left join dep on emp.dep_id = dep.id;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># right join 右连接
</span></span><span class="line"><span class="cl"># 右表所有的数据都展示出来，没有对应的项就用NULL
</span></span><span class="line"><span class="cl">select * from emp right join dep on emp.dep_id = dep.id;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># union 全连接
</span></span><span class="line"><span class="cl"># 左右两张表的所有数据都展示出来
</span></span><span class="line"><span class="cl">select * from emp left join dep on emp.dep_id = dep.id
</span></span><span class="line"><span class="cl">union
</span></span><span class="line"><span class="cl">select * from emp right join dep on emp.dep_id = dep.id;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="子查询">子查询</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">子查询就是我们平时解决问题的思路
</span></span><span class="line"><span class="cl">	分步骤解决问题
</span></span><span class="line"><span class="cl">		第一步
</span></span><span class="line"><span class="cl">		第二部
</span></span><span class="line"><span class="cl">		...
</span></span><span class="line"><span class="cl">将一个查询语句的结果当作另一个查询语句的条件使用
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 题目：查询部门是技术或者人力资源的员工信息
</span></span><span class="line"><span class="cl">	1、获取部门的id号
</span></span><span class="line"><span class="cl">    2、再去员工表里面筛选出对应的员工
</span></span><span class="line"><span class="cl">    select id from dep where name=&#39;技术&#39; or name=&#39;人力资源&#39;;
</span></span><span class="line"><span class="cl">    select name from emp where dep_id in (200,201);
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    select * from emp where dep_id in (select id from dep where name=&#39;技术&#39; or name=&#39;人力资源&#39;);
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="总结-1">总结</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">表的查询结果可以作为其他表的查询条件
</span></span><span class="line"><span class="cl">也可以通过起别名的方式把他作为一张虚拟表跟其他表关联
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 查询平均年龄再25岁以上的部门名称
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;只要是多表查询就有两种思路  连表，子查询&#34;&#34;&#34;
</span></span><span class="line"><span class="cl"># 连表操作
</span></span><span class="line"><span class="cl">	1、先拿到部门和员工表 拼接之后的结果
</span></span><span class="line"><span class="cl">    2、分析语义 得出需要进行分组
</span></span><span class="line"><span class="cl">    	select dep.name from emp inner join dep
</span></span><span class="line"><span class="cl">        	on emp.dep_id = dep.id
</span></span><span class="line"><span class="cl">            group by dep.name
</span></span><span class="line"><span class="cl">            having avg(age) &gt; 25
</span></span><span class="line"><span class="cl">            ;
</span></span><span class="line"><span class="cl">		&#34;&#34;&#34;涉及到多表操作的时候，一定要加上表的前缀&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"># 子查询
</span></span><span class="line"><span class="cl">    select name from dep where id in
</span></span><span class="line"><span class="cl">        (select dep_id from emp group by dep_id
</span></span><span class="line"><span class="cl">            having avg(age)&gt;25);
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"># 关键字 exist(了解)
</span></span><span class="line"><span class="cl">	只返回布尔值 True False
</span></span><span class="line"><span class="cl">    返回True的时候外层查询语句执行
</span></span><span class="line"><span class="cl">    返回False的时候外层查询语句不再执行
</span></span><span class="line"><span class="cl">    select * from emp where exists 
</span></span><span class="line"><span class="cl">    	(select id from dep where id&gt;3);
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="navicat软件">Navicat软件</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1、MySQ是不区分大小写的
</span></span><span class="line"><span class="cl">	验证码忽略大小写
</span></span><span class="line"><span class="cl">    	内部统一转大写或者小写比较即可
</span></span><span class="line"><span class="cl">        	upper
</span></span><span class="line"><span class="cl">            lower
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">2、MySQL建议所有的关键字大写
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">3、MySQL中的注释有两种
</span></span><span class="line"><span class="cl">	--
</span></span><span class="line"><span class="cl">    #
</span></span><span class="line"><span class="cl">4、再navicat中如何快速注释和解注释
</span></span><span class="line"><span class="cl">	ctrl + ？	加注释
</span></span><span class="line"><span class="cl">    ctrl + ？	基于以上操作再来一次解注释
</span></span><span class="line"><span class="cl">    ctrl + shift + ？ 老版本解开注释
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="pymysql模块">pymysql模块</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">支持python代码操作数据库MySQL
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import pymysql
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">conn = pymysql.connect(
</span></span><span class="line"><span class="cl">    host=&#34;127.0.0.1&#34;,
</span></span><span class="line"><span class="cl">    port=3306,
</span></span><span class="line"><span class="cl">    user=&#39;root&#39;,
</span></span><span class="line"><span class="cl">    password=&#39;Huawei12#$&#39;,
</span></span><span class="line"><span class="cl">    database=&#39;goods_management&#39;,
</span></span><span class="line"><span class="cl">)  # 连接数据库
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)  # 产生一个游标对象(就是用来执行命令的)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sql = &#39;select * from client;&#39;
</span></span><span class="line"><span class="cl">res = cursor.execute(sql)
</span></span><span class="line"><span class="cl">print(res)  # execute 返回当前sql语句影响的行数
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">print(cursor.fetchone())  # 只拿一条
</span></span><span class="line"><span class="cl">print(cursor.fetchall())  # 拿所有
</span></span><span class="line"><span class="cl">print(cursor.fetchmany(2))  # 指定拿2条
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 读取数据类似于文件光标的移动
</span></span><span class="line"><span class="cl">cursor.scroll(1, &#39;relative&#39;)  # 相对于光标所在位置继续往后移动一位
</span></span><span class="line"><span class="cl">cursor.scroll(1, &#39;absolute&#39;)  # 相对于数据的开头往后移动一位
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="sql注入问题">sql注入问题</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">利用语法的特性，书写一些特点的语句实现固定的语法
</span></span><span class="line"><span class="cl">利用MySQL的注释语法
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">select * from passwd where name=&#39;asd&#39; or 1=1 -- asdasd&#39; and password=&#39;&#39;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">日常生活中很多软件在注册的时候都不含有特殊符号
</span></span><span class="line"><span class="cl">因为容易构造出特定的语句入侵数据库 不安全
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 敏感的数据不要自己做拼接，交给execute方法即可
</span></span><span class="line"><span class="cl">rows = cursor.execute(sql,(username,password))
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">例子：
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import pymysql
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">conn = pymysql.connect(
</span></span><span class="line"><span class="cl">    host=&#34;127.0.0.1&#34;,
</span></span><span class="line"><span class="cl">    port=3306,
</span></span><span class="line"><span class="cl">    user=&#39;root&#39;,
</span></span><span class="line"><span class="cl">    password=&#39;Huawei12#$&#39;,
</span></span><span class="line"><span class="cl">    database=&#39;goods_management&#39;,
</span></span><span class="line"><span class="cl">)  # 连接数据库
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)  # 产生一个游标对象(就是用来执行命令的)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">username = input(&#39;&gt;&gt;&gt;:&#39;)
</span></span><span class="line"><span class="cl">password = input(&#39;&gt;&gt;&gt;:&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sql = &#34;select * from passwd where name=%s and password=%s&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 不要手动拼接数据 先%s占位，之后将需要凭借的数据交给execute方法即可
</span></span><span class="line"><span class="cl">rows = cursor.execute(sql,(username,password))  # 自动识别sql里面的%s用后面的元组里面的数据替换
</span></span><span class="line"><span class="cl">print(sql)
</span></span><span class="line"><span class="cl">if rows:
</span></span><span class="line"><span class="cl">    print(&#39;登陆成功&#39;)
</span></span><span class="line"><span class="cl">    print(cursor.fetchall())
</span></span><span class="line"><span class="cl">else:
</span></span><span class="line"><span class="cl">    print(&#39;登录失败&#39;)
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="pymysql模块增删改查数据操作">pymysql模块增删改查数据操作</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">import pymysql
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">conn = pymysql.connect(
</span></span><span class="line"><span class="cl">    host=&#34;127.0.0.1&#34;,
</span></span><span class="line"><span class="cl">    port=3306,
</span></span><span class="line"><span class="cl">    user=&#39;root&#39;,
</span></span><span class="line"><span class="cl">    password=&#39;Huawei12#$&#39;,
</span></span><span class="line"><span class="cl">    database=&#39;goods_management&#39;,
</span></span><span class="line"><span class="cl">    # autocommit=True
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)  # 产生一个游标对象(就是用来执行命令的)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 增
</span></span><span class="line"><span class="cl">sql = &#39;insert into passwd(name,password) values(%s,%s)&#39;
</span></span><span class="line"><span class="cl"># rows = cursor.execute(sql,(&#39;admin&#39;,123))
</span></span><span class="line"><span class="cl">rows = cursor.executemany(sql,[(&#39;xxx&#39;,123),(&#39;ooo&#39;,123)])    #以下增加2条
</span></span><span class="line"><span class="cl">print(rows)
</span></span><span class="line"><span class="cl">conn.commit()   # 确认
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 修改
</span></span><span class="line"><span class="cl">sql = &#39;update passwd set name=&#34;hwnb&#34; where id=2&#39;
</span></span><span class="line"><span class="cl">rows = cursor.execute(sql,)
</span></span><span class="line"><span class="cl">print(rows)
</span></span><span class="line"><span class="cl">conn.commit()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 删
</span></span><span class="line"><span class="cl">sql = &#39;delete from passwd where id=2&#39;
</span></span><span class="line"><span class="cl">rows = cursor.execute(sql,)
</span></span><span class="line"><span class="cl">print(rows)
</span></span><span class="line"><span class="cl">conn.commit()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 查
</span></span><span class="line"><span class="cl">sql = &#39;select * from passwd&#39;
</span></span><span class="line"><span class="cl">cursor.execute(sql)
</span></span><span class="line"><span class="cl">print(cursor.fetchall())
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">增删改查中
</span></span><span class="line"><span class="cl">    增 删 改 他们的操作涉及到数据的修改
</span></span><span class="line"><span class="cl">    需要二次确认
</span></span><span class="line"><span class="cl">    # conn.commit()   # 确认
</span></span><span class="line"><span class="cl">    如果再上面加上autocommit=True后续则不需要确认
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">1、增删改需要二次确认才能操作
</span></span><span class="line"><span class="cl">2、批量增 
</span></span><span class="line"><span class="cl">rows = cursor.executemany(sql,[(&#39;xxx&#39;,123),(&#39;ooo&#39;,123)])
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="视图了解">视图(了解)</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1、什么是视图
</span></span><span class="line"><span class="cl">	视图就是哦通过查询得到一张虚拟表，保存下来，下次直接使用
</span></span><span class="line"><span class="cl">	视图也是表
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">2、为什么要用
</span></span><span class="line"><span class="cl">	频繁操作一张虚拟表，这样就可以做成视图，后续直接操作
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">3、怎么用
</span></span><span class="line"><span class="cl">	固定语法
</span></span><span class="line"><span class="cl">	create view 视图名 as 虚拟表的查询sql语句
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">4、使用频率
</span></span><span class="line"><span class="cl">	不高
</span></span><span class="line"><span class="cl">	当创建很多视图之后，会造成表的不好维护
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">注意：
</span></span><span class="line"><span class="cl">	1、视图再硬盘上只有表结构，没有数据（数据还是来自于之前的表）
</span></span><span class="line"><span class="cl">	2、视图只用来查询 里面的数据不要修改，可能会影响到真正的表
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="触发器了解">触发器(了解)</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">是什么：
</span></span><span class="line"><span class="cl">	再满足对表数据进行增、删、改的情况下，自动触发的功能
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">有啥用：
</span></span><span class="line"><span class="cl">	可以帮助我们实现监控、日志...
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">语法结构：
</span></span><span class="line"><span class="cl">	触发器可以再六种情况自动触发
</span></span><span class="line"><span class="cl">	增前，增后，删前，删后，改前，改后
</span></span><span class="line"><span class="cl">	create trigger 触发器的名字 before/after insert/update on 表名 
</span></span><span class="line"><span class="cl">	for each row
</span></span><span class="line"><span class="cl">	begin
</span></span><span class="line"><span class="cl">		sql语句
</span></span><span class="line"><span class="cl">	end
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">ps:修改MySQL默认的语句结束符,只作用于当前窗口
</span></span><span class="line"><span class="cl">	delimiter $$  将默认的结束符号由;改为$$
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"># 案例
</span></span><span class="line"><span class="cl">CREATE TABLE cmd(
</span></span><span class="line"><span class="cl">	id int primary key auto_increment,
</span></span><span class="line"><span class="cl">	user char(32),
</span></span><span class="line"><span class="cl">	priv char(10),
</span></span><span class="line"><span class="cl">	cmd char(64),
</span></span><span class="line"><span class="cl">	sub_time datetime,	# 提交事件
</span></span><span class="line"><span class="cl">	success enum(&#39;yes&#39;,&#39;no&#39;) # no代表执行失败
</span></span><span class="line"><span class="cl">);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">create table errlog(
</span></span><span class="line"><span class="cl">	id int primary key auto_increment,
</span></span><span class="line"><span class="cl">	err_cmd char(64),
</span></span><span class="line"><span class="cl">	err_time datetime
</span></span><span class="line"><span class="cl">);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">当cmd表中的记录succes字段是no那么触发触发器的执行取errlog表中插入数据
</span></span><span class="line"><span class="cl">NEW指代的是一条条数据对象
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">delimiter $$
</span></span><span class="line"><span class="cl">create trigger tri_after_insert_cmd after insert on cmd 
</span></span><span class="line"><span class="cl">for each row
</span></span><span class="line"><span class="cl">begin
</span></span><span class="line"><span class="cl">	if NEW.success = &#39;no&#39; then
</span></span><span class="line"><span class="cl">    	insert into errlog(err_cmd,err_time)
</span></span><span class="line"><span class="cl">values(NEW.cmd,NEW.sub_time);
</span></span><span class="line"><span class="cl">	end if;
</span></span><span class="line"><span class="cl">end $$
</span></span><span class="line"><span class="cl">delimiter;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 删除触发器
</span></span><span class="line"><span class="cl">drop trigger tri_after_insert_cmd
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="事务需要掌握">事务(需要掌握)</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">是什么：
</span></span><span class="line"><span class="cl">    开启一个事务可以包含多条sql语句 这些sql语句要么同时成功
</span></span><span class="line"><span class="cl">    要么一个都别想成功
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">作用：
</span></span><span class="line"><span class="cl">	保证了对数据操作的安全性
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">事务的四大特性：
</span></span><span class="line"><span class="cl">	ACID
</span></span><span class="line"><span class="cl">    A:原子性
</span></span><span class="line"><span class="cl">        一个事务是不可分割的单位，事务中包含这诸多操作
</span></span><span class="line"><span class="cl">        要么同时成功要摸同时失败
</span></span><span class="line"><span class="cl">    C:一致性
</span></span><span class="line"><span class="cl">        事务必须是使数据库从一个一致性状态变到另一个一致性状态
</span></span><span class="line"><span class="cl">        一致性跟原子性密切相关
</span></span><span class="line"><span class="cl">    I:隔离性
</span></span><span class="line"><span class="cl">        一个事务的执行不能为其他事务干扰
</span></span><span class="line"><span class="cl">    D:持久性
</span></span><span class="line"><span class="cl">        也叫&#34;永久性&#34;
</span></span><span class="line"><span class="cl">        一个事务一旦提交成功执行成功 那么他是将数据刷到硬盘中的，不会丢数据
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">如何使用：
</span></span><span class="line"><span class="cl">	1、开启事务
</span></span><span class="line"><span class="cl">    	start transaction;
</span></span><span class="line"><span class="cl">    2、回滚(回到事务发生之前的状态)
</span></span><span class="line"><span class="cl">    	rollback;
</span></span><span class="line"><span class="cl">    3、确认(确认之后就无法回滚)
</span></span><span class="line"><span class="cl">    	commit;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;模拟转账功能&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">create table user(
</span></span><span class="line"><span class="cl">	id int primary key auto_increment,
</span></span><span class="line"><span class="cl">    name char(16),
</span></span><span class="line"><span class="cl">    balance int
</span></span><span class="line"><span class="cl">);
</span></span><span class="line"><span class="cl">insert into user(name,blance) values
</span></span><span class="line"><span class="cl">(&#39;jason&#39;,1000),
</span></span><span class="line"><span class="cl">(&#39;egon&#39;,1000),
</span></span><span class="line"><span class="cl">(&#39;tank&#39;,1000);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#1、先开启事务
</span></span><span class="line"><span class="cl">start transaction;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#2、多条sql语句
</span></span><span class="line"><span class="cl">update user set balance=900 where name = &#39;jason&#39;;
</span></span><span class="line"><span class="cl">update user set balance=1010 where name=&#39;egon&#39;;
</span></span><span class="line"><span class="cl">update user set balance=1090 where name=&#39;tank&#39;;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#3、回滚
</span></span><span class="line"><span class="cl">rollback;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#4、确认
</span></span><span class="line"><span class="cl">commit;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">总结：
</span></span><span class="line"><span class="cl">	当你想让sql语句保持一致性的时候可以使用事务
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="存储过程了解">存储过程(了解)</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">是什么
</span></span><span class="line"><span class="cl">	类似于python中的自定义函数
</span></span><span class="line"><span class="cl">	它的内部包含了一系列可以执行的sql语句，存储过程放于MySQL服务端中，可以直接通过存储过程触发内部sql语句执行
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">怎么用
</span></span><span class="line"><span class="cl">	固定语法
</span></span><span class="line"><span class="cl">	create procedure 存储过程的名字(形参1,形参2,....)
</span></span><span class="line"><span class="cl">	begin
</span></span><span class="line"><span class="cl">		sql代码
</span></span><span class="line"><span class="cl">	end
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">ps:修改MySQL默认的语句结束符,只作用于当前窗口
</span></span><span class="line"><span class="cl">	delimiter $$  将默认的结束符号由;改为$$
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"># 调用
</span></span><span class="line"><span class="cl">	call 存储过程的名字
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">三种开发模型
</span></span><span class="line"><span class="cl">	1、第一种
</span></span><span class="line"><span class="cl">		应用程序：程序员写代码开发
</span></span><span class="line"><span class="cl">		MySQL：提前编写好存储过程，供应用程序调用
</span></span><span class="line"><span class="cl">		优点：提升开发效率
</span></span><span class="line"><span class="cl">		缺点：考虑到认为因素，跨部门沟通问题，后续的存储过程扩展性差
</span></span><span class="line"><span class="cl">	2、第二种
</span></span><span class="line"><span class="cl">		应用程序:程序员写代码开发之外，涉及到数据库操作也自己写
</span></span><span class="line"><span class="cl">		优点：扩展性高
</span></span><span class="line"><span class="cl">		缺点：开发效率低，编写sql语句太过繁琐，而且后续还要考虑sql优化问题
</span></span><span class="line"><span class="cl">	3、第三种
</span></span><span class="line"><span class="cl">		应用程序：只写程序代码，不写sql语句，基于别人写好的操作MySQL的python框架直接操作即可	ORM框架
</span></span><span class="line"><span class="cl">		优点：开发效率比上面两种情况都高
</span></span><span class="line"><span class="cl">		缺点：语句的扩展性差，可能会出现效率低下的问题
</span></span><span class="line"><span class="cl">	4、总结
</span></span><span class="line"><span class="cl">		第一种基本不用，一般都是第三种
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;存储过程具体演示&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">	delimiter $$
</span></span><span class="line"><span class="cl">	create procedure p1(
</span></span><span class="line"><span class="cl">    	in m int,	# 只进不出 m不返回出去
</span></span><span class="line"><span class="cl">        in n int,
</span></span><span class="line"><span class="cl">        out res int, #该形参可以返回出去
</span></span><span class="line"><span class="cl">    )
</span></span><span class="line"><span class="cl">	begin
</span></span><span class="line"><span class="cl">		select tname from teacher where tid&gt;m and tid&lt;n;
</span></span><span class="line"><span class="cl">        set tes=0;	#将res变量修改，用来标识当前存储代码执行
</span></span><span class="line"><span class="cl">	end $$
</span></span><span class="line"><span class="cl">    delimiter ;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 正对形参res 不能直接传数据，应该传一个变量
</span></span><span class="line"><span class="cl"># 定义变量
</span></span><span class="line"><span class="cl">	set @res = 10;
</span></span><span class="line"><span class="cl"># 查看变量
</span></span><span class="line"><span class="cl">	select @res;
</span></span><span class="line"><span class="cl"># 调用
</span></span><span class="line"><span class="cl">	call p1(1,5,@res)
</span></span><span class="line"><span class="cl">    
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="在pymysql中调用存储过程">在pymysql中调用存储过程</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">import pymysql
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">conn = pymysql.connect(
</span></span><span class="line"><span class="cl">    host=&#34;127.0.0.1&#34;,
</span></span><span class="line"><span class="cl">    port=3306,
</span></span><span class="line"><span class="cl">    user=&#39;root&#39;,
</span></span><span class="line"><span class="cl">    password=&#39;Huawei12#$&#39;,
</span></span><span class="line"><span class="cl">    database=&#39;goods_management&#39;,
</span></span><span class="line"><span class="cl">    # autocommit=True
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)  # 产生一个游标对象(就是用来执行命令的)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 调用存储过程
</span></span><span class="line"><span class="cl">cursor.callproc(&#39;p1&#39;,(1,5,10))
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">@_p1_0 = 1
</span></span><span class="line"><span class="cl">@_p1_1 = 5
</span></span><span class="line"><span class="cl">@_p1_2 = 10
</span></span><span class="line"><span class="cl">&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">print(cursor.fetchall())
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="内置函数了解">内置函数(了解)</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">跟存储过程的区别：存储过程是自定义函数，函数类似于内置函数
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="流程控制了解">流程控制(了解)</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># if判断
</span></span><span class="line"><span class="cl">    delimiter //
</span></span><span class="line"><span class="cl">    create procedure proc_if()
</span></span><span class="line"><span class="cl">    begin
</span></span><span class="line"><span class="cl">        declare i int default 0;
</span></span><span class="line"><span class="cl">        if i = 1 then
</span></span><span class="line"><span class="cl">            select 1;
</span></span><span class="line"><span class="cl">        elseif i = 2 then
</span></span><span class="line"><span class="cl">            select 2;
</span></span><span class="line"><span class="cl">        else
</span></span><span class="line"><span class="cl">            select 7;
</span></span><span class="line"><span class="cl">        end if;
</span></span><span class="line"><span class="cl">    end //
</span></span><span class="line"><span class="cl">    delimiter ;
</span></span><span class="line"><span class="cl"># while 循环
</span></span><span class="line"><span class="cl">    delimiter //
</span></span><span class="line"><span class="cl">    create procedure proc_while()
</span></span><span class="line"><span class="cl">    begin
</span></span><span class="line"><span class="cl">        declare num int ;
</span></span><span class="line"><span class="cl">        set num = 0;
</span></span><span class="line"><span class="cl">        while num &lt; 0 do
</span></span><span class="line"><span class="cl">            select
</span></span><span class="line"><span class="cl">                num;
</span></span><span class="line"><span class="cl">            set num = num + 1;
</span></span><span class="line"><span class="cl">        end while;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="索引理论了解">索引理论(了解)</h2>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">khw</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2021-10-30
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/python/">python</a>
          <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/pythonday10git/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">python,day10,git</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/pythonday8%E5%89%8D%E7%AB%AF/">
            <span class="next-text nav-default">python,day8,前端</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://gitee.com/khwcloud" class="iconfont icon-github" title="github"></a>
  <a href="http://localhost:1313/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2022
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">khw</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>



<script type="text/javascript" src="/js/main.min.9e3db4166f5901c11faec00349b7b03ae36c12a6e820a208cf498f1aee812258.js"></script>








</body>
</html>
